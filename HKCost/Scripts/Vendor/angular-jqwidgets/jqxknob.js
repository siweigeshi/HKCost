/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(e){"use strict";e.jqx.jqxWidget("jqxKnob","",{}),e.extend(e.jqx._jqxKnob.prototype,{defineInstance:function(){var r={type:"circle",allowValueChangeOnClick:!0,allowValueChangeOnDrag:!0,allowValueChangeOnMouseWheel:!0,changing:null,dragEndAngle:-1,dragStartAngle:-1,disabled:!1,dial:{style:"transparent",innerRadius:0,outerRadius:0,gradientType:null,gradientStops:null,startAngle:null,endAngle:null},endAngle:360,height:400,labels:{type:"digits",step:null,rotate:!1,offset:null,style:"",visible:!1},marks:{type:"",thickness:1,size:"10%",colorProgress:"transparent",colorRemaining:"transparent",minorInterval:1,majorInterval:5,offset:"80%",majorSize:"15%"},min:0,max:100,progressBar:{size:"10%",offset:"60%",color:"transparent",background:"transparent"},pointer:{color:{color:"transparent",border:null,gradientType:null,gradientStops:null},thickness:1,size:"",type:"",visible:!1},pointerGrabAction:"normal",renderEngine:"",rotation:"clockwise",startAngle:0,spinner:{color:"transparent",innerRadius:0,outerRadius:0,marks:{step:1,rotate:!1,color:"transparent",size:0,steps:10,thickness:1,offset:0}},style:{fill:"transparent",stroke:"transparent"},_touchEvents:{mousedown:e.jqx.mobile.getTouchEventName("touchstart"),mouseup:e.jqx.mobile.getTouchEventName("touchend"),mousemove:e.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave",click:e.jqx.mobile.getTouchEventName("touchstart")},step:1,snapToStep:!0,value:0,width:400};return this===e.jqx._jqxKnob.prototype?r:(e.extend(!0,this,r),r)},createInstance:function(){var r=this;r._hostInit(),r._ie8Plugin(),r._validateProperties(),r._initValues(),r._refresh(),e.jqx.utilities.resize(r.host,function(){r.widgetSize=Math.min(r.host.width(),r.host.height()),r._refresh()})},_getEvent:function(e){return this._isTouchDevice?this._touchEvents[e]+".jqxKnob"+this.element.id:e+".jqxKnob"+this.element.id},_ie8Plugin:function(){"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var r=0;r<this.length;r++)e.apply(this,[this[r],r,this])}),window.getComputedStyle||(window.getComputedStyle=function(e,r){return this.el=e,this.getPropertyValue=function(r){var t=/(\-([a-z]){1})/g;return"float"==r&&(r="styleFloat"),t.test(r)&&(r=r.replace(t,function(){return arguments[2].toUpperCase()})),e.currentStyle[r]?e.currentStyle[r]:null},this})},createColorGradient:function(e,r,t){return this._getGradient(e,r,t)},destroy:function(){var r=this;r.removeHandler(e(document),"mousemove.jqxKnob"+r.host[0].id),r.removeHandler(e(document),"blur.jqxKnob"+r.host[0].id),r.removeHandler(e(document),"mouseup.jqxKnob"+r.host[0].id),r.host.empty(),r.host.remove()},propertiesChangedHandler:function(e,r,t){t.width&&t.height&&2==Object.keys(t).length&&e._refresh()},propertyChangedHandler:function(e,r,t,a){e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("disabled"===r&&e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),"value"!==r?(e._validateProperties(),e._refresh()):e._setValue(a,"propertyChange"))},val:function(e){var r=this;if(0==arguments.length)return r.value;r._setValue(e,null)},_isPointerGrabbed:!1,_pointerGrabbedIndex:-1,_attatchPointerEventHandlers:function(){var r=this;r.addHandler(r.host,this._getEvent("mousedown"),function(t){if("pointer"!==r.pointerGrabAction||t.target.id===r._pointerID){if(r._isTouchDevice){var a=e.jqx.position(t);t.clientX=a.left,t.clientY=a.top}if("progressBar"===r.pointerGrabAction){var n={x:t.clientX,y:t.clientY},i=r.host[0].getBoundingClientRect(),o=r.widgetSize,s={x:i.left+o/2,y:i.top+o/2},l=r._calculateAngleFromCoordinates(n,s,r.rotation),g=r._calculateDistance(n,s);if(l<r.startAngle&&(l+=360),l>r.endAngle&&l-r.endAngle!=360+r.startAngle-l)return;var d=r._getScale(r.progressBar.offset,"w",o/2),c=r._getScale(r.progressBar.size,"w",o/2);if(g<d||g>d+c)return}return r._isPointerGrabbed=!0,!0===r.allowValueChangeOnClick&&r._mouseMovePointer(t),t.preventDefault(),t.stopPropagation(),!1}});var t=null;r.addHandler(e(document),this._getEvent("mousemove"),function(e){if(r.allowValueChangeOnDrag&&(t&&clearTimeout(t),t=setTimeout(function(){r._mouseMovePointer(e)}),r._isPointerGrabbed))return!1}),r.addHandler(e(document),"blur.jqxKnob"+r.host[0].id,function(){r._isPointerGrabbed=!1,r._pointerGrabbedIndex=-1}),r.addHandler(e(document),this._getEvent("mouseup"),function(e){r._isPointerGrabbed&&(r._isPointerGrabbed=!1,r._pointerGrabbedIndex=-1,r._raiseEvent(0,{originalEvent:e,value:r.value}))}),r.addHandler(r.host,"wheel",function(e){if(r.allowValueChangeOnMouseWheel){var t=0;return e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.originalEvent&&e.originalEvent.deltaY&&(t=e.originalEvent.deltaY),t>0?r._increment():r._decrement(),!1}})},_mouseMovePointer:function(r){var t=this;if(!t.disabled&&t._isPointerGrabbed){if(t._isTouchDevice){var a=e.jqx.position(r);r.clientX=a.left,r.clientY=a.top}var n={x:r.clientX,y:r.clientY},i=t.host[0].getBoundingClientRect(),o=t.widgetSize,s={x:i.left+o/2,y:i.top+o/2},l=t._calculateAngleFromCoordinates(n,s,t.rotation),g=t._calculateValueFromAngle(l,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if(t.value.length&&-1===t._pointerGrabbedIndex)for(var d=0;d<t.value.length;d++){if(g<=t.value[d]){t._pointerGrabbedIndex=d;break}if(d===t.value.length-1)t._pointerGrabbedIndex=d;else if(g<=t.value[d+1]){var c=t.value[d]+(t.value[d+1]-t.value[d])/2;t._pointerGrabbedIndex=g<=c?d:d+1;break}}if(t.pointer&&t.pointer.length>1){if(1==t._pointerGrabbedIndex){var u=t._calculateAngleFromValue(t.value[0],t.dragStartAngle,t.dragEndAngle,t.min,t.max),h=t._calculateAngleFromValue(t.max,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if((l=t._calculateAngleFromValue(g,t.dragStartAngle,t.dragEndAngle,t.min,t.max))<=u)return;if(l>=h)return}if(0==t._pointerGrabbedIndex){var h=t._calculateAngleFromValue(t.value[1],t.dragStartAngle,t.dragEndAngle,t.min,t.max),u=t._calculateAngleFromValue(t.min,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if((l=t._calculateAngleFromValue(g,t.dragStartAngle,t.dragEndAngle,t.min,t.max))<=u)return;if(l>=h)return}}if(t.changing){var p=t.value.slice(0);if(p[t._pointerGrabbedIndex]=g,!1===t.changing(t.value,p))return}t._setValue(g,"mouse")}},_getScale:function(e,r,t){return e&&e.toString().indexOf("%")>=0?(e=parseInt(e,10)/100,"object"==typeof t?t[r]()*e:t*e):parseInt(e,10)},_hostInit:function(){var r=this;this._isTouchDevice=e.jqx.mobile.isTouchDevice();var t=r.host;t.width(r.width),t.height(r.height),t.css("position","relative"),r.host.addClass(r.toThemeProperty("jqx-widget jqx-knob")),-1==r.dragStartAngle&&(r.dragStartAngle=r.startAngle),-1==r.dragEndAngle&&(r.dragEndAngle=r.endAngle),r.dragStartAngle<r.startAngle&&(r.dragStartAngle=r.startAngle),r.dragEndAngle>r.endAngle&&(r.dragEndAngle=r.endAngle),r.widgetSize=Math.min(r.host.width(),r.host.height())},_initRenderer:function(r){if(!e.jqx.createRenderer)throw"jqxKnob: Please include a reference to jqxdraw.js";return e.jqx.createRenderer(this,r)},_initValues:function(){var e=this;e.marks&&(e.marks.style&&""!==e.marks.style&&("line"!==e.marks.style||e.marks.thickness||(e.marks.thickness=1),e.marks.size||(e.marks.size="5%"),e.marks.offset||(e.marks.offset="85%")),e.marks.majorInterval&&void 0===e.marks.majorSize&&(e.marks.majorSize="10%")),e._marksList=e._getMarksArray(e.marks),e.spinner&&(e._spinnerMarksList=e._getMarksArray(e.spinner.marks))},_calculateAngleFromValue:function(r,t,a,n,i){return e.jqx.browser.msie&&e.jqx.browser.version<9?"circle"!=this.type?n!=i?parseInt((r-n)/(i-n)):0:n!=i?parseInt((r-n)/(i-n)*(a-t)):0:"circle"!=this.type?n!=i?(r-n)/(i-n):0:n!=i?(r-n)/(i-n)*(a-t):0},_calculateAngleFromCoordinates:function(e,r,t){var a=e.x-r.x,n=e.y-r.y;return n>0?"clockwise"===t?90-180*Math.atan(a/n)/Math.PI:270+180*Math.atan(a/n)/Math.PI:n<0?"clockwise"===t?270-180*Math.atan(a/n)/Math.PI:90+180*Math.atan(a/n)/Math.PI:a>=0?0:180},_calculateValueFromAngle:function(e,r,t,a,n){e<r&&(e+=360);var i=a;return e>t?e-t<360+r-e&&(i=n):i=a+(e-r)*(n-a)/(t-r),i},_calculateDistance:function(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))},_drawBackground:function(){var e,r,t=this,a=t.renderer;if(r=(e=t.widgetSize)/2,r-=(o=t.style.strokeWidth?t.style.strokeWidth:0)/2,t.style){var n=t._getColor(t.style.fill),i=t._getColor(t.style.stroke),o=t.style.strokeWidth?t.style.strokeWidth:1;"circle"!=t.type?a.rect(0,0,this.host.width(),this.host.height(),{fill:n,stroke:i,"stroke-width":o}):a.circle(e/2,e/2,r,{fill:n,stroke:i,"stroke-width":o})}},_drawDial:function(){var e=this;if(e.dial){var r,t,a,n,i,o,s,l=e.renderer,g=e.widgetSize;r=t=g/2,n=e._getScale(e.dial.outerRadius,"w",g/2),a=e._getScale(e.dial.innerRadius,"w",g/2),null!=e.dial.startAngle&&null!=e.dial.endAngle?(i="clockwise"===e.rotation?360-e.dial.endAngle:e.dial.startAngle,o="clockwise"===e.rotation?360-e.dial.startAngle:e.dial.endAngle):(i="clockwise"===e.rotation?360-e.endAngle:e.startAngle,o="clockwise"===e.rotation?360-e.startAngle:e.endAngle),s=e._getColor(e.dial.style.fill);var d=e._getColor(e.dial.style.stroke)||"",c=e.dial.style.strokeWidth||0;l.pieslice(r,t,a,n,i,o,0,{fill:s,stroke:d,"stroke-width":c})}},_getMarksArray:function(e){if(void 0==e)return[];var r,t=this,a={},n=t.max,i=t.min,o=n-i,s=e.minorInterval,l=e.majorInterval,g=function(e){return parseFloat(e.toPrecision(12))};if(s){for(r=0;r<o;r+=s)a[g(i+r)]={type:"minor"};a[n]={type:"minor"}}if(l){for(r=0;r<o;r+=l)a[g(i+r)]={type:"major"};a[n]={type:"major"}}if(!s&&!l){var d=t.step;if(d){for(r=0;r<o;r+=d)a[g(i+r)]={type:"minor"};a[n]={type:"minor"}}}return a},_drawMarks:function(){var r=this;if(r.marks){var t=r.renderer,a=r.widgetSize,n=r.marks&&null!=r.marks.colorRemaining?r.marks.colorRemaining:"transparent";n=r._getColor(n),r._dialMarks=[];var i,o,s=r.marks.type;s||(s="line");var l=r._getScale(r.marks.offset,"w",a/2),g=r._marksList;e.each(g,function(g,d){if(r.dragEndAngle-r.dragStartAngle!=360||g!=r.max)if(o=r.dragStartAngle+r._calculateAngleFromValue(g,r.dragStartAngle,r.dragEndAngle,r.min,r.max),"circle"===s){var c=r._getScale(r.marks.size,"w",a/2),u=r._getPointerPosition({x:a/2,y:a/2},l,o,r.rotation);r._dialMarks.push(t.circle(u.x,u.y,c,{fill:n}))}else if("line"===s){i="major"===d.type&&null!==r.marks.majorSize&&void 0!==r.marks.majorSize?r._getScale(r.marks.majorSize,"w",a/2):r._getScale(r.marks.size,"w",a/2);var h=r._getScale(r.marks.thickness,"w",a/2),p=r._getPointerPosition({x:a/2,y:a/2},l,o,r.rotation),_=r._getPointerPosition({x:a/2,y:a/2},l+i,o,r.rotation);e.jqx.browser.msie&&e.jqx.browser.version<9?r._dialMarks.push(t.line(parseInt(p.x),parseInt(p.y),parseInt(_.x),parseInt(_.y),{stroke:n,"stroke-width":h})):r._dialMarks.push(t.line(p.x,p.y,_.x,_.y,{stroke:n,"stroke-width":h}))}})}},_drawProgressBars:function(){var r=this;if(r.progressBar){r._progressBar=r._progressBar||[];for(l=0;l<r._progressBar.length;l++)e(r._progressBar[l]).remove();if(r._progressBar=[],r._isArray(r.progressBar.style)){var t=r.value[0],a=r.value[1],n=r.progressBar.style[0],i=r.progressBar.style[1];if(r._progressBar.push(r._drawProgressBar(r.max,r.progressBar.background,"background")),r.progressBar.ranges)for(l=0;l<r.progressBar.ranges.length;l++){var o=r.progressBar.ranges[l].startValue,s=r.progressBar.ranges[l].endValue;r._progressBar.push(r._drawProgressBarFromToValue(o,s,r.progressBar.ranges[l],"background"))}r._progressBar.push(r._drawProgressBar(t,n)),r._progressBar.push(r._drawProgressBarFromEndToStart(a,i))}else{if(r._progressBar.push(r._drawProgressBar(r.max,r.progressBar.background,"background")),r.progressBar.ranges)for(var l=0;l<r.progressBar.ranges.length;l++){var o=r.progressBar.ranges[l].startValue,s=r.progressBar.ranges[l].endValue;r._progressBar.push(r._drawProgressBarFromToValue(o,s,r.progressBar.ranges[l],"background"))}r._progressBar.push(r._drawProgressBar(r.value,r.progressBar.style))}}},_drawProgressBarFromEndToStart:function(e,r){var t,a,n,i,o,s=this,l=s.renderer,g=s.widgetSize,d=s._getScale(s.progressBar.offset,"w",g/2);a=n=g/2,i=d,o=d+s._getScale(s.progressBar.size,"w",g/2);var c=s._getColor(r.fill)||"transparent",u=s._getColor(r.stroke)||"transparent";t=s.dragStartAngle+s._calculateAngleFromValue(e,s.dragStartAngle,s.dragEndAngle,s.min,s.max),s.dragStartAngle;var h=r.strokeWidth?r.strokeWidth:1;if(s.endAngle!=t)return"clockwise"===s.rotation?l.pieslice(a,n,i,o,360-s.endAngle,360-t,0,{fill:c,stroke:u,"stroke-width":h}):l.pieslice(a,n,i,o,void 0,t,0,{fill:c,stroke:u,"stroke-width":h})},_drawProgressBarFromToValue:function(e,r,t,a){var n,i,o,s,l,g,d,c=this,u=c.renderer,h=c.widgetSize,p=c._getScale(c.progressBar.offset,"w",h/2);o=s=h/2,l=p,g=p+(n=c._getScale(c.progressBar.size,"w",h/2));var _=c._getColor(t.fill)||"transparent",m=c._getColor(t.stroke)||"transparent";if(i=c.dragStartAngle+c._calculateAngleFromValue(r,c.dragStartAngle,c.dragEndAngle,c.min,c.max),(d=c.dragStartAngle+c._calculateAngleFromValue(e,c.dragStartAngle,c.dragEndAngle,c.min,c.max))!=i){var f=1;"background"==a&&(f=0);var v=t.strokeWidth?t.strokeWidth:f;if("circle"!=c.type){if("rect"==c.type){var k=i*(this.host.height()-2*p),y=this.host.height()-2*p;return u.rect(o-n/2,p+y-k,n,k,{fill:_,stroke:m,"stroke-width":v})}return u.rect(p,s-n/2,this.host.width()-2*p,n,{fill:_,stroke:m,"stroke-width":v})}return"clockwise"===c.rotation?u.pieslice(o,s,l,g,360-i,360-d,0,{fill:_,stroke:m,"stroke-width":v}):u.pieslice(o,s,l,g,d,i,0,{fill:_,stroke:m,"stroke-width":v})}},_drawProgressBar:function(e,r,t){var a,n,i,o,s,l,g,d=this,c=d.renderer,u=d.widgetSize,h=d._getScale(d.progressBar.offset,"w",u/2);i=o=u/2,s=h,l=h+(a=d._getScale(d.progressBar.size,"w",u/2));var p=d._getColor(r.fill)||"transparent",_=d._getColor(r.stroke)||"transparent";if(n=d.dragStartAngle+d._calculateAngleFromValue(e,d.dragStartAngle,d.dragEndAngle,d.min,d.max),(g=d.dragStartAngle)!=n){var m=1;"background"==t&&(m=0);var f=r.strokeWidth?r.strokeWidth:m;if("circle"!=d.type){if("rect"==d.type){var v=n*(this.host.height()-2*h),k=this.host.height()-2*h;return c.rect(i-a/2,h+k-v,a,v,{fill:p,stroke:_,"stroke-width":f})}return c.rect(h,o-a/2,this.host.width()-2*h,a,{fill:p,stroke:_,"stroke-width":f})}return"clockwise"===d.rotation?c.pieslice(i,o,s,l,360-n,360-g,0,{opacity:r.opacity||1,fill:p,stroke:_,"stroke-width":f}):c.pieslice(i,o,s,l,g,n,0,{opacity:r.opacity||1,fill:p,stroke:_,"stroke-width":f})}},_drawLabels:function(){var r=this;r._labels=[];var t=r.renderer,a=r.widgetSize;if(void 0===r.labels.visible&&(r.labels.visible=!0),!0===r.labels.visible){var n,i=r._getScale(r.labels.offset,"w",a/2),o=r.labels.type?r.labels.type:"digits",s=r.labels.style,l=s&&s.fill?r._getColor(s.fill):"#333";if("digits"===o){var g=[];if(r.labels.customLabels)for(n=0;n<r.labels.customLabels.length;n++)g.push(r.labels.customLabels[n].value);else{var d=r.labels.step||r.step;for(n=r.min;n<r.max;n+=d)g.push(n);r.dragEndAngle-360<r.dragStartAngle&&g.push(r.max)}for(n=0;n<g.length;n++){var c=r.labels.customLabels?r.labels.customLabels[n].text:g[n].toString();r.labels.formatFunction&&(c=r.labels.formatFunction(c));var u=r.dragStartAngle,h=r.dragEndAngle,p=u+r._calculateAngleFromValue(g[n],u,h,r.min,r.max),_=r._getPointerPosition({x:a/2,y:a/2},i,p,r.rotation);if(e.jqx.browser.msie&&e.jqx.browser.version<9){var m=t.measureText(c,0,{class:this.toThemeProperty("jqx-knob-label")}),f=r.labels.rotate?90-p:0;t.text(c,_.x-m.width/2,_.y-m.height/2,m.width,m.height,f,{class:this.toThemeProperty("jqx-knob-label")},!1)}else{var m=t.measureText(c,0,{style:{fill:l},class:this.toThemeProperty("jqx-knob-label")}),f=r.labels.rotate?90-p:0;t.text(c,_.x-m.width/2,_.y-m.height/2,m.width,m.height,f,{style:{fill:l},class:this.toThemeProperty("jqx-knob-label")},!1)}}}}},_drawPointers:function(){var r=this;if(r._pointers=r._pointers||[],r._pointers.forEach(function(r,t,a){e(r).remove(),a.splice(t,1)}),r.pointer)if(r._isArray(r.pointer))for(var t=0;t<r.progressBar.style.length;t++)!1!==r.pointer[t].visible&&r._pointers.push(r._drawPointer(r.value[t],r.pointer[t]));else{if(!1===r.pointer.visible)return;r._pointers.push(r._drawPointer(r.value,r.pointer))}},_drawPointer:function(e,r){var t=this;r.id=r.id||t._getID();var a=t.renderer,n=t.widgetSize,i=r.type;i||(i="circle"),r.style||(r.style={fill:"#feaf4e",stroke:"#feaf4e"});var o,s,l,g=t._getColor(r.style.fill),d=r.style.stroke||"",c=t._getScale(r.offset,"w",n/2),u=t.dragStartAngle+t._calculateAngleFromValue(e,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if("circle"===i){var h=t._getScale(r.size,"w",n/2),p=t._getPointerPosition({x:n/2,y:n/2},c,u,t.rotation);l=a.circle(p.x,p.y,h,{id:r.id,fill:g,stroke:d})}else if("line"===i){o=t._getScale(r.size,"w",n/2),s=r.thickness;var _=t._getPointerPosition({x:n/2,y:n/2},c,u,t.rotation),m=t._getPointerPosition({x:n/2,y:n/2},c+o,u,t.rotation);l=a.line(_.x,_.y,m.x,m.y,{id:r.id,stroke:g,"stroke-width":s})}else if("arc"===i){o=t._getScale(r.size,"w",n/2);var f,v,k,y,w,x,b=(t.dragEndAngle-t.dragStartAngle)/t._steps.length;f=v=n/2,k=c,y=c+o,w="clockwise"===t.rotation?360-(u+b/2):u-b/2,x="clockwise"===t.rotation?360-(u-b/2):u+b/2,l=a.pieslice(f,v,k,y,w,x,0,{id:r.id,fill:g,stroke:d})}else if("arrow"===i){o=t._getScale(r.size,"w",n/2),s=r.thickness;var A=t._getPointerPosition({x:n/2,y:n/2},o,u,t.rotation),S=t._getPointerPosition({x:n/2,y:n/2},c,u,t.rotation),P=t._getPointerPosition({x:S.x,y:S.y},s/2,u-90,t.rotation),j=t._getPointerPosition({x:S.x,y:S.y},s/2,u+90,t.rotation),M="M "+A.x+","+A.y+" L "+P.x+","+P.y+" L "+j.x+","+j.y+" "+A.x+","+A.y;l=this.renderer.path(M,{id:r.id,stroke:d,fill:g})}return l},_rotateSpinnerMarks:function(r){var t=this,a=t.spinner.marks;if(a){if(!1===a.rotate)return;var n=t.renderer,i=t.widgetSize,o=a&&null!=a.colorRemaining?a.colorRemaining:"transparent";o=t._getColor(o);var s,l,g=a.type;g||(g="line");for(var d=t._getScale(a.offset,"w",i/2),c=0;c<t._spinnerMarks.length;c++)e(t._spinnerMarks[c]).remove();t._spinnerMarks=[];var u=t._spinnerMarksList;e.each(u,function(e,c){if(t.endAngle-t.startAngle!=360||e!=t.max){if((l=r+t._calculateAngleFromValue(e,t.startAngle,t.endAngle,t.min,t.max))<t.startAngle)return!0;if(l>t.endAngle&&l<t.startAngle+360)return!0;if("circle"===g){var u=t._getScale(a.size,"w",i/2),h=t._getPointerPosition({x:i/2,y:i/2},d,l,t.rotation);t._spinnerMarks.push(n.circle(h.x,h.y,u,{fill:o}))}else if("line"===g){s="major"===c.type&&null!==a.majorSize&&void 0!==a.majorSize?t._getScale(a.majorSize,"w",i/2):t._getScale(a.size,"w",i/2);var p=t._getScale(a.thickness,"w",i/2),_=t._getPointerPosition({x:i/2,y:i/2},d,l,t.rotation),m=t._getPointerPosition({x:i/2,y:i/2},d+s,l,t.rotation);t._spinnerMarks.push(n.line(_.x,_.y,m.x,m.y,{stroke:o,"stroke-width":p}))}}})}},_drawSpinnerMarks:function(r){var t=this;if(r){var a=t.renderer,n=t.widgetSize,i=r&&null!=r.colorRemaining?r.colorRemaining:"transparent";i=t._getColor(i),t._spinnerMarks=[];var o,s,l=r.type;l||(l="line");var g=t._getScale(r.offset,"w",n/2),d=t._spinnerMarksList;e.each(d,function(e,d){if(t.dragEndAngle-t.dragStartAngle!=360||e!=t.max)if(s=t.startAngle+t._calculateAngleFromValue(e,t.startAngle,t.endAngle,t.min,t.max),"circle"===l){var c=t._getScale(r.size,"w",n/2),u=t._getPointerPosition({x:n/2,y:n/2},g,s,t.rotation);t._spinnerMarks.push(a.circle(u.x,u.y,c,{fill:i}))}else if("line"===l){o="major"===d.type&&null!==r.majorSize&&void 0!==r.majorSize?t._getScale(r.majorSize,"w",n/2):t._getScale(r.size,"w",n/2);var h=t._getScale(r.thickness,"w",n/2),p=t._getPointerPosition({x:n/2,y:n/2},g,s,t.rotation),_=t._getPointerPosition({x:n/2,y:n/2},g+o,s,t.rotation);t._spinnerMarks.push(a.line(p.x,p.y,_.x,_.y,{stroke:i,"stroke-width":h}))}})}},_drawSpinner:function(){var e=this;if(e.spinner){var r=e.renderer,t=e.widgetSize;e.spinner.style||(e.spinner.style={fill:"#dfe3e9",stroke:"#dfe3e9"});var a,n,i=e._getColor(e.spinner.style.fill),o=e.spinner.style.stroke||"";a=n=t/2;var s=e._getScale(e.spinner.outerRadius,"w",t/2),l=e._getScale(e.spinner.innerRadius,"w",t/2),g=i.strokeWidth?i.strokeWidth:2;if(r.pieslice(a,n,l,s,360-e.endAngle,360-e.startAngle,0,{"stroke-width":g,fill:i,stroke:o}),e.spinner.marks){return void e._drawSpinnerMarks(e.spinner.marks)}}},_getColor:function(e){return e&&"object"==typeof e?this._getGradient(e.color,e.gradientType,e.gradientStops):e},_getGradient:function(e,r,t){return r&&null!=t&&"object"==typeof t&&("linear"===r?e=this.renderer._toLinearGradient(e,!0,t):"linearHorizontal"===r?e=this.renderer._toLinearGradient(e,!1,t):"radial"===r&&(e=this.renderer._toRadialGradient(e,t))),e},_isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_events:["slide","change"],_raiseEvent:function(r,t){var a=this._events[r],n=e.Event(a);return n.args=t,this.host.trigger(n)},_movePointers:function(){for(var e,r=this,t=0;t<r._pointers.length;t++)1!==r._pointers.length?(e=r.dragStartAngle+r._calculateAngleFromValue(r.value[t],r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[t]=r._movePointer(r._pointers[t],r.pointer[t],e,r.value[t])):(e=r.dragStartAngle+r._calculateAngleFromValue(r.value,r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[0]=r._movePointer(r._pointers[0],r.pointer,e,r.value))},_movePointer:function(r,t,a,n){var i,o=this,s=o.renderer,l=o.widgetSize,g=t.type;g||(g="circle");var d=o._getScale(t.offset,"w",l/2);if("circle"===g){var c=o._getPointerPosition({x:l/2,y:l/2},d,a,o.rotation);s.attr(r,{cx:c.x,cy:c.y}),e.jqx.browser.msie&&e.jqx.browser.version<9&&(e("#"+t.id).remove(),r=o._drawPointer(n,t))}else if("line"===g){i=o._getScale(t.size,"w",l/2);var u=o._getPointerPosition({x:l/2,y:l/2},d,a,o.rotation),h=o._getPointerPosition({x:l/2,y:l/2},d+i,a,o.rotation);s.attr(r,{x1:u.x,y1:u.y,x2:h.x,y2:h.y}),e.jqx.browser.msie&&e.jqx.browser.version<9&&(e("#"+t.id).remove(),r=o._drawPointer(n,t))}else if("arrow"===g){i=o._getScale(t.size,"w",l/2);var p=t.thickness,_=o._getPointerPosition({x:l/2,y:l/2},i,a,o.rotation),m=o._getPointerPosition({x:l/2,y:l/2},d,a,o.rotation),f=o._getPointerPosition({x:m.x,y:m.y},p/2,a-90,o.rotation),v=o._getPointerPosition({x:m.x,y:m.y},p/2,a+90,o.rotation),k="M "+_.x+","+_.y+" L "+f.x+","+f.y+" L "+v.x+","+v.y+" "+_.x+","+_.y;s.attr(r,{d:k}),e.jqx.browser.msie&&e.jqx.browser.version<9&&(e("#"+t.id).remove(),r=o._drawPointer(n,t))}else"arc"===g&&(e("#"+t.id).remove(),r=o._drawPointer(t));return o.progressBar&&r.parentNode.appendChild(r.parentNode.removeChild(r)),r},_getPointerPosition:function(r,t,a,n){return e.jqx.browser.msie&&e.jqx.browser.version<9?{x:parseInt(r.x+t*Math.sin(Math.PI/180*(a+90))),y:"clockwise"===n?parseInt(r.y+t*Math.sin(Math.PI/180*a)):parseInt(r.y-t*Math.sin(Math.PI/180*a))}:{x:r.x+t*Math.sin(Math.PI/180*(a+90)),y:"clockwise"===n?r.y+t*Math.sin(Math.PI/180*a):r.y-t*Math.sin(Math.PI/180*a)}},_getID:function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_decrement:function(){this._setValue(this.value-this.step,"mouse")},_increment:function(){this._setValue(this.value+this.step,"mouse")},_refresh:function(){var r=this;if(r.disabled&&r.host.addClass(r.toThemeProperty("jqx-fill-state-disabled")),r.renderer||(r._isVML=!1,r.host.empty(),r._initRenderer(r.host)),r.removeHandler(e(document),"mousemove.jqxKnob"+r.host[0].id),r.removeHandler(e(document),"blur.jqxKnob"+r.host[0].id),r.removeHandler(e(document),"mouseup.jqxKnob"+r.host[0].id),r.removeHandler(r.host,"wheel"),r.removeHandler(r.host,"mousedown"),r.host.empty(),r._initRenderer(r.host),r.renderer){r._steps=[];for(var t=0;t<=(r.max-r.min)/r.step;t++)r._steps.push(r.min+r.step*t);r._initValues(),r._render()}},_render:function(){var e=this;e._drawBackground(),e._drawDial(),e._drawMarks(),e._drawLabels(),e._drawSpinner(),e._drawProgressBars(),e._updateMarksColor(),e._updateSpinnerMarksColor(),e._drawPointers(),e._attatchPointerEventHandlers()},_setValue:function(r,t){var a=this,n=a.value;if(isNaN(r)&&(r=a.min),r>a.max?r=a.max:r<a.min&&(r=a.min),a.snapToStep)for(var i=a._steps,o=0;o<i.length;o++)if(r<i[o]){r=0===o?i[o]:i[o]-r<r-i[o-1]?i[o]:i[o-1];break}if(r!=n){if(e.isArray(a.value)){if(-1!=a._pointerGrabbedIndex){if(1==a._pointerGrabbedIndex){a.value[0];a.value[a._pointerGrabbedIndex]=r}if(0==a._pointerGrabbedIndex){a.value[1];a.value[a._pointerGrabbedIndex]=r}a.value[a._pointerGrabbedIndex]=r}}else a.value=r;a._updateProgressBarColor(),a._updateMarksColor(),a._updateSpinnerMarksColor();var s=a.dragStartAngle+a._calculateAngleFromValue(r,a.dragStartAngle,a.dragEndAngle,a.min,a.max);a._rotateSpinnerMarks(s),a._movePointers(),a._raiseEvent(1,{value:a.value,type:t})}},_updateMarksColor:function(){var r=this;if(r.marks&&(r.marks.colorProgress||r.marks.colorRemaining)){var t=r.renderer,a=[];e.each(r._marksList,function(e){r.endAngle-r.startAngle!=360||r.max,a.push(e)});for(var n=r._getColor(r.marks.colorProgress),i=r._getColor(r.marks.colorRemaining),o=r.value.length?r.value[0]:r.value,s=0;s<r._dialMarks.length;s++)a[s]>o?"circle"===r.marks.type?t.attr(r._dialMarks[s],{fill:i}):t.attr(r._dialMarks[s],{stroke:i}):"circle"===r.marks.type?t.attr(r._dialMarks[s],{fill:n}):t.attr(r._dialMarks[s],{stroke:n}),r.progressBar&&r.marks.drawAboveProgressBar&&r._dialMarks[s].parentNode.appendChild(r._dialMarks[s].parentNode.removeChild(r._dialMarks[s]))}},_updateSpinnerMarksColor:function(){var r=this;if(r.spinner&&r.spinner.marks&&r.spinner.marks&&(r.spinner.marks.colorProgress||r.spinner.marks.colorRemaining)){var t=r.renderer,a=[];e.each(r._spinnerMarksList,function(e){r.endAngle-r.startAngle==360&&e==r.max||a.push(e)});for(var n=r._getColor(r.spinner.marks.colorProgress),i=r._getColor(r.spinner.marks.colorRemaining),o=r.value.length?r.value[0]:r.value,s=0;s<r._spinnerMarks.length;s++)a[s]>o?"circle"===r.spinner.marks.type?t.attr(r._spinnerMarks[s],{fill:i}):t.attr(r._spinnerMarks[s],{stroke:i}):"circle"===r.spinner.marks.type?t.attr(r._spinnerMarks[s],{fill:n}):t.attr(r._spinnerMarks[s],{stroke:n})}},_updateProgressBarColor:function(){var e=this;e.progressBar&&e._drawProgressBars()},_validateProperties:function(){var e=this,r=function(e,r){if(e&&"string"==typeof e){var t=e;return e={fill:t,stroke:t}}return e||((e={}).fill=r,e.stroke=r),e&&e.fill&&!e.stroke&&(e.stroke=e.fill),e&&!e.fill&&e.stroke&&(e.fill=e.stroke),e&&!e.fill&&(e.fill=r),e&&!e.stroke&&(e.stroke=r),e};if(e.dial&&(e.dial.style=r(e.dial.style,"#dddddd")),e.style&&(e.style=r(e.style,"#dddddd")),e.progressBar&&(e.progressBar.style=r(e.progressBar.style,"transparent"),e.progressBar.background=r(e.progressBar.background,"transparent")),e.spinner&&(e.spinner.style=r(e.spinner.style,"transparent")),e.pointer&&(e.pointer.style=r(e.pointer.style,"transparent")),e.startAngle>=e.endAngle)throw new Error("jqxKnob: The end angle must be bigger than the start angle!");if(e.startAngle<0||e.startAngle>360)throw new Error("jqxKnob: Start angle must be between 0 and 360");if(e.endAngle>e.startAngle+360)throw new Error("jqxKnob: End angle must be between startAngle and startAngle + 360");if(e.dial&&e.dial.color&&"transparent"!==e.dial.color&&(!e.dial.outerRadius||!e.dial.innerRadius))throw new Error("jqxKnob: Dial options innerRadius and outerRadius need to be specified");if(e._isArray(e.pointer)||e._isArray(e.value)){if(!e._isArray(e.pointer))throw new Error("jqxKnob: If the value is an array, the pointer must also be an array.");if(!e._isArray(e.value))throw new Error("jqxKnob: If the pointer is an array, the value must also be an array.");if(e.pointer.length!==e.value.length)throw new Error("jqxKnob: The pointer and value array sizes must match.");if(e.progressBar&&(!e._isArray(e.progressBar.style)||e.progressBar.style.length!==e.pointer.length))throw new Error("jqxKnob: progressBar color must be an array with the same number of elements as the pointer and value.")}return!0}})}(jqxBaseFramework);

