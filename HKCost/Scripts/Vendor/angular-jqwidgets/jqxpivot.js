/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(t){t.jqx.pivot=function(e,s){var i=this;i.dataAdapter=e,i.rows=[],i.columns=[],i.values=[],i.filters=[],i.pivotValuesOnRows=!1,i.totals={rows:{subtotals:!1,grandtotals:!1},columns:{subtotals:!1,grandtotals:!1}},i.localization=null,i.aggregationFunctions={},i._initSettings={},t.extend(i.aggregationFunctions,i._defaultFunctions),s&&(i._initSettings=s,i.columns=s.columns||[],i.rows=s.rows||[],i.values=s.values||[],i.filters=s.filters||[],i.pivotValuesOnRows=s.pivotValuesOnRows||!1,i.totals=s.totals,i.localization=s.localization,t.extend(i.aggregationFunctions,s.customAggregationFunctions||{})),0===i.rows.length&&i.columns.length>0&&!1===i.pivotValuesOnRows&&(i.pivotValuesOnRows=!0),0===i.columns.length&&i.rows.length>0&&!1!==i.pivotValuesOnRows&&(i.pivotValuesOnRows=!1)},t.jqx.pivot.prototype={_clear:function(){this._pivot={rows:[],columns:[],values:[],groups:[],filters:[]},this._rowsHierarchy={items:{},valueItems:{}},this._columnsHierarchy={items:{},valueItems:{}},this._hashPivotItemsToTableRows={},this._hashRefItems={},this._hierarchyItemKeyIndex=0},_contains:function(t,e,s){if(!t)return!1;for(var i=0;i<t.length;i++)if(s?t[i]===e:t[i].dataField===e)return!0;return!1},_getFieldIndex:function(t,e){if(!t)return-1;for(var s=0;s<t.length&&t[s].name!==e;s++);return s===t.length?-1:s},dataBind:function(){if(this._clear(),this.dataAdapter){this.dataAdapter.dataBind();var t=["columns","rows","values","filters"];for(var e in t)for(var s=t[e],i=0;i<this[s].length;i++){var a=this[s][i];if(a){var r=!1;if("values"!==s&&"filters"!==s){for(var o in t){var n=t[o];if(s===n&&(r=this._contains(this._pivot[n],a.dataField)))break}if(r)continue}this._pivot[s].push(a)}}this._createPivot()}},_isRowSkipped:function(e){for(var s in this.filters){var i=this.filters[s];if(t.isFunction(i.filterFunction)&&(i.dataField&&void 0!==e[i.dataField]&&i.filterFunction(e[i.dataField])))return!0}return!1},getItemsFilterStatus:function(e){for(var s={},i=this.dataAdapter.records,a=0;a<i.length;a++){var r=i[a][e];if(!s[r])for(var o in this.filters){var n=this.filters[o];if(n.dataField===e){var d=t.isFunction(n.filterFunction)&&n.filterFunction(r);s[r]=d}}}return s},_createPivot:function(){if(this._pivot.values.length>0&&(this._pivot.rows.length>0||this._pivot.columns.length>0)){var t={},e={};this.hashSummaryPrefixes={};for(var s=this.dataAdapter.records,i=0;i<s.length;i++){var a=s[i];if(!this._isRowSkipped(a)){var r=this.dataAdapter._source.datafields;this._appendPivotHierarchy(i,t,this._rowsHierarchy,r,this._pivot.rows,this.pivotValuesOnRows?this._pivot.values:null),this._appendPivotHierarchy(i,e,this._columnsHierarchy,r,this._pivot.columns,this.pivotValuesOnRows?null:this._pivot.values)}}this._setupTotals(this._columnsHierarchy),this._setupTotals(this._rowsHierarchy)}},_setupTotals:function(t){if(this.totals){var e=t===this._columnsHierarchy?this.totals.columns:this.totals.rows;!e||!0!==e.subtotals&&!0!==e.grandtotals||(this._addTotals(t.items,!1,e),t===this._columnsHierarchy==!this.pivotValuesOnRows&&this._addvalueItemsToTotals(t.items))}},_addvalueItemsToTotals:function(t){for(var e in t){var s=t[e];if(s.isTotal){if(!this._hashRefItems[s.key])continue;refItems=this._hashRefItems[s.key].refItems;for(var i=[],e=0;e<refItems.length;e++){for(var a=this._hashPivotItemsToTableRows[refItems[e].key],r=0;r<a.length;r++)i.push(a[r]);if(0===e){s.valueItems={};for(var o in refItems[e].valueItems){var n=refItems[e].valueItems[o],d={text:n.text,boundField:n.boundField,isTotal:!0,key:this._hierarchyItemKeyIndex++};s.valueItems[o]=d}}}i.sort(function(t,e){return t-e});for(var o in s.valueItems)this._hashPivotItemsToTableRows[s.valueItems[o].key]=i;delete this._hashRefItems[s.key]}else this._addvalueItemsToTotals(s.items)}},_clearTotals:function(t){for(var e in t){var s=t[e];s.isTotal?delete t[s]:this._clearTotals(t[e].items)}},_addTotals:function(e,s,i){if(void 0!==e){this._clearTotals(e);var a=[],r=0;for(var o in e){var n=e[o];!0===i.subtotals&&this._addTotals(n.items,!0,i),a.push(n),r++}if(0!==r&&(s||1==i.grandtotals)){var d="_"+(s?"SubTotal":"Total")+"_",y=s?"SubTotal":"Total",l=this.localization;l&&(y=s?t.jqx.getByPriority([l.subtotalstring,l.SubTotalString,y]):t.jqx.getByPriority([l.grandtotalstring,l.GrandTotalString,y]));for(var _=this._hierarchyItemKeyIndex++,u=e[d]={text:y,key:_},h=[],o=0;o<a.length;o++)for(var M=0;M<this._hashPivotItemsToTableRows[a[o].key].length;M++)h.push(this._hashPivotItemsToTableRows[a[o].key][M]);this._hashRefItems[_]={item:u,refItems:a},this._hashPivotItemsToTableRows[_]=h.sort(function(t,e){return t-e}),u.isTotal=!0}}},_appendPivotHierarchy:function(t,e,s,i,a,r){var o=[],n="",d=this.dataAdapter.records[t];if(!this._getBoundFieldsValues(d,a,o))return!1;n.substring(0,n.length);var y=null;if(0==o.length&&null!=r)return this._attachValueFieldAsSummaryItem(t,e,y,n,r),!0;for(var l=0;l<o.length;l++){n+="!_$%^&_";var _=o[l];e[n+=_]?y=e[n]:(null==y?y=s.items[_]={text:_}:(this._addSourceRecordToPivotItem(y.key,t),y.items||(y.items={}),y=y.items[_]={text:_}),this._applyBoundFieldProperties(a[l],y),e[n]=y,y.key=this._hierarchyItemKeyIndex++),null==r||0==r.length?this._addSourceRecordToPivotItem(y.key,t):(this._addSourceRecordToPivotItem(y.key,t),null!=r&&this._attachValueFieldAsSummaryItem(t,e,y,n,r))}return!0},_attachValueFieldAsSummaryItem:function(t,e,s,i,a){for(var r=0;r<a.length;r++){var o=a[r],n=null,d=i+o.dataField+r;e[d]?n=e[d]:(null!=s?(s.valueItems||(s.valueItems={}),n=s.valueItems[o.dataField+r]={text:o.text||o.dataField}):n=(this.pivotValuesOnRows?this._rowsHierarchy:this._columnsHierarchy).valueItems[o.dataField+r]={text:o.text||o.dataField},e[d]=n,n.key=this._hierarchyItemKeyIndex++),this._applyBoundFieldProperties(o,n),this._addSourceRecordToPivotItem(n.key,t)}},_applyBoundFieldProperties:function(t,e){e.boundField=t,t.text&&(e.boundFieldText=t.text)},_addSourceRecordToPivotItem:function(t,e){var s=null;(s=this._hashPivotItemsToTableRows[t]?this._hashPivotItemsToTableRows[t]:this._hashPivotItemsToTableRows[t]=[]).length>0&&s[s.length-1]==e||s.push(e)},_sortedArrayIntersectAndDedup:function(t,e){for(var s=[],i=0,a=0;i<t.length&&a<e.length;)t[i]<e[a]?i++:t[i]>e[a]?a++:(0!=s.length&&s[s.length-1]==t[i]||s.push(t[i]),i++,a++);return s},_getBoundFieldValue:function(t,e){return null==e?null:t[e]},_getBoundFieldsValues:function(t,e,s){for(var i=0;i<e.length;i++){var a=t[e[i].dataField];void 0!==a&&s.push(a)}return!0},_internalDrillThroughPivotCell:function(t,e,s){var i=this._hashPivotItemsToTableRows[t]||[],a=this._hashPivotItemsToTableRows[e]||[];return 0==i.length||0==a.length?[]:this._sortedArrayIntersectAndDedup(i,a)},drillThroughPivotCell:function(t,e){if(!t||void 0===t.key||!e||void 0===e.key)return[];var s=t.isTotal||e.isTotal;return this._internalDrillThroughPivotCell(t.key,e.key,s)},getFunctions:function(){return this.aggregationFunctions},_defaultFunctions:{count:function(t){return t.length},sum:function(t){for(var e=0,s=0;s<t.length;s++)e+=t[s];return e},min:function(t){for(var e=1/0,s=0;s<t.length;s++)t[s]<e&&(e=t[s]);return e},max:function(t){for(var e=-1/0,s=0;s<t.length;s++)t[s]>e&&(e=t[s]);return e},average:function(e){var s=t.jqx.pivot.prototype._defaultFunctions.count(e);return 0==s?0:t.jqx.pivot.prototype._defaultFunctions.sum(e)/s},product:function(t){for(var e=0,s=0;s<t.length;s++)0==s?e=t[s]:e*=t[s];return e}},getCellValue:function(t,e){var s=this._getCellValueFromDataSource(t,e);if(isNaN(s))return"";var i=this.pivotValuesOnRows?t.boundField:e.boundField;return{value:s,formattedValue:this._formatValue(s,i.formatSettings,i.formatFunction)}},getCellFormatSettings:function(t,e){var s=this.pivotValuesOnRows?t.boundField:e.boundField;if(s)return s.formatSettings},_getCellValueFromDataSource:function(t,e){if(void 0==t)throw"Invalid rowItem";if(void 0==e)throw"Invalid columnItem";var s=t.isTotal||e.isTotal,i=this._internalDrillThroughPivotCell(t.key,e.key,s);if(0==i.length)return"";var a=this.pivotValuesOnRows?t.boundField:e.boundField;if(null!=a){var r=a.function||"count";"String"==typeof r&&(r=r.toLowerCase());try{for(var o=[],n=0;n<i.length;n++){var d=i[n],y=this.dataAdapter.records[d],l=this._getBoundFieldValue(y,a.dataField);o.push(parseFloat(l))}if("string"==typeof r&&(r=this.aggregationFunctions[r]),"function"==typeof r)return r(o)}catch(t){return NaN}return NaN}},_formatValue:function(e,s,i){if(void 0==e)return"";if(this._isObject(e)&&!this._isDate(e)&&!i)return"";if(i){if(!t.isFunction(i))return e.toString();try{return i(e)}catch(t){return t.message}}return this._isNumber(e)?this._formatNumber(e,s):this._isDate(e)?this._formatDate(e,s):s?(s.prefix||"")+e.toString()+(s.sufix||""):e.toString()},_isNumberAsString:function(e){if("string"!=typeof e)return!1;e=t.trim(e);for(var s=0;s<e.length;s++){var i=e.charAt(s);if(!(i>="0"&&i<="9"||","==i||"."==i)&&(("-"!=i||0!=s)&&!("("==i&&0==s||")"==i&&s==e.length-1)))return!1}return!0},_castAsDate:function(e,s){if(e instanceof Date&&!isNaN(e))return e;if("string"==typeof e){var i;if(s&&(i=t.jqx.dataFormat.parsedate(e,s),this._isDate(i)))return i;if(this._autoDateFormats){for(var a=0;a<this._autoDateFormats.length;a++)if(i=t.jqx.dataFormat.parsedate(e,this._autoDateFormats[a]),this._isDate(i))return i}else this._autoDateFormats=[];var r=this._detectDateFormat(e);return r&&(i=t.jqx.dataFormat.parsedate(e,r),this._isDate(i))?(this._autoDateFormats.push(r),i):(i=new Date(e),this._isDate(i)&&-1==e.indexOf(":")&&i.setHours(0,0,0,0),i)}},_castAsNumber:function(t){if(t instanceof Date&&!isNaN(t))return t.valueOf();if("string"==typeof t)if(this._isNumber(t))t=parseFloat(t);else if(!/[a-zA-Z]/.test(t)){var e=new Date(t);void 0!=e&&(t=e.valueOf())}return t},_isNumber:function(t){return"string"==typeof t&&this._isNumberAsString(t)&&(t=parseFloat(t)),"number"==typeof t&&isFinite(t)},_isDate:function(t){return t instanceof Date&&!isNaN(t.getDate())},_isBoolean:function(t){return"boolean"==typeof t},_isObject:function(e){return e&&("object"==typeof e||t.isFunction(e))||!1},_formatDate:function(e,s){var i=e.toString();return s&&(s.dateFormat&&(i=t.jqx.dataFormat.formatDate(e,s.dateFormat)),i=(s.prefix||"")+i+(s.sufix||"")),i},_formatNumber:function(t,e){if(!this._isNumber(t))return t;e=e||{};var s=".",i="",a=this;a.localization&&(s=a.localization.decimalSeparator||a.localization.decimalseparator||s,i=a.localization.thousandsSeparator||a.localization.thousandsseparator||i),e.decimalSeparator&&(s=e.decimalSeparator),e.thousandsSeparator&&(i=e.thousandsSeparator);var r=e.prefix||"",o=e.sufix||"",n=e.decimalPlaces;isNaN(n)&&(n=this._getDecimalPlaces([t],void 0,3));var d=e.negativeWithBrackets||!1,y=t<0;y&&d&&(t*=-1);var l,_=t.toString(),u=Math.pow(10,n);if(_=(Math.round(t*u)/u).toString(),isNaN(_)&&(_=""),l=_.lastIndexOf("."),n>0)for(l<0?l=(_+=s).length-1:"."!==s&&(_=_.replace(".",s));_.length-1-l<n;)_+="0";l=(l=_.lastIndexOf(s))>-1?l:_.length;for(var h=_.substring(l),M=0,m=l;m>0;m--,M++)M%3==0&&m!==l&&(!y||m>1||y&&d)&&(h=i+h),h=_.charAt(m-1)+h;return _=h,y&&d&&(_="("+_+")"),r+_+o},_getDecimalPlaces:function(t,e,s){var i=0;isNaN(s)&&(s=10);for(var a=0;a<t.length;a++){var r=void 0===e?t[a]:t[a][e];if(!isNaN(r)){for(var o=r.toString(),n=0;n<o.length;n++)if((o[n]<"0"||o[n]>"9")&&(i=o.length-(n+1))>=0)return Math.min(i,s);for(i>0&&(r*=Math.pow(10,i));Math.round(r)!=r&&i<s;)i++,r*=10}}return i},_defaultNumberFormat:{prefix:"",sufix:"",decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,negativeWithBrackets:!1},_detectDateFormat:function(e,s){var i={en_US_d:"M/d/yyyy",en_US_D:"dddd, MMMM dd, yyyy",en_US_t:"h:mm tt",en_US_T:"h:mm:ss tt",en_US_f:"dddd, MMMM dd, yyyy h:mm tt",en_US_F:"dddd, MMMM dd, yyyy h:mm:ss tt",en_US_M:"MMMM dd",en_US_Y:"yyyy MMMM",en_US_S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",en_CA_d:"dd/MM/yyyy",en_CA_D:"MMMM-dd-yy",en_CA_f:"MMMM-dd-yy h:mm tt",en_CA_F:"MMMM-dd-yy h:mm:ss tt",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",de_DE_d:"dd.MM.yyyy",de_DE_D:"dddd, d. MMMM yyyy",de_DE_t:"HH:mm",de_DE_T:"HH:mm:ss",de_DE_f:"dddd, d. MMMM yyyy HH:mm",de_DE_F:"dddd, d. MMMM yyyy HH:mm:ss",de_DE_M:"dd MMMM",de_DE_Y:"MMMM yyyy",fr_FR_d:"dd/MM/yyyy",fr_FR_D:"dddd d MMMM yyyy",fr_FR_t:"HH:mm",fr_FR_T:"HH:mm:ss",fr_FR_f:"dddd d MMMM yyyy HH:mm",fr_FR_F:"dddd d MMMM yyyy HH:mm:ss",fr_FR_M:"d MMMM",fr_FR_Y:"MMMM yyyy",it_IT_d:"dd/MM/yyyy",it_IT_D:"dddd d MMMM yyyy",it_IT_t:"HH:mm",it_IT_T:"HH:mm:ss",it_IT_f:"dddd d MMMM yyyy HH:mm",it_IT_F:"dddd d MMMM yyyy HH:mm:ss",it_IT_M:"dd MMMM",it_IT_Y:"MMMM yyyy",ru_RU_d:"dd.MM.yyyy",ru_RU_D:"d MMMM yyyy '?.'",ru_RU_t:"H:mm",ru_RU_T:"H:mm:ss",ru_RU_f:"d MMMM yyyy '?.' H:mm",ru_RU_F:"d MMMM yyyy '?.' H:mm:ss",ru_RU_Y:"MMMM yyyy",cs_CZ_d:"d.M.yyyy",cs_CZ_D:"d. MMMM yyyy",cs_CZ_t:"H:mm",cs_CZ_T:"H:mm:ss",cs_CZ_f:"d. MMMM yyyy H:mm",cs_CZ_F:"d. MMMM yyyy H:mm:ss",cs_CZ_M:"dd MMMM",cs_CZ_Y:"MMMM yyyy",he_IL_d:"dd MMMM yyyy",he_IL_D:"dddd dd MMMM yyyy",he_IL_t:"HH:mm",he_IL_T:"HH:mm:ss",he_IL_f:"dddd dd MMMM yyyy HH:mm",he_IL_F:"dddd dd MMMM yyyy HH:mm:ss",he_IL_M:"dd MMMM",he_IL_Y:"MMMM yyyy",hr_HR_d:"d.M.yyyy.",hr_HR_D:"d. MMMM yyyy.",hr_HR_t:"H:mm",hr_HR_T:"H:mm:ss",hr_HR_f:"d. MMMM yyyy. H:mm",hr_HR_F:"d. MMMM yyyy. H:mm:ss",hr_HR_M:"d. MMMM",hu_HU_d:"yyyy.MM.dd.",hu_HU_D:"yyyy. MMMM d.",hu_HU_t:"H:mm",hu_HU_T:"H:mm:ss",hu_HU_f:"yyyy. MMMM d. H:mm",hu_HU_F:"yyyy. MMMM d. H:mm:ss",hu_HU_M:"MMMM d.",hu_HU_Y:"yyyy. MMMM",jp_JP_d:"gg y/M/d",jp_JP_D:"gg y'?'M'?'d'?'",jp_JP_t:"H:mm",jp_JP_T:"H:mm:ss",jp_JP_f:"gg y'?'M'?'d'?' H:mm",jp_JP_F:"gg y'?'M'?'d'?' H:mm:ss",jp_JP_M:"M'?'d'?'",jp_JP_Y:"gg y'?'M'?'",lt_LT_d:"yyyy.MM.dd",lt_LT_D:"yyyy 'm.' MMMM d 'd.'",lt_LT_t:"HH:mm",lt_LT_T:"HH:mm:ss",lt_LT_f:"yyyy 'm.' MMMM d 'd.' HH:mm",lt_LT_F:"yyyy 'm.' MMMM d 'd.' HH:mm:ss",lt_LT_M:"MMMM d 'd.'",lt_LT_Y:"yyyy 'm.' MMMM",sa_IN_d:"dd-MM-yyyy",sa_IN_D:"dd MMMM yyyy dddd",sa_IN_t:"HH:mm",sa_IN_T:"HH:mm:ss",sa_IN_f:"dd MMMM yyyy dddd HH:mm",sa_IN_F:"dd MMMM yyyy dddd HH:mm:ss",sa_IN_M:"dd MMMM",basic_y:"yyyy",basic_ym:"yyyy-MM",basic_d:"yyyy-MM-dd",basic_dhm:"yyyy-MM-dd hh:mm",basic_bhms:"yyyy-MM-dd hh:mm:ss",basic2_ym:"MM-yyyy",basic2_d:"MM-dd-yyyy",basic2_dhm:"MM-dd-yyyy hh:mm",basic2_dhms:"MM-dd-yyyy hh:mm:ss",basic3_ym:"yyyy/MM",basic3_d:"yyyy/MM/dd",basic3_dhm:"yyyy/MM/dd hh:mm",basic3_bhms:"yyyy/MM/dd hh:mm:ss",basic4_ym:"MM/yyyy",basic4_d:"MM/dd/yyyy",basic4_dhm:"MM/dd/yyyy hh:mm",basic4_dhms:"MM/dd/yyyy hh:mm:ss"};s&&(i=t.extend({},i,s));var a=[];t.isArray(e)?a=e:a.push(e);for(var r in i)i[r]={format:i[r],count:0};for(var o=0;o<a.length;o++)if(value=a[o],null!=value&&void 0!=value)for(var r in i)null!=t.jqx.dataFormat.parsedate(value,i[r].format)&&i[r].count++;var n={key:void 0,count:0};for(var r in i)i[r].count>n.count&&(n.key=r,n.count=i[r].count);return n.key?i[n.key].format:""}}}(jqxBaseFramework);

