/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(e){e.jqx.jqxWidget("jqxTree","",{}),e.extend(e.jqx._jqxTree.prototype,{defineInstance:function(){var t={items:new Array,width:null,height:null,easing:"easeInOutCirc",animationShowDuration:"fast",animationHideDuration:"fast",treeElements:new Array,disabled:!1,itemsMember:"",displayMember:"",valueMember:"",enableHover:!0,keyboardNavigation:!0,enableKeyboardNavigation:!0,toggleMode:"dblclick",source:null,checkboxes:!1,checkSize:13,toggleIndicatorSize:16,hasThreeStates:!1,selectedItem:null,touchMode:"auto",allowDrag:!0,allowDrop:!0,searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,animationHideDelay:0,submitCheckedItems:!1,dragStart:null,dragEnd:null,rtl:!1,dropAction:"default",events:["expand","collapse","select","initialized","added","removed","checkChange","dragEnd","dragStart","itemClick"],aria:{"aria-activedescendant":{name:"getActiveDescendant",type:"string"},"aria-disabled":{name:"disabled",type:"boolean"}}};return this===e.jqx._jqxTree.prototype?t:(e.extend(!0,this,t),t)},createInstance:function(t){var i=this;if(this.host.attr("role","tree"),this.host.attr("data-role","treeview"),this.enableKeyboardNavigation=this.keyboardNavigation,this.propertyChangeMap.disabled=function(t,s,r,n){i.disabled?i.host.addClass(i.toThemeProperty("jqx-tree-disabled")):i.host.removeClass(i.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(i,"aria-disabled",n)},null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("%")&&this.host.height(this.height),this.host.attr("tabindex")||this.host.attr("tabIndex",1),this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-tree-disabled")),e.jqx.aria(this,"aria-disabled",!0)),this.host.jqxDragDrop&&jqxTreeDragDrop(),this.originalInnerHTML=this.element.innerHTML,this.createdTree=!1,this.element.innerHTML.indexOf("UL")&&(r=this.host.find("ul:first")).length>0&&(this.createTree(r[0]),this.createdTree=!0),null!=this.source){var s=this.loadItems(this.source);this.element.innerHTML=s,(r=this.host.find("ul:first")).length>0&&(this.createTree(r[0]),this.createdTree=!0)}if(this._itemslength=this.items.length,!this.createdTree&&0==this.host.find("ul").length){this.host.append(e("<ul></ul>"));var r=this.host.find("ul:first");r.length>0&&(this.createTree(r[0]),this.createdTree=!0),this.createdTree=!0}1==this.createdTree&&(this._render(),this._handleKeys()),this._updateCheckLayout()},checkItems:function(t,i){var s=this;if(null!=t){var r=0,n=!1,l=0;if(l=(h=e(t.element).find("li")).length,e.each(h,function(e){var t=s.itemMapping["id"+this.id].item;0!=t.checked&&(null==t.checked&&(n=!0),r++)}),t!=i)r==l?this.checkItem(t.element,!0,"tree"):r>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree");else{var a=i.checked,h=e(i.element).find("li");e.each(h,function(){s.itemMapping["id"+this.id].item;s.checkItem(this,a,"tree")})}this.checkItems(this._parentItem(t),i)}else{var a=i.checked,h=e(i.element).find("li");e.each(h,function(){s.itemMapping["id"+this.id].item;s.checkItem(this,a,"tree")})}},_getMatches:function(t,i){if(void 0==t||0==t.length)return-1;for(var s=this.items,r=new Array,n=0;n<s.length;n++)this._isVisible(s[n])&&!s[n].disabled&&r.push(s[n]);s=r,void 0!=i&&(s=s.slice(i));var l=new Array;return e.each(s,function(i){var s=this.label;s||(s=""),e.jqx.string.startsWithIgnoreCase(s.toString(),t)&&l.push({id:this.id,element:this.element})}),l},_handleKeys:function(){var t=this;this.addHandler(this.host,"keydown",function(i){var s=i.keyCode;if((t.keyboardNavigation||t.enableKeyboardNavigation)&&null!=t.selectedItem){var r=t.selectedItem.element;if(t.incrementalSearch&&!(s>=33&&s<=40)){t._searchString||(t._searchString=""),(8==s||46==s)&&t._searchString.length>=1&&(t._searchString=t._searchString.substr(0,t._searchString.length-1));var n=String.fromCharCode(s),l=!isNaN(parseInt(n));if(s>=65&&s<=97||l||8==s||32==s||46==s){if(i.shiftKey||(n=n.toLocaleLowerCase()),8!=s&&32!=s&&46!=s&&(t._searchString.length>0&&t._searchString.substr(0,1)==n||(t._searchString+=n)),32==s&&(t._searchString+=" "),t._searchTime=new Date,m=t.selectedItem){for(var a=m.id,h=-1,o=0;o<t.items.length;o++)if(t.items[o].id==a){h=o+1;break}if(0==(d=t._getMatches(t._searchString,h)).length||d.length>0&&d[0].id==a)d=t._getMatches(t._searchString)}else var d=t._getMatches(t._searchString);if(d.length>0){var m=t.selectedItem;t.selectedItem&&t.selectedItem.id!=d[0].id&&(t.clearSelection(),t.selectItem(d[0].element,"keyboard")),t._lastSearchString=t._searchString}}void 0!=t._searchTimer&&clearTimeout(t._searchTimer),27!=s&&13!=s||(t._searchString="",t._lastSearchString=""),t._searchTimer=setTimeout(function(){t._searchString="",t._lastSearchString=""},500)}switch(s){case 32:if(t.checkboxes){t.fromKey=!0;var c=e(t.selectedItem.checkBoxElement).jqxCheckBox("checked");return t.checkItem(t.selectedItem.element,!c,"tree"),t.hasThreeStates&&t.checkItems(t.selectedItem,t.selectedItem),!1}return!0;case 33:for(var u=t._getItemsOnPage(),p=t.selectedItem,o=0;o<u;o++)p=t._prevVisibleItem(p);return null!=p?(t.selectItem(p.element,"keyboard"),t.ensureVisible(p.element)):(t.selectItem(t._firstItem().element,"keyboard"),t.ensureVisible(t._firstItem().element)),!1;case 34:for(var u=t._getItemsOnPage(),v=t.selectedItem,o=0;o<u;o++)v=t._nextVisibleItem(v);return null!=v?(t.selectItem(v.element,"keyboard"),t.ensureVisible(v.element)):(t.selectItem(t._lastItem().element,"keyboard"),t.ensureVisible(t._lastItem().element)),!1;case 37:case 39:if(37==s&&!t.rtl||39==s&&t.rtl)if(t.selectedItem.hasItems&&t.selectedItem.isExpanded)t.collapseItem(r);else{var f=t._parentItem(t.selectedItem);null!=f&&(t.selectItem(f.element,"keyboard"),t.ensureVisible(f.element))}return(39==s&&!t.rtl||37==s&&t.rtl)&&t.selectedItem.hasItems&&(t.selectedItem.isExpanded?null!=(v=t._nextVisibleItem(t.selectedItem))&&(t.selectItem(v.element,"keyboard"),t.ensureVisible(v.element)):t.expandItem(r)),!1;case 13:return t.selectedItem.hasItems&&(t.selectedItem.isExpanded?t.collapseItem(r):t.expandItem(r)),!1;case 36:return t.selectItem(t._firstItem().element,"keyboard"),t.ensureVisible(t._firstItem().element),!1;case 35:return t.selectItem(t._lastItem().element,"keyboard"),t.ensureVisible(t._lastItem().element),!1;case 38:return null!=(p=t._prevVisibleItem(t.selectedItem))&&(t.selectItem(p.element,"keyboard"),t.ensureVisible(p.element)),!1;case 40:return null!=(v=t._nextVisibleItem(t.selectedItem))&&(t.selectItem(v.element,"keyboard"),t.ensureVisible(v.element)),!1}}})},_firstItem:function(){var t=null,s=this,r=this.host.find("ul:first"),n=e(r).find("li");for(i=0;i<=n.length-1;i++){var l=n[i];if(t=this.itemMapping["id"+l.id].item,s._isVisible(t))return t}return null},_lastItem:function(){var t=null,s=this,r=this.host.find("ul:first"),n=e(r).find("li");for(i=n.length-1;i>=0;i--){var l=n[i];if(t=this.itemMapping["id"+l.id].item,s._isVisible(t))return t}return null},_parentItem:function(t){if(null==t||void 0==t)return null;var i=t.parentElement;if(!i)return null;var s=null;return e.each(this.items,function(){if(this.element==i)return s=this,!1}),s},_nextVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.nextItem,this._isVisible(t)&&!t.disabled)return t;return null},_prevVisibleItem:function(e){if(null==e||void 0==e)return null;for(var t=e;null!=t;)if(t=t.prevItem,this._isVisible(t)&&!t.disabled)return t;return null},_isVisible:function(e){if(null==e||void 0==e)return!1;if(!this._isElementVisible(e.element))return!1;var t=this._parentItem(e);if(null==t)return!0;if(null!=t){if(!this._isElementVisible(t.element))return!1;if(!t.isExpanded)return!1;for(;null!=t;){if(null!=(t=this._parentItem(t))&&!this._isElementVisible(t.element))return!1;if(null!=t&&!t.isExpanded)return!1}}return!0},_getItemsOnPage:function(){var t=0,i=(this.panel.jqxPanel("getVScrollPosition"),parseInt(this.host.height())),s=0,r=this._firstItem();if(parseInt(e(r.element).height())>0)for(;s<=i;)s+=parseInt(e(r.element).outerHeight()),t++;return t},_isElementVisible:function(t){return null!=t&&("none"!=e(t).css("display")&&"hidden"!=e(t).css("visibility"))},refresh:function(t){if(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height),this.panel){if(null!=this.width&&-1!=this.width.toString().indexOf("%")){i=this;this.panel.jqxPanel("width","100%"),i.removeHandler(e(window),"resize.jqxtree"+i.element.id),i.addHandler(e(window),"resize.jqxtree"+i.element.id,function(){i._calculateWidth()})}else this.panel.jqxPanel("width",this.host.width());this.panel.jqxPanel("_arrange")}if(this._calculateWidth(),e.jqx.isHidden(this.host)){var i=this;this._hiddenTimer&&clearInterval(this._hiddenTimer),this._hiddenTimer=setInterval(function(){e.jqx.isHidden(i.host)||(clearInterval(i._hiddenTimer),i._calculateWidth())},100)}1!=t&&this.checkboxes&&this._updateCheckLayout(null)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},loadItems:function(t){if(null!=t){var i=this;this.items=new Array;var s="<ul>";return e.map(t,function(e){if(void 0==e)return null;s+=i._parseItem(e)}),s+="</ul>"}},_parseItem:function(e){var t="";if(void 0==e)return null;var i=e.label,s=e.value;!e.label&&e.html&&(i=e.html),void 0!=this.displayMember&&""!=this.displayMember&&(i=e[this.displayMember]),void 0!=this.valueMember&&""!=this.valueMember&&(s=e[this.valueMember]),i||(i="Item"),"string"==typeof e&&(i=e);var r=!1;void 0!=e.expanded&&e.expanded&&(r=!0);var n=!1;void 0!=e.locked&&e.locked&&(n=!0);var l=!1;void 0!=e.selected&&e.selected&&(l=!0);var a=!1;void 0!=e.disabled&&e.disabled&&(a=!0);var h=!1;void 0!=e.checked&&e.checked&&(h=!0);var o=e.icon,d=e.iconsize;t+="<li",r&&(t+=' item-expanded="true" '),n&&(t+=' item-locked="true" '),a&&(t+=' item-disabled="true" '),l&&(t+=' item-selected="true" '),d&&(t+=' item-iconsize="'+e.iconsize+'" '),null!=o&&void 0!=o&&(t+=' item-icon="'+o+'" '),e.label&&!e.html&&(t+=' item-label="'+i+'" '),null!=s&&(t+=' item-value="'+s+'" '),void 0!=e.checked&&(t+=' item-checked="'+h+'" ');var m="";return void 0!=e.id?t+=' id="'+(m=e.id)+'" ':t+=' id="'+(m=this.createID())+'" ',t+=">"+i,e.items?t+=this.loadItems(e.items):void 0!=this.itemsMember&&""!=this.itemsMember&&e[this.itemsMember]&&(t+=this.loadItems(e[this.itemsMember])),this._valueList||(this._valueList=new Array),this._valueList[m]=e.value,t+="</li>"},ensureVisible:function(t){if(null!=t&&void 0!=t&&this.panel){var i=this.panel.jqxPanel("getVScrollPosition"),s=this.panel.jqxPanel("getHScrollPosition"),r=parseInt(this.host.height()),n=e(t).position().top;(n<=i||n>=r+i)&&this.panel.jqxPanel("scrollTo",s,n-r+e(t).outerHeight())}},_syncItems:function(t){this._visibleItems=new Array;var i=this;e.each(t,function(){var t=e(this);if("none"!=t.css("display")){var s=t.outerHeight();if(t.height()>0){var r=parseInt(t.offset().top);i._visibleItems[i._visibleItems.length]={element:this,top:r,height:s,bottom:r+s}}}})},hitTest:function(t,i){var s=this,r=null,n=this.host.find(".jqx-item");if(this._syncItems(n),s._visibleItems){var l=parseInt(s.host.offset().left),a=s.host.outerWidth();e.each(s._visibleItems,function(n){if(t>=l&&t<l+a&&this.top+5<i&&i<this.top+this.height){var h=e(this.element).parents("li:first");if(h.length>0&&null!=(r=s.getItem(h[0])))return r.height=this.height,r.top=this.top,!1}})}return r},addBefore:function(e,t,i){return this.addBeforeAfter(e,t,!0,i)},addAfter:function(e,t,i){return this.addBeforeAfter(e,t,!1,i)},addBeforeAfter:function(t,i,s,r){var n=this,l=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?l=t:l[0]=t;var a="",h=this;e.each(l,function(){a+=h._parseItem(this)});var o=e(a);if(n.element.innerHTML.indexOf("UL"))var d=n.host.find("ul:first");void 0==i&&null==i?d.append(o):s?e(i).before(o):e(i).after(o);for(var m=o,c=0;c<m.length;c++){this._createItem(m[c]);var u=e(m[c]).find("li");if(u.length>0)for(var p=0;p<u.length;p++)this._createItem(u[p])}var v=function(t){h._refreshMapping(!1),h._updateItemsNavigation(),t&&h.allowDrag&&h._enableDragDrop&&h._enableDragDrop(),null!=h.selectedItem&&(e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-fill-state-pressed")),e(h.selectedItem.titleElement).addClass(h.toThemeProperty("jqx-tree-item-selected")))};if(0==r)return v(!0),void this._raiseEvent("4",{items:this.getItems()});v(!1),h._render(),this._raiseEvent("4",{items:this.getItems()}),h.checkboxes&&h._updateCheckLayout(null)},addTo:function(t,i,s){var r=this,n=new Array;i&&void 0!=i.treeInstance&&(i=i.element),e.isArray(t)?n=t:n[0]=t;var l="",a=this;e.each(n,function(){l+=a._parseItem(this)});var h=e(l);if(r.element.innerHTML.indexOf("UL"))var o=r.host.find("ul:first");if(void 0==i&&null==i)o.append(h);else{var d=(i=e(i)).find("ul:first");if(0==d.length){ulElement=e("<ul></ul>"),e(i).append(ulElement),d=i.find("ul:first");var m=r.itemMapping["id"+i[0].id].item;m.subtreeElement=d[0],m.hasItems=!0,d.addClass(r.toThemeProperty("jqx-tree-dropdown")),a.rtl&&d.addClass(r.toThemeProperty("jqx-tree-dropdown-rtl")),d.append(h);var c=d.find("li:first");m.parentElement=c}else d.append(h)}for(var u=h,p=0;p<u.length;p++){this._createItem(u[p]);var v=e(u[p]).find("li");if(v.length>0)for(var f=0;f<v.length;f++)this._createItem(v[f])}var g=function(t){a._refreshMapping(!1),a._updateItemsNavigation(),t&&a.allowDrag&&a._enableDragDrop&&a._enableDragDrop(),null!=a.selectedItem&&(e(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-fill-state-pressed")),e(a.selectedItem.titleElement).addClass(a.toThemeProperty("jqx-tree-item-selected")))};if(0==s)return g(!0),void this._raiseEvent("4",{items:this.getItems()});g(!1),a._render(),a.checkboxes&&a._updateCheckLayout(null),this._raiseEvent("4",{items:this.getItems()})},updateItem:function(t,i){if(!(r=void 0!=t.treeInstance?t:this.getItem(t))){var s=t;t=i,i=s;var r=void 0!=t.treeInstance?t:this.getItem(t)}if(r){if("string"==typeof i&&(i={label:i}),i.value&&(r.value=i.value),i.label&&(r.label=i.label,e.jqx.utilities.html(e(r.titleElement),i.label),e.jqx.browser.msie&&e.jqx.browser.version<8)){e(document.body).append(this._measureItem),this._measureItem.html(e(r.titleElement).text());var n=this._measureItem.width();r.icon&&(n+=20),e(e(r.titleElement).find("img")).length>0&&(n+=20),e(r.titleElement).css("max-width",n+"px"),this._measureItem.remove()}if(i.icon)if(e(r.element).children(".itemicon").length>0)e(r.element).find(".itemicon")[0].src=i.icon;else{var l=i.iconsize;l||(l=16);var a=e('<img width="'+l+'" height="'+l+'" style="float: left;" class="itemicon" src="'+i.icon+'"/>');e(r.titleElement).prepend(a),a.css("margin-right","4px"),this.rtl&&(a.css("margin-right","0px"),a.css("margin-left","4px"),a.css("float","right"))}return i.expanded&&this.expandItem(r),i.disabled&&this.disableItem(r),i.selected&&this.selectItem(r),!0}return!1},removeItem:function(t,i){if(void 0!=t&&null!=t){void 0!=t.treeInstance&&(t=t.element);var s=this,r=(t.id,this.getItem(t));r&&-1!=this.items.indexOf(r)&&function t(i){var s=-1;-1!=(s=this.items.indexOf(i))&&this.items.splice(s,1);var r=e(i.element).find("li"),n=r.length,l=this,a=new Array;if(n>0){e.each(r,function(e){var t=l.itemMapping["id"+this.id].item;a.push(t)});for(var h=0;h<a.length;h++)t.apply(this,[a[h]])}}.apply(this,[r]),this.host.find("#"+t.id).length>0&&e(t).remove(),0!=i?(s._updateItemsNavigation(),s.allowDrag&&s._enableDragDrop?s._render(!0,!1):s._render(),null!=s.selectedItem&&s.selectedItem.element==t&&(e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-fill-state-pressed")),e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-selected")),s.selectedItem=null),this._raiseEvent("5"),s.checkboxes&&s._updateCheckLayout(null)):this._raiseEvent("5")}},clear:function(){this.items=new Array,this.itemMapping=new Array;var e=this.host.find("ul:first");e.length>0&&(e[0].innerHTML=""),this.selectedItem=null},disableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var s=this;if(s.element==t)return s.disabled=!0,e(s.titleElement).addClass(i.toThemeProperty("jqx-fill-state-disabled")),e(s.titleElement).addClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&s.checkBoxElement&&e(s.checkBoxElement).jqxCheckBox({disabled:!0}),!1})},_updateInputSelection:function(){if(this.input){if(null==this.selectedItem)this.input.val("");else{var e=this.selectItem.value;null==e&&(e=this.selectedItem.label),this.input.val(e)}if(this.checkboxes){var t=this.getCheckedItems();if(this.submitCheckedItems){for(var i="",s=0;s<t.length;s++){var r=t[s].value;null==r&&(r=t[s].label),s==t.length-1?i+=r:i+=r+","}this.input.val(i)}}}},getCheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked&&t.push(e)}),t},getUncheckedItems:function(){var t=new Array,i=this;return e.each(i.items,function(){var e=this;e.checked||t.push(e)}),t},checkAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!0,e(t.checkBoxElement).jqxCheckBox("_setState",!0))}),this._raiseEvent("6",{element:this,checked:!0})},uncheckAll:function(){var t=this;e.each(t.items,function(){var t=this;t.disabled||(t.checked=!1,e(t.checkBoxElement).jqxCheckBox("_setState",!1))}),this._raiseEvent("6",{element:this,checked:!1})},checkItem:function(t,i,s){if(null==t)return!1;void 0===i&&(i=!0),void 0!=t.treeInstance&&(t=t.element);var r=this,n=!1,l=null;e.each(r.items,function(){var s=this;if(s.element==t&&!s.disabled)return n=!0,s.checked=i,l=s,e(s.checkBoxElement).jqxCheckBox({checked:i}),!1}),n&&(this._raiseEvent("6",{element:t,checked:i}),this._updateInputSelection()),void 0==s&&l&&this.hasThreeStates&&this.checkItems(l,l)},uncheckItem:function(e){this.checkItem(e,!1)},enableItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;e.each(i.items,function(){var s=this;if(s.element==t)return s.disabled=!1,e(s.titleElement).removeClass(i.toThemeProperty("jqx-fill-state-disabled")),e(s.titleElement).removeClass(i.toThemeProperty("jqx-tree-item-disabled")),i.checkboxes&&s.checkBoxElement&&e(s.checkBoxElement).jqxCheckBox({disabled:!1}),!1})},enableAll:function(){var t=this;e.each(t.items,function(){var i=this;i.disabled=!1,e(i.titleElement).removeClass(t.toThemeProperty("jqx-tree-item-disabled")),e(i.titleElement).removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.checkboxes&&i.checkBoxElement&&e(i.checkBoxElement).jqxCheckBox({disabled:!1})})},lockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;if(e.element==t)return e.locked=!0,!1})},unlockItem:function(t){if(null==t)return!1;var i=this;e.each(i.items,function(){var e=this;if(e.element==t)return e.locked=!1,!1})},getItems:function(){return this.items},getItem:function(e){return null==e||void 0==e?null:this.itemMapping["id"+e.id]?this.itemMapping["id"+e.id].item:null},isExpanded:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t&&t.isExpanded},isSelected:function(e){if(null==e||void 0==e)return!1;var t=this.itemMapping["id"+e.id].item;return null!=t&&t==this.selectedItem},getPrevItem:function(e){var t=this.getItem(e);return void 0!=e.treeInstance&&(t=e),this._prevVisibleItem(t)},getNextItem:function(e){var t=this.getItem(e);return void 0!=e.treeInstance&&(t=e),this._nextVisibleItem(t)},getSelectedItem:function(e){return this.selectedItem},val:function(e){if(0==arguments.length||"object"==typeof e)return this.selectedItem;if("string"==typeof e){var t=this.host.find("#"+e);if(t.length>0){i=this.getItem(t[0]);this.selectItem(i)}}else{var i=this.getItem(e);this.selectItem(i)}},getActiveDescendant:function(){return this.selectedItem?this.selectedItem.element.id:""},clearSelection:function(){this.selectItem(null)},selectItem:function(t,i){if(!this.disabled){var s=this;if(t&&void 0!=t.treeInstance&&(t=t.element),null!=t&&void 0!=t){if(null==this.selectedItem||this.selectedItem.element!=t){var r=null!=this.selectedItem?this.selectedItem.element:null;r&&e(r).removeAttr("aria-selected"),e.each(s.items,function(){var i=this;this.selected=!1,i.disabled||i.element==t&&(null==s.selectedItem||null!=s.selectedItem&&s.selectedItem.titleElement!=i.titleElement)&&(null!=s.selectedItem&&(e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-fill-state-pressed")),e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-selected"))),e(i.titleElement).addClass(s.toThemeProperty("jqx-fill-state-pressed")),e(i.titleElement).addClass(s.toThemeProperty("jqx-tree-item-selected")),s.selectedItem=i,this.selected=!0,e(i.element).attr("aria-selected","true"),e.jqx.aria(s,"aria-activedescendant",i.element.id))}),this._updateInputSelection(),i||(i=null),this._raiseEvent("2",{element:t,prevElement:r,type:i})}}else null!=s.selectedItem&&(e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-fill-state-pressed")),e(s.selectedItem.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-selected")),s.selectedItem=null)}},collapseAll:function(){this.isUpdating=!0;var t=this,i=t.items,s=this.animationHideDuration;this.animationHideDuration=0,e.each(i,function(){var e=this;1==e.isExpanded&&t._collapseItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationHideDuration),this.animationHideDuration=s},expandAll:function(){var t=this;this.isUpdating=!0;var i=this.animationShowDuration;this.animationShowDuration=0,e.each(this.items,function(){var e=this;e.hasItems&&t._expandItem(t,e)}),setTimeout(function(){t.isUpdating=!1,t._calculateWidth()},this.animationShowDuration),this.animationShowDuration=i},collapseItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(this.items,function(){var e=this;if(1==e.isExpanded&&e.element==t)return i._collapseItem(i,e),!1}),!0},expandItem:function(t){if(null==t)return!1;void 0!=t.treeInstance&&(t=t.element);var i=this;return e.each(i.items,function(){var e=this;0!=e.isExpanded||e.element!=t||e.disabled||e.locked||(i._expandItem(i,e),e.parentElement&&i.expandItem(e.parentElement))}),!0},_getClosedSubtreeOffset:function(t){var i=e(t.subtreeElement),s=-i.outerHeight();i.outerWidth();return 0,{left:0,top:s}},_collapseItem:function(t,i,s,r){if(null==t||null==i)return!1;if(i.disabled)return!1;if(t.disabled)return!1;if(t.locked)return!1;var n=e(i.subtreeElement),l=this._getClosedSubtreeOffset(i);l.top,l.left;$treeElement=e(i.element);t.animationHideDelay;null!=n.data("timer").show&&(clearTimeout(n.data("timer").show),n.data("timer").show=null);var a=function(){if(i.isExpanded=!1,t.checkboxes){var s=n.find(".chkbox");s.stop(),s.css("opacity",1),n.find(".chkbox").animate({opacity:0},50)}var r=e(i.arrow);t._arrowStyle(r,"",i.isExpanded),n.slideUp(t.animationHideDuration,function(){i.isCollapsing=!1,t._calculateWidth();var s=e(i.arrow);t._arrowStyle(s,"",i.isExpanded),n.hide(),t._raiseEvent("1",{element:i.element})})};a()},_expandItem:function(t,i){if(null==t||null==i)return!1;if(i.isExpanded)return!1;if(i.locked)return!1;if(i.disabled)return!1;if(t.disabled)return!1;var s=e(i.subtreeElement);null!=s.data("timer")&&null!=s.data("timer").hide&&clearTimeout(s.data("timer").hide);e(i.element);if(0!=parseInt(s.css("top"))){var r=e(i.arrow);if(t._arrowStyle(r,"",i.isExpanded),t.checkboxes){var n=s.find(".chkbox");n.stop(),n.css("opacity",0),n.animate({opacity:1},t.animationShowDuration)}if(s.slideDown(t.animationShowDuration,t.easing,function(){var s=e(i.arrow);i.isExpanded=!0,t._arrowStyle(s,"",i.isExpanded),i.isExpanding=!1,t._raiseEvent("0",{element:i.element}),t._calculateWidth()}),t.checkboxes&&(t._updateCheckItemLayout(i),i.subtreeElement)){var l=e(i.subtreeElement).find("li");e.each(l,function(){var e=t.getItem(this);null!=e&&t._updateCheckItemLayout(e)})}}else i.isExpanded=!0},_calculateWidth:function(){var t=this,i=this.checkboxes?20:0,s=0;if(!this.isUpdating){if(e.each(this.items,function(){if(0!=e(this.element).height()){var t=e(this.titleElement).outerWidth()+10+i+20*(1+this.level);if(s=Math.max(s,t),this.hasItems){var r=parseInt(e(this.titleElement).css("padding-top"));isNaN(r)&&(r=0),r*=2;var n=((r+=2)+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?e(this.arrow).css("margin-top","3px"):parseInt(n)>=0&&e(this.arrow).css("margin-top",parseInt(n)+"px")}}}),this.toggleIndicatorSize>16&&(s=s+this.toggleIndicatorSize-16),t.panel)if(s>this.host.width()){var r=s-this.host.width();r+="hidden"!==t.panel.jqxPanel("vScrollBar").css("visibility")?10:0,t.panel.jqxPanel({horizontalScrollBarMax:r})}else t.panel.jqxPanel({horizontalScrollBarMax:0});this.host.find("ul:first").width(s);var n=this.host.width()-30;n>0&&this.host.find("ul:first").css("min-width",n),t.panel&&t.panel.jqxPanel("_arrange")}},_arrowStyle:function(e,t,i){var s=this;if(e.length>0){e.removeClass();var r="";"hover"==t&&(r="-"+t);var n="jqx-tree-item-arrow"+(l=i?"-expand":"-collapse")+r;if(e.addClass(s.toThemeProperty(n)),!this.rtl){l=i?"-down":"-right";e.addClass(s.toThemeProperty("jqx-icon-arrow"+l))}if(this.rtl){e.addClass(s.toThemeProperty(n+"-rtl"));var l=i?"-down":"-left";e.addClass(s.toThemeProperty("jqx-icon-arrow"+l))}}},_initialize:function(t,i){var s=this;this.host.addClass(s.toThemeProperty("jqx-widget")),this.host.addClass(s.toThemeProperty("jqx-widget-content")),this.host.addClass(s.toThemeProperty("jqx-tree")),this._updateDisabledState();var r=e.jqx.browser.msie&&e.jqx.browser.version<8;e.each(this.items,function(){var t=this;$element=e(t.element);var i=null;if(s.checkboxes&&!t.hasItems&&t.checkBoxElement&&e(t.checkBoxElement).css("margin-left","0px"),r)!t.hasItems&&e(t.element).find("ul").length>0&&e(t.element).find("ul").remove();else{if(!t.hasItems)return s.rtl?t.element.style.marginRight=parseInt(s.toggleIndicatorSize)+"px":t.element.style.marginLeft=parseInt(s.toggleIndicatorSize)+"px",(n=e(t.arrow)).length>0&&(n.remove(),t.arrow=null),!0;s.rtl?t.element.style.marginRight="0px":t.element.style.marginLeft="0px"}var n=e(t.arrow);n.length>0&&n.remove(),(i=e('<span style="height: 17px; border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>')).prependTo($element),s.rtl?i.css("float","right"):i.css("float","left"),i.css("clear","both"),i.width(s.toggleIndicatorSize),s._arrowStyle(i,"",t.isExpanded);var l=parseInt(e(this.titleElement).css("padding-top"));isNaN(l)&&(l=0),l*=2;var a=((l+=2)+e(this.titleElement).height())/2-8.5;e.jqx.browser.msie&&e.jqx.browser.version<9?i.css("margin-top","3px"):parseInt(a)>=0&&i.css("margin-top",parseInt(a)+"px"),$element.addClass(s.toThemeProperty("jqx-disableselect")),i.addClass(s.toThemeProperty("jqx-disableselect"));var h="click",o=s.isTouchDevice();o&&(h=e.jqx.mobile.getTouchEventName("touchend")),s.addHandler(i,h,function(){return t.isExpanded?s._collapseItem(s,t):s._expandItem(s,t),!1}),s.addHandler(i,"selectstart",function(){return!1}),s.addHandler(i,"mouseup",function(){if(!o)return!1}),t.hasItems=e(t.element).find("li").length>0,t.arrow=i[0],t.hasItems||i.css("visibility","hidden"),$element.css("float","none")})},_getOffset:function(t){var i=e(window).scrollTop(),s=e(window).scrollLeft(),r=e.jqx.mobile.isSafariMobileBrowser(),n=e(t).offset(),l=n.top,a=n.left;return null!=r&&r?{left:a-s,top:l-i}:e(t).offset()},_renderHover:function(t,i,s){var r=this;if(!s){var n=e(i.titleElement);r.addHandler(n,"mouseenter",function(){i.disabled||!r.enableHover||r.disabled||(n.addClass(r.toThemeProperty("jqx-fill-state-hover")),n.addClass(r.toThemeProperty("jqx-tree-item-hover")))}),r.addHandler(n,"mouseleave",function(){i.disabled||!r.enableHover||r.disabled||(n.removeClass(r.toThemeProperty("jqx-fill-state-hover")),n.removeClass(r.toThemeProperty("jqx-tree-item-hover")))})}},_updateDisabledState:function(){this.disabled?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},_addInput:function(){if(null==this.input){var t=this.host.attr("name");t&&this.host.attr("name",""),this.input=e("<input type='hidden'/>"),this.host.append(this.input),this.input.attr("name",t),this._updateInputSelection()}},render:function(){this._updateItemsNavigation(),this._render()},_render:function(t,i){if(e.jqx.browser.msie&&e.jqx.browser.version<8){s=this;e.each(this.items,function(){var t=e(this.element),i=t.parent(),s=parseInt(this.titleElement.css("margin-left"))+this.titleElement[0].scrollWidth+13;t.css("min-width",s);var r=parseInt(i.css("min-width"));isNaN(r)&&(r=0);var n=t.css("min-width");r<parseInt(t.css("min-width"))&&i.css("min-width",n),this.titleElement[0].style.width=null})}var s=this;if(e.data(s.element,"animationHideDelay",s.animationHideDelay),e.data(document.body,"treeel",this),this._initialize(),this.isTouchDevice()&&"dblclick"==this.toggleMode&&(this.toggleMode="click"),void 0!=t&&1!=t||e.each(this.items,function(){s._updateItemEvents(s,this)}),this.allowDrag&&this._enableDragDrop&&(void 0==i||1==i)&&this._enableDragDrop(),this._addInput(),this.host.jqxPanel){if(this.host.find("#panel"+this.element.id).length>0)return this.panel.jqxPanel({touchMode:this.touchMode}),void this.panel.jqxPanel("refresh");this.host.find("ul:first").wrap('<div style="background-color: transparent; overflow: hidden; width: 100%; height: 100%;" id="panel'+this.element.id+'"></div>');var r=this.host.find("div:first"),n="fixed";null!=this.height&&"auto"!=this.height||(n="verticalwrap"),null!=this.width&&"auto"!=this.width||(n="fixed"==n?"horizontalwrap":"wrap"),r.jqxPanel({rtl:this.rtl,theme:this.theme,width:"100%",height:"100%",touchMode:this.touchMode,sizeMode:n}),e.jqx.browser.msie&&e.jqx.browser.version<8&&r.jqxPanel("content").css("left","0px"),r.data({nestedWidget:!0}),(null==this.height||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&this.isTouchDevice()&&(this.removeHandler(r,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(r,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(r,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var l=e.data(r[0],"jqxPanel").instance;null!=l&&(this.vScrollInstance=l.vScrollInstance,this.hScrollInstance=l.hScrollInstance),this.panelInstance=l,e.jqx.browser.msie&&e.jqx.browser.version<8&&(this.host.attr("hideFocus",!0),this.host.find("div").attr("hideFocus",!0),this.host.find("ul").attr("hideFocus",!0)),r[0].className="",this.panel=r}this._raiseEvent("3",this)},focus:function(){try{this.host.focus()}catch(e){}},_updateItemEvents:function(t,i){var s=this.isTouchDevice();s&&(this.toggleMode=e.jqx.mobile.getTouchEventName("touchend"));var r=e(i.element);t.enableRoundedCorners&&r.addClass(t.toThemeProperty("jqx-rc-all"));var n=s?e.jqx.mobile.getTouchEventName("touchend"):"mousedown";!0===t.touchMode&&t.removeHandler(e(i.checkBoxElement),"mousedown"),t.removeHandler(e(i.checkBoxElement),n),t.addHandler(e(i.checkBoxElement),n,function(e){return t.disabled||this.treeItem.disabled||(this.treeItem.checked=!this.treeItem.checked,t.checkItem(this.treeItem.element,this.treeItem.checked,"tree"),t.hasThreeStates&&t.checkItems(this.treeItem,this.treeItem)),!1});var l=e(i.titleElement);t.removeHandler(r),this.allowDrag&&this._enableDragDrop?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),t._renderHover(r,i,s);var a=e(i.subtreeElement);if(a.length>0){var h=i.isExpanded?"block":"none";a.css({overflow:"hidden",display:h}),a.data("timer",{})}t.addHandler(l,"selectstart",function(e){return!1}),e.jqx.browser.opera&&t.addHandler(l,"mousedown.item",function(e){return!1}),"click"!=t.toggleMode&&t.addHandler(l,"click",function(e){t.selectItem(i.element,"mouse"),null!=t.panel&&t.panel.jqxPanel({focused:!0}),l.focus(),t._raiseEvent("9",{element:i.element})}),t.addHandler(l,t.toggleMode,function(e){if(a.length>0&&clearTimeout(a.data("timer").hide),null!=t.panel&&t.panel.jqxPanel({focused:!0}),t.selectItem(i.element,"mouse"),void 0==i.isExpanding&&(i.isExpanding=!1),void 0==i.isCollapsing&&(i.isCollapsing=!1),a.length>0)return i.isExpanded?0==i.isCollapsing&&(i.isCollapsing=!0,t._collapseItem(t,i,!0)):0==i.isExpanding&&(i.isExpanding=!0,t._expandItem(t,i)),!1})},isTouchDevice:function(){if(void 0!=this._isTouchDevice)return this._isTouchDevice;var t=e.jqx.mobile.isTouchDevice();return 1==this.touchMode?t=!0:0==this.touchMode&&(t=!1),this._isTouchDevice=t,t},createID:function(){return e.jqx.utilities.createId()},createTree:function(t){if(null!=t){var i=this,s=e(t).find("li");this.items=new Array,this.itemMapping=new Array,e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&e(t).addClass(i.toThemeProperty("jqx-tree-dropdown-root-rtl")),(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&(this._measureItem=e("<span style='position: relative; visibility: hidden;'></span>"),this._measureItem.addClass(this.toThemeProperty("jqx-widget")),this._measureItem.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._measureItem.addClass(this.toThemeProperty("jqx-tree-item")),this._measureItem.addClass(this.toThemeProperty("jqx-item")),e(document.body).append(this._measureItem)),e.jqx.browser.msie&&e.jqx.browser.version;for(var r=0;r<s.length;r++)this._createItem(s[r]);(this.rtl||e.jqx.browser.msie&&e.jqx.browser.version<8)&&this._measureItem.remove(),this._updateItemsNavigation(),this._updateCheckStates()}},_updateCheckLayout:function(t){var i=this;this.checkboxes&&e.each(this.items,function(){this.level!=t&&void 0!=t||i._updateCheckItemLayout(this)})},_updateCheckItemLayout:function(t){if(this.checkboxes&&"none"!=e(t.titleElement).css("display")){var i=e(t.checkBoxElement),s=e(t.titleElement).outerHeight()/2-1-parseInt(this.checkSize)/2;i.css("margin-top",s),this.rtl||(e.jqx.browser.msie&&e.jqx.browser.version<8?t.titleElement.css("margin-left",parseInt(this.checkSize)+25):t.hasItems&&i.css("margin-left",this.toggleIndicatorSize))}},_updateCheckStates:function(){var t=this;t.hasThreeStates?e.each(this.items,function(){t._updateCheckState(this)}):e.each(this.items,function(){null==this.checked&&t.checkItem(this.element,!1,"tree")})},_updateCheckState:function(t){if(null!=t&&void 0!=t){var i=this,s=0,r=!1,n=0,l=e(t.element).find("li");n=l.length,t.checked&&n>0&&e.each(l,function(e){var t=i.itemMapping["id"+this.id].item,s=t.element.getAttribute("item-checked");void 0!=s&&null!=s&&"true"!=s&&1!=s||i.checkItem(t.element,!0,"tree")}),e.each(l,function(e){var t=i.itemMapping["id"+this.id].item;0!=t.checked&&(null==t.checked&&(r=!0),s++)}),n>0&&(s==n?this.checkItem(t.element,!0,"tree"):s>0?this.checkItem(t.element,null,"tree"):this.checkItem(t.element,!1,"tree"))}},_updateItemsNavigation:function(){for(var t=this.host.find("ul:first"),i=e(t).find("li"),s=0;s<i.length;s++){var r=i[s];if(this.itemMapping["id"+r.id]){var n=this.itemMapping["id"+r.id].item;if(!n)continue;n.prevItem=null,n.nextItem=null,s>0&&this.itemMapping["id"+i[s-1].id]&&(n.prevItem=this.itemMapping["id"+i[s-1].id].item),s<i.length-1&&this.itemMapping["id"+i[s+1].id]&&(n.nextItem=this.itemMapping["id"+i[s+1].id].item)}}},_applyTheme:function(t,i){var s=this;this.host.removeClass("jqx-tree-"+t),this.host.removeClass("jqx-widget-"+t),this.host.removeClass("jqx-widget-content-"+t),this.host.addClass(s.toThemeProperty("jqx-tree")),this.host.addClass(s.toThemeProperty("jqx-widget"));var r=this.host.find("ul:first");e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-"+t)),e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root")),this.rtl&&(e(r).removeClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl-"+t)),e(r).addClass(s.toThemeProperty("jqx-tree-dropdown-root-rtl")));for(var n=e(r).find("li"),l=0;l<n.length;l++){var a=n[l];e(a).children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-"+t)),e(this).addClass(s.toThemeProperty("jqx-tree-dropdown")),s.rtl&&(e(this).removeClass(s.toThemeProperty("jqx-tree-dropdown-rtl-"+t)),e(this).addClass(s.toThemeProperty("jqx-tree-dropdown-rtl"))),!1})}e.each(this.items,function(){var r=this,n=e(r.element);n.removeClass(s.toThemeProperty("jqx-tree-item-li-"+t)),n.addClass(s.toThemeProperty("jqx-tree-item-li")),this.rtl&&(n.removeClass(s.toThemeProperty("jqx-tree-item-li-"+t)),n.addClass(s.toThemeProperty("jqx-tree-item-li"))),e(r.titleElement).removeClass(s.toThemeProperty("jqx-tree-item-"+t)),e(r.titleElement).addClass(s.toThemeProperty("jqx-tree-item")),e(r.titleElement).removeClass("jqx-item-"+t),e(r.titleElement).addClass(s.toThemeProperty("jqx-item"));var l=e(r.arrow);l.length>0&&s._arrowStyle(l,"",r.isExpanded),r.checkBoxElement&&e(r.checkBoxElement).jqxCheckBox({theme:i}),s.enableRoundedCorners&&(n.removeClass("jqx-rc-all-"+t),n.addClass(s.toThemeProperty("jqx-rc-all")))}),this.host.jqxPanel&&this.panel.jqxPanel({theme:i})},_refreshMapping:function(t,i){for(var s=this.host.find("li"),r=new Array,n=new Array,l=e.data(document.body,"treeItemsStorage"),a=this,h=0;h<s.length;h++){var o=s[h],d=e(o),m=l[o.id];if(null!=m){n[n.length]=m,void 0!=t&&1!=t||this._updateItemEvents(this,m),m.level=d.parents("li").length,m.treeInstance=this;var c=null,u=null;-1!=m.titleElement[0].className.indexOf("jqx-fill-state-pressed")&&(e(m.titleElement).removeClass(a.toThemeProperty("jqx-fill-state-pressed")),e(m.titleElement).removeClass(a.toThemeProperty("jqx-tree-item-selected"))),d.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return m.subtreeElement=this,e(this).addClass(a.toThemeProperty("jqx-tree-dropdown")),a.rtl&&e(this).addClass(a.toThemeProperty("jqx-tree-dropdown-rtl")),!1}),d.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return u=this.id,c=this,!1}),m.parentElement=c,m.parentId=u,m.hasItems=e(m.element).find("li").length>0,null!=m&&(r[h]={element:o,item:m},r["id"+o.id]=r[h])}}this.itemMapping=r,this.items=n},_createItem:function(t){if(null!=t&&void 0!=t){var i=t.id;i||(i=this.createID());var s=t,r=e(t);s.id=i;var n=e.data(document.body,"treeItemsStorage");void 0==n&&(n=new Array);var l=this.items.length;this.items[l]=new e.jqx._jqxTree.jqxTreeItem,this.treeElements[i]=this.items[l],n[s.id]=this.items[l],e.data(document.body,"treeItemsStorage",n),l=this.items.length;var a=0,h=this,o=null;r.attr("role","treeitem"),r.children().each(function(){if("ul"==this.tagName||"UL"==this.tagName)return h.items[l-1].subtreeElement=this,e(this).addClass(h.toThemeProperty("jqx-tree-dropdown")),h.rtl&&(e(this).addClass(h.toThemeProperty("jqx-tree-dropdown-rtl")),e(this).css("clear","both")),!1}),r.parents().each(function(){if("li"==this.tagName||"LI"==this.tagName)return a=this.id,o=this,!1});var d=t.getAttribute("item-expanded");d=null!=d&&void 0!=d&&("true"==d||1==d),s.removeAttribute("item-expanded");var m=t.getAttribute("item-locked");m=null!=m&&void 0!=m&&("true"==m||1==m),s.removeAttribute("item-locked");var c=t.getAttribute("item-selected");c=null!=c&&void 0!=c&&("true"==c||1==c),s.removeAttribute("item-selected");var u=t.getAttribute("item-disabled");u=null!=u&&void 0!=u&&("true"==u||1==u),s.removeAttribute("item-disabled");var p=t.getAttribute("item-checked");p=null!=p&&void 0!=p&&("true"==p||1==p);var v=t.getAttribute("item-title");(null==v||void 0==v||"true"!=v&&1!=v)&&(v=!1),s.removeAttribute("item-title");var f=t.getAttribute("item-icon"),g=t.getAttribute("item-iconsize"),x=t.getAttribute("item-label"),I=t.getAttribute("item-value");s.removeAttribute("item-icon"),s.removeAttribute("item-iconsize"),s.removeAttribute("item-label"),s.removeAttribute("item-value");var b=this.items[l-1];b.id=i,void 0==b.value&&(this._valueList&&this._valueList[i]?b.value=this._valueList[i]:b.value=I),b.icon=f,b.iconsize=g,b.parentId=a,b.disabled=u,b.parentElement=o,b.element=t,b.locked=m,b.selected=c,b.checked=p,b.isExpanded=d,b.treeInstance=this,this.itemMapping[l-1]={element:s,item:b},this.itemMapping["id"+s.id]=this.itemMapping[l-1];if(!1,this.rtl&&(e(b.element).css("float","right"),e(b.element).css("clear","both")),e(s.firstChild).length>0){if(b.icon){(g=b.iconsize)||(g=16);f=e('<img width="'+g+'" height="'+g+'" style="float: left;" class="itemicon" src="'+b.icon+'"/>');e(s).prepend(f),f.css("margin-right","4px"),this.rtl&&(f.css("margin-right","0px"),f.css("margin-left","4px"),f.css("float","right"))}var _=s.innerHTML.indexOf("<ul");if(-1==_&&(_=s.innerHTML.indexOf("<UL")),-1==_)b.originalTitle=s.innerHTML,s.innerHTML='<div style="display: inline-block;">'+s.innerHTML+"</div>",b.titleElement=e(e(s)[0].firstChild);else{var w=s.innerHTML.substring(0,_);w=e.trim(w),b.originalTitle=w,w=e('<div style="display: inline-block;">'+w+"</div>");var y=e(s).find("ul:first");y.remove(),s.innerHTML="",e(s).prepend(w),e(s).append(y),b.titleElement=w,this.rtl&&(w.css("float","right"),y.css("padding-right","10px"))}if(e.jqx.browser.msie&&e.jqx.browser.version<8){e(e(s)[0].firstChild).css("display","inline-block");var k=!1;0==this._measureItem.parents().length&&(e(document.body).append(this._measureItem),k=!0),this._measureItem.css("min-width","20px"),this._measureItem[0].innerHTML=e(b.titleElement).text();var j=this._measureItem.width();b.icon&&(j+=20),e(e(item.titleElement).find("img")).length>0&&(j+=20),e(e(s)[0].firstChild).css("max-width",j+"px"),k&&this._measureItem.remove()}}else b.originalTitle="Item",e(s).append(e("<span>Item</span>")),e(s.firstChild).wrap("<span/>"),b.titleElement=e(s)[0].firstChild,e.jqx.browser.msie&&e.jqx.browser.version<8&&e(s.firstChild).css("display","inline-block");var q=e(b.titleElement),E=this.toThemeProperty("jqx-rc-all");if(this.allowDrag&&q.addClass("draggable"),null==x||void 0==x?(x=b.titleElement,b.label=e.trim(q.text())):b.label=x,e(s).addClass(this.toThemeProperty("jqx-tree-item-li")),this.rtl&&e(s).addClass(this.toThemeProperty("jqx-tree-item-li-rtl")),E+=" "+this.toThemeProperty("jqx-tree-item")+" "+this.toThemeProperty("jqx-item"),this.rtl&&(E+=" "+this.toThemeProperty("jqx-tree-item-rtl")),q[0].className=q[0].className+" "+E,b.level=e(t).parents("li").length,b.hasItems=e(t).find("li").length>0,this.rtl&&b.parentElement&&this.checkboxes,this.checkboxes){if(!this.host.jqxCheckBox)throw new Error("jqxTree: Missing reference to jqxcheckbox.js.");var T=e('<div style="overflow: visible; position: absolute; width: 18px; height: 18px;" tabIndex=0 class="chkbox"/>');if(T.width(parseInt(this.checkSize)),T.height(parseInt(this.checkSize)),e(s).prepend(T),this.rtl&&(T.css("float","right"),T.css("position","static")),T.jqxCheckBox({hasInput:!1,checked:b.checked,boxSize:this.checkSize,animationShowDelay:0,animationHideDelay:0,disabled:u,theme:this.theme}),this.rtl){b.parentElement?T.css("margin-right","10px"):T.css("margin-right","5px")}else q.css("margin-left",parseInt(this.checkSize)+6);b.checkBoxElement=T[0],T[0].treeItem=b;var C=q.outerHeight()/2-1-parseInt(this.checkSize)/2;T.css("margin-top",C),e.jqx.browser.msie&&e.jqx.browser.version<8?(q.css("width","1%"),q.css("margin-left",parseInt(this.checkSize)+25)):b.hasItems&&(this.rtl||T.css("margin-left",this.toggleIndicatorSize))}else e.jqx.browser.msie&&e.jqx.browser.version<8&&q.css("width","1%");u&&this.disableItem(b.element),c&&this.selectItem(b.element),e.jqx.browser.msie&&e.jqx.browser.version<8&&(e(s).css("margin","0px"),e(s).css("padding","0px"))}},destroy:function(){this.removeHandler(e(window),"resize.jqxtree"+this.element.id),this.host.removeClass(),this.isTouchDevice()&&(this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchend")+".touchScroll touchcancel.touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(this.panel,e.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"));var t=this,i=this.isTouchDevice();e.each(this.items,function(){var s=this,r=e(this.element),n=i?e.jqx.mobile.getTouchEventName("touchend"):"click";t.removeHandler(e(s.checkBoxElement),n);var l=e(s.titleElement);t.removeHandler(r),t.allowDrag&&t._enableDragDrop?(t.removeHandler(l,"mousedown.item"),t.removeHandler(l,"click"),t.removeHandler(l,"dblclick"),t.removeHandler(l,"mouseenter"),t.removeHandler(l,"mouseleave")):t.removeHandler(l),$arrowSpan=e(s.arrow),$arrowSpan.length>0&&(t.removeHandler($arrowSpan,n),t.removeHandler($arrowSpan,"selectstart"),t.removeHandler($arrowSpan,"mouseup"),i||(t.removeHandler($arrowSpan,"mouseenter"),t.removeHandler($arrowSpan,"mouseleave")),t.removeHandler(l,"selectstart")),e.jqx.browser.opera&&t.removeHandler(l,"mousedown.item"),"click"!=t.toggleMode&&t.removeHandler(l,"click"),t.removeHandler(l,t.toggleMode)}),this.panel&&(this.panel.jqxPanel("destroy"),this.panel=null),this.host.remove()},_raiseEvent:function(t,i){void 0==i&&(i={owner:null});var s=this.events[t];args=i,args.owner=this;var r=new e.Event(s);return r.owner=this,r.args=args,this.host.trigger(r)},propertyChangedHandler:function(t,i,s,r){if(void 0!=this.isInitialized&&0!=this.isInitialized){if("submitCheckedItems"==i&&t._updateInputSelection(),"disabled"==i&&t._updateDisabledState(),"theme"==i&&t._applyTheme(s,r),"keyboardNavigation"==i&&(t.enableKeyboardNavigation=r),("width"==i||"height"==i)&&(t.refresh(),t._initialize(),t._calculateWidth(),t.host.jqxPanel)){var n="fixed";null!=this.height&&"auto"!=this.height||(n="verticalwrap"),null!=this.width&&"auto"!=this.width||(n="fixed"==n?"horizontalwrap":"wrap"),t.panel.jqxPanel({sizeMode:n})}if("touchMode"==i&&(t._isTouchDevice=null,r&&(t.enableHover=!1),t._render()),("source"==i||"checkboxes"==i)&&null!=this.source){var l=[];e.each(t.items,function(){this.isExpanded&&(l[l.length]={label:this.label,level:this.level})});var a=t.loadItems(t.source);t.host.jqxPanel?t.panel.jqxPanel("setcontent",a):t.element.innerHTML=a;var h=t.disabled,o=t.host.find("ul:first");o.length>0&&(t.createTree(o[0]),t._render());var d=t,m=d.animationShowDuration;d.animationShowDuration=0,t.disabled=!1,l.length>0&&e.each(t.items,function(){for(var e=0;e<l.length;e++)if(l[e].label==this.label&&l[e].level==this.level){var t=d.getItem(this.element);d._expandItem(d,t)}}),t.disabled=h,d.animationShowDuration=m}"hasThreeStates"==i&&(t._render(),t._updateCheckStates()),"toggleIndicatorSize"==i&&(t._updateCheckLayout(),t._render())}}})}(jqxBaseFramework),jqxBaseFramework.jqx._jqxTree.jqxTreeItem=function(e,t,i){return{label:null,id:e,parentId:t,parentElement:null,parentItem:null,disabled:!1,selected:!1,locked:!1,checked:!1,level:0,isExpanded:!1,hasItems:!1,element:null,subtreeElement:null,checkBoxElement:null,titleElement:null,arrow:null,prevItem:null,nextItem:null}};

