/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(e){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesRenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){var i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var r=this;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),e.jqx.hasProperty(i,"displayField")?this.displayfield=e.jqx.get(i,"displayField"):this.displayfield=this.datafield,e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"validation")&&(this.validation=e.jqx.get(i,"validation")),e.jqx.hasProperty(i,"autoCellHeight")&&(this.autoCellHeight=e.jqx.get(i,"autoCellHeight")),e.jqx.hasProperty(i,"text")?this.text=e.jqx.get(i,"text"):this.text=this.displayfield,e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsFormat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=e.jqx.get(i,"minWidth")),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=e.jqx.get(i,"maxWidth")),e.jqx.hasProperty(i,"cellsRenderer")&&(this.cellsRenderer=e.jqx.get(i,"cellsRenderer")),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")&&(this.initeditor=e.jqx.get(i,"initEditor")),e.jqx.hasProperty(i,"createEditor")&&(this.createeditor=e.jqx.get(i,"createEditor")),e.jqx.hasProperty(i,"destroyEditor")&&(this.destroyeditor=e.jqx.get(i,"destroyEditor")),e.jqx.hasProperty(i,"getEditorValue")&&(this.geteditorvalue=e.jqx.get(i,"getEditorValue")),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")&&(this.cellclassname=e.jqx.get(i,"cellClassName")),e.jqx.hasProperty(i,"aggregates")&&(this.aggregates=e.jqx.get(i,"aggregates")),e.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesRenderer=e.jqx.get(i,"aggregatesRenderer")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var s in i)if(!r.hasOwnProperty(s)&&!r.hasOwnProperty(s.toLowerCase()))throw t.host.remove(),new Error("jqxDataTable: Invalid property name - "+s+".")}},this._initfields(i),this}e.jqx.jqxWidget("jqxDataTable","",{}),e.extend(e.jqx._jqxDataTable.prototype,{defineInstance:function(){var t={altRows:!1,aggregatesHeight:34,autoShowLoadElement:!0,autoRowHeight:!0,columnsHeight:30,columns:[],columnGroups:null,columnsResize:!1,columnsReorder:!1,dataview:null,disabled:!1,editable:!1,editSettings:{saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},enableHover:!0,enableBrowserSelection:!1,filterHeight:30,filterable:!1,filterMode:"default",groupsRenderer:null,groups:new Array,headerZIndex:359,height:null,handleKeyboardNavigation:null,indentWidth:25,initRowDetails:!1,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.",localization:null,pagerHeight:28,pageSize:10,pageSizeOptions:["5","10","20"],pageable:!1,pagerPosition:"bottom",pagerMode:"default",pageSizeMode:"default",pagerButtonsCount:5,pagerRenderer:null,ready:null,rendertoolbar:null,rowDetails:!1,renderStatusBar:null,rendered:null,rendering:null,rtl:!1,sortable:!1,showtoolbar:!1,showstatusbar:!1,statusBarHeight:34,serverProcessing:!1,selectionMode:"multiplerows",scrollBarSize:e.jqx.utilities.scrollBarSize,touchScrollBarSize:e.jqx.utilities.touchScrollBarSize,showAggregates:!1,showHeader:!0,maxHeight:999999,maxWidth:999999,autoBind:!0,beginEdit:null,endEdit:null,autokoupdates:!0,columnsVirtualization:!1,exportSettings:{columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"jqxDataTable"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},toolbarHeight:34,tableZIndex:369,_updating:!1,touchmode:"auto",width:null,that:this,incrementalSearch:!0,events:["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]};return this===e.jqx._jqxDataTable.prototype?t:(e.extend(!0,this,t),this.that=this,t)},createInstance:function(t){var i=this;if(15!=e.jqx.utilities.scrollBarSize&&(i.scrollBarSize=e.jqx.utilities.scrollBarSize),"table"==i.element.nodeName.toLowerCase()||e(i.element).children("table").length>0){var r=i.host.find("tbody tr"),s=i.host.find("th"),o=new Array;0===s.length&&(s=r[0],r.splice(0,1)),i.localizestrings&&(i.localizestrings(),null!=i.localization&&i.localizestrings(i.localization,!1));for(var a=[],l=0;l<r.length;l++){for(var n=r[l],d={},h=0;h<s.length;h++){var c=e.trim(e(s[h]).text());if(0===l){var u={name:c};if(i.columns[h]&&i.columns[h].cellsFormat){var g=i.columns[h].cellsFormat.toLowerCase();-1==g.indexOf("p")&&-1==g.indexOf("c")&&-1==g.indexOf("n")&&-1==g.indexOf("f")||(u.type="number"),-1==g.indexOf("d")&&-1==g.indexOf("m")&&-1==g.indexOf("y")&&-1==g.indexOf("h")&&-1==g.indexOf("m")&&-1==g.indexOf("s")&&-1==g.indexOf("t")||(u.type="date")}o.push(u)}var p=e(n).find("td:eq("+h+")");if(o[h].type){var f=i.getvaluebytype(e.trim(p.text()),o[h]);d[c]=f}else d[c]=e.trim(p.text())}a[a.length]=d}i.host.wrap("<div></div>");var m=i.host.parent(),v=i.host.data();v.jqxDataTable.host=m,v.jqxDataTable.element=m[0],i.host.parent()[0].id=i.element.id;try{i.host.parent()[0].style=i.element.style}catch(e){}i.element=m[0],i.host=m,i.host.data(v);var w={dataFields:o,localdata:a,datatype:"array"},y=new e.jqx.dataAdapter(w);i.source=y}i.source&&!i.source.dataBind&&(i.source=new e.jqx.dataAdapter(i.source));var x=i.source._source.datafields;x&&x.length>0&&(i._camelCase=void 0!==i.source._source.dataFields,i.selectionMode=i.selectionMode.toLowerCase()),null==i.host.attr("tabindex")&&i.host.attr("tabindex","0"),i.host.attr("role","grid"),i.host.attr("align","left"),i.host.addClass(i.toTP("jqx-grid")),i.host.addClass(i.toTP("jqx-reset")),i.host.addClass(i.toTP("jqx-rc-all")),i.host.addClass(i.toTP("jqx-widget")),i.host.addClass(i.toTP("jqx-widget-content")),i._testmodules()||(i.render(!0),e.jqx.utilities.resize(i.host,function(){var t=e(window).width(),r=e(window).height(),s=i.host.width(),o=i.host.height();i._lastHostWidth==s&&i._lastHostHeight==o||i._updatesize(i._lastHostWidth!=s,i._lastHostHeight!=o),i._lastWidth=t,i._lastHeight=r,i._lastHostWidth=s,i._lastHostHeight=o}))},getvaluebytype:function(t,i){var r=t;if(null==t)return t;if(","==this.gridlocalization.decimalseparator&&t.indexOf(this.gridlocalization.decimalseparator)>=0&&(t=t.replace(this.gridlocalization.decimalseparator,".")),t.indexOf(this.gridlocalization.currencysymbol)>=0&&(t=t.replace(this.gridlocalization.currencysymbol,"")),t.indexOf(this.gridlocalization.percentagesymbol)>=0&&(t=t.replace(this.gridlocalization.percentagesymbol,"")),e.isArray(t)&&"array"!=i.type){for(var s=0;s<t.length;s++)t[s]=this.getvaluebytype(t[s],i);return t}if("date"==i.type)if("NaN"==t)t="";else{var o=new Date(t);if("string"==typeof t&&i.format){var a=e.jqx.dataFormat.parsedate(t,i.format);null!=a&&(o=a)}null==(t=("NaN"==o.toString()||"Invalid Date"==o.toString())&&e.jqx.dataFormat?e.jqx.dataFormat.tryparsedate(t):o)&&(t=r)}else if("float"==i.type||"number"==i.type||"decimal"==i.type)if("NaN"==t)t="";else{t=parseFloat(t);isNaN(t)&&(t=r)}else if("int"==i.type||"integer"==i.type){var t=parseInt(t);isNaN(t)&&(t=r)}else"bool"!=i.type&&"boolean"!=i.type||(null!=t&&void 0!=t.toLowerCase&&("false"==t.toLowerCase()?t=!1:"true"==t.toLowerCase()&&(t=!0)),t=1==t||(0!=t||""===t)&&"");return t},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div class="jqx-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var t=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");if(t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url){var i=!1;("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(i=!0),i?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height));var r=!1;("auto"===this.width||null===this.width||this.autoWidth)&&(r=!0),r?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width))}},_measureElement:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");i.addClass(this.toTP("jqx-widget")),e(document.body).append(i),"cell"==t?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_testmodules:function(){var t="",i=this,r=function(){""!=t.length&&(t+=",")};if(this.host.jqxScrollBar||(r(),t+=" jqxscrollbar.js"),this.host.jqxButton||(r(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(r(),t+=" jqxdata.js"),""!=t||this.editable||this.filterable||this.pageable){var s=[];if((this.filterable&&"simple"!=this.filterMode||"advanced"==this.pagerMode&&this.pageable)&&function(e){switch(e){case"checkbox":i.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,r(),t+=" jqxcheckbox.js");break;case"dropdownlist":i.host.jqxDropDownList||s.dropdownlist?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}("dropdownlist"),""!=t)throw new Error("jqxDataTable: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper.focus(),this.host.focus();var e=this;setTimeout(function(){e.wrapper.focus(),e.host.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},isBindingCompleted:function(){return!this._loading},_updatesize:function(t,i){if(!this._loading){var r=this,s=r.host.width(),o=r.host.height();r._oldWidth||(r._oldWidth=s),r._oldHeight||(r._oldHeight=o),void 0!=r._resizeTimer&&(clearTimeout(r._resizeTimer),r._resizeTimer=null);var a=function(){r._resizeTimer&&clearTimeout(r._resizeTimer),r.resizingGrid=!0,e.jqx.isHidden(r.host)||(r._updatecolumnwidths(),r.refresh(),r._oldWidth=s,r._oldHeight=o,r.resizingGrid=!1)};a(),r._resizeTimer=setTimeout(function(){var e=r.host.width(),t=r.host.height();r._oldWidth==e&&r._oldHeight==t||a()},300)}},resize:function(e,t){void 0!=e&&(this.width=e),void 0!=t&&(this.height=t),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();return this.touchDevice=t,1==this.touchmode?(t=!0,e.jqx.mobile.setMobileSimulator(this.table[0]),this.touchDevice=t):0==this.touchmode&&(t=!1),t&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollBarSize=this.touchScrollBarSize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,i){if(this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(null!=t){for(var r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);for(var s=["pagergotopagestring","pagershowrowsstring","pagerrangestring","pagernextbuttonstring","pagerpreviousbuttonstring","pagerfirstbuttonstring","pagerlastbuttonstring","toppagerstring","firstDay","days","months","AM","PM","patterns","percentsymbol","currencysymbol","currencysymbolposition","decimalseparator","thousandsseparator","filterapplystring","filteraddnew","filtercancelstring","filterclearstring","filterstring","filterstringcomparisonoperators","filternumericcomparisonoperators","filterdatecomparisonoperators","filterbooleancomparisonoperators","emptydatastring","filterselectstring","todaystring","clearstring","validationstring","loadtext","filtersearchstring","loadingErrorMessage"],o=this,a=0;a<s.length;a++){var l=s[a];void 0!==t[l]&&(o.gridlocalization[l]=t[l])}t.loadingErrorMessage&&(this.loadingErrorMessage=t.loadingErrorMessage),!1!==i&&(this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(e){var t=!1;("auto"===this.width||null===this.width||this.autowidth)&&999999==this.maxWidth&&(t=!0);var i=parseInt(this.scrollBarSize),r=this.table?this.table.height():0,s=0,o=this.vScrollBar[0].style.visibility;this.hScrollBar[0].style.visibility;if(e)a=e;else var a=this.host.height();this.columnGroups?a-=this.showHeader?this.columnsheader.height():0:a-=this.showHeader?this.columnsHeight:0,this.filterable&&(a-=this.filter.height()),this.pageable&&(a-=this.pagerHeight,"both"===this.pagerPosition&&(a-=this.pagerHeight)),this.showtoolbar&&(a-=this.toolbarHeight),this.showstatusbar&&(a-=this.statusBarHeight),this.showAggregates&&(a-=this.aggregatesHeight);var l=!1;if(("auto"===this.height||null===this.height||this.autoheight)&&999999==this.maxHeight&&(l=!0),!l&&r>a&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)?(this.vScrollBar[0].style.visibility="inherit",s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-a})):this.vScrollBar[0].style.visibility="hidden",o!=this.vScrollBar[0].style.visibility){this._updatecolumnwidths();var n=this.table.height();r!=n&&(r=n,!l&&r>a&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)&&(this.vScrollBar[0].style.visibility="inherit",s=4+parseInt(i),this.vScrollBar.jqxScrollBar({max:r-a})))}0==this.scrollBarSize&&(s=0);var d=this.table?this.table.width():0;d>3&&(d-=3);var h=parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width")),c=h+this.host.width()-s;if(d>c&&!t){if(this.hScrollBar[0].style.visibility="inherit",this.hScrollBar.jqxScrollBar({max:d-c}),s=4+parseInt(i),0==i&&(s=0),!l){if(r>a-s+4&&(this.source.records.length>0||this.source.hierarchy&&this.source.hierarchy.length>0)){this.hScrollBar.jqxScrollBar({max:h+d-c});var u="hidden"===this.vScrollBar[0].style.visibility;this.vScrollBar[0].style.visibility="inherit",this._updatecolumnwidths(),u&&this.hScrollBar.jqxScrollBar({max:d-c+s+h});var g=this.table?this.table.width():0;g>3&&(g-=3),g!=d&&g<c&&(this.hScrollBar.jqxScrollBar({max:h+g-c}),this.hScrollBar[0].style.visibility="hidden",s=0)}this.vScrollBar.jqxScrollBar({max:r-a+s})}}else this.hScrollBar[0].style.visibility="hidden";0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),e(document.body).append(i);var r=i.outerWidth()+20;return i.remove(),r},_arrangeAutoHeight:function(e){if(e||(e=0),"auto"===this.height||null===this.height||this.autoheight){var t=this.table.height(),i=0;if(this.columnGroups?i+=this.showHeader?this.columnsheader.height():-1:i+=this.showHeader?this.columnsHeight:-1,i+=this.showstatusbar?this.statusBarHeight:0,i+=this.showAggregates?this.aggregatesHeight:0,i+=this.showtoolbar?this.toolbarHeight:0,i+=this.pageable?this.pagerHeight:0,"both"===this.pagerPosition&&(i+=this.pageable?this.pagerHeight:0),i+=t,this.filterable){var r=this.filter.find(".filterrow"),s=1;this.filter.find(".filterrow-hidden").length>0&&(s=0),i+=this.filterHeight-1+this.filterHeight*r.length*s}return i+e>this.maxHeight?this.host.height(this.maxHeight):this.host.height(i+e),!0}return!1},_arrangeAutoWidth:function(e){if(e||(e=0),"auto"===this.width||null===this.width||this.autowidth){for(var t=0,i=0;i<this.columns.records.length;i++){var r=this.columns.records[i].width;this.columns.records[i].hidden||(t+="auto"==r?r=this._measureElementWidth(this.columns.records[i].text):r)}return width=t,width+e>this.maxWidth?this.host.width(this.maxWidth):this.host.width(width+e),!0}return!1},_measureTopAndHeight:function(){var e=this.host.height(),t=0;if(this.showtoolbar&&(t+=this.toolbarHeight,e-=parseInt(this.toolbarHeight)),this.filterable){var i=this.filter.find(".filterrow"),r=1;this.filter.find(".filterrow-hidden").length>0&&(r=0),t+=this.filterHeight,e-=parseInt(this.filterHeight);var s=1==r?i.length:0;t+=this.filterHeight*s,e-=this.filterHeight*s}return this.pageable&&"bottom"!=this.pagerPosition&&(t+=parseInt(this.pagerHeight)+1,e>this.pagerHeight&&"both"===this.pagerPosition&&(e-=parseInt(this.pagerHeight))),{top:t,height:e}},_arrange:function(){if(this.table){this._arrangeAutoHeight(),this._arrangeAutoWidth();var t=this.host.width(),i=this.host.height(),r=i;this.pageable?"bottom"===this.pagerPosition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerPosition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerPosition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden");var s=0;if(this.showtoolbar?(this.toolbar.width(t),this.toolbar.height(this.toolbarHeight-1),this.toolbar.css("top",0),s+=this.toolbarHeight,i-=parseInt(this.toolbarHeight)):this.toolbar[0].style.height="0px",this.filterable){this.filter.width(t),this.filter.css("top",s);var o=this.filter.find(".filterrow"),a=1;this.filter.find(".filterrow-hidden").length>0&&(a=0),this.filter.height(this.filterHeight-1+this.filterHeight*o.length*a),s+=this.filterHeight,i-=parseInt(this.filterHeight);var l=1==a?o.length:0;s+=this.filterHeight*l,i-=this.filterHeight*l}if(this.showstatusbar?(this.statusbar.width(this.table?Math.max(t,this.table.width()):t),this.statusbar.height(this.statusBarHeight-1)):this.statusbar[0].style.height="0px",this.showAggregates?this.aggregates.height(this.aggregatesHeight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerPosition)this.toppager[0].style.width=t+"px",this.toppager[0].style.height=parseInt(this.pagerHeight)+"px",this.toppager[0].style.top=parseInt(s)+"px",s+=parseInt(this.pagerHeight)+1,i>this.pagerHeight&&(i-=parseInt(this.pagerHeight));else{this.toppager[0].style.width!=t+"px"&&(this.toppager[0].style.width=parseInt(t)+"px"),this.toppager[0].style.height!=this.pagerHeight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerHeight)+"px"),this.toppager[0].style.top!=s+"px"&&(this.toppager[0].style.top=s+"px");var n=s+("bottom"!=this.pagerPosition?this.pagerHeight:0)+"px";this.content[0].style.top!=n&&(this.content[0].style.top=s+this.pagerHeight+"px")}this._updateScrollbars(r);var d=parseInt(this.scrollBarSize),h=2,c=0;if("hidden"!=this.vScrollBar[0].style.visibility&&(c=d+4),"hidden"!=this.hScrollBar[0].style.visibility&&(h=d+4+2),0==d&&(c=0,h=0),this.showAggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(t,this.table.width())+4:t):this.aggregates.width("auto")),"hidden"!=this.vScrollBar[0].style.visibility||"hidden"!=this.hScrollBar[0].style.visibility){var u=this._arrangeAutoHeight(h-2),g=this._arrangeAutoWidth(c+1);if(u||g){t=this.host.width();this.toppager[0].style.width=parseInt(t)+"px",this.toolbar[0].style.width=parseInt(t)+"px",this.statusbar[0].style.width=parseInt(t)+"px",this.filter[0].style.width=parseInt(t)+"px"}if(u){var p=this._measureTopAndHeight();s=p.top,i=p.height}}var f=0;this.pageable&&(f=this.pagerHeight,"top"!=this.pagerPosition&&(h+=this.pagerHeight)),this.showAggregates&&(h+=this.aggregatesHeight,f+=this.aggregatesHeight),this.showstatusbar&&(h+=this.statusBarHeight,f+=this.statusBarHeight),this.hScrollBar[0].style.height!=d+"px"&&(this.hScrollBar[0].style.height=parseInt(d)+"px"),this.hScrollBar[0].style.top==s+i-4-d-f+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=s+i-4-d-f-1+"px",this.hScrollBar[0].style.left="0px");var m=this.hScrollBar[0].style.width,v=!1,w=!1;0==c?m!=t-2+"px"&&(this.hScrollBar[0].style.width=t-2+"px",v=!0):m!=t-d-4+"px"&&(this.hScrollBar[0].style.width=t-d-4+"px",v=!0),this.vScrollBar[0].style.width!=d+"px"&&(this.vScrollBar[0].style.width=d+"px",w=!0),this.vScrollBar[0].style.height!=parseInt(i)-h+"px"&&(this.vScrollBar[0].style.height=parseInt(i)-h+"px",w=!0),this.vScrollBar[0].style.left==parseInt(t)-parseInt(d)-4+"px"&&this.vScrollBar[0].style.top==s+"px"||(this.vScrollBar[0].style.top=s+"px",this.vScrollBar[0].style.left=parseInt(t)-parseInt(d)-4+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:s}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:d+2}));var y=this.vScrollInstance;y.disabled=this.disabled;var x=this.hScrollInstance;x.disabled=this.disabled,v&&x.refresh(),w&&y.refresh();var b=function(e){"hidden"!=e.vScrollBar[0].style.visibility&&"hidden"!=e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="inherit",e.bottomRight[0].style.left=1+parseInt(e.vScrollBar.css("left"))+"px",e.bottomRight[0].style.top=parseInt(e.hScrollBar.css("top"))+"px",e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight[0].style.width=parseInt(d)+3+"px",e.bottomRight[0].style.height=parseInt(d)+4+"px",e.showAggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(d)+4+e.aggregatesHeight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.aggregatesHeight}))):e.bottomRight[0].style.visibility="hidden"};if(b(this),this.content[0].style.width!=t-c+"px"&&(this.content[0].style.width=t-c+"px"),this.content[0].style.height!=i-h+3+"px"&&(this.content[0].style.height=i-h+3+"px"),this.content[0].style.top!=s+"px"&&(this.content[0].style.top=parseInt(s)+"px"),this.rtl&&(this.content.css("left",c),this.filter&&this.filter.children().length>0&&e(this.filter.children()).css("left",c),this.table)){var _=this.table.width();_<t-c&&(this.content.css("left",t-_+2),this.filter&&this.filter.children().length>0&&e(this.filter.children()).css("left",t-_+2))}this.showAggregates&&(this.aggregates.css("top",s+i-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:s+i-4-d-f+this.aggregatesHeight+"px"}),this.aggregates.css("top",1+s+i-d-5-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0))),b(this)),this.showstatusbar&&(this.statusbar.css("top",s+i-this.statusBarHeight-(this.pageable?this.pagerHeight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=t+"px",this.pager[0].style.height=this.pagerHeight+"px",this.pager[0].style.top=parseInt(s)+parseInt(i)-parseInt(this.pagerHeight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,t!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),i!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=t}},scrollOffset:function(e,t){if(0==arguments.length||null!=e&&"object"==typeof e&&!e.top)return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")};if(null!=e&&"object"==typeof e)var t=e.left,e=e.top;null!=e&&null!=t&&void 0!=e&&void 0!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&void 0!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&void 0!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginUpdate:function(){this._updating=!0,this._datachanged=!1},endUpdate:function(e){this._updating=!1,!1!==e&&(this._rendercolumnheaders(),this.refresh())},updating:function(){return this._updating},databind:function(t,i,r){if(!0!==this.loadingstate){var s=window;"block"==this.host.css("display")&&(this.autoShowLoadElement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")));var o=this;null==t&&(t={}),void 0!=t.sortcomparer&&null!=t.sortcomparer||(t.sortcomparer=null),void 0!=t.filter&&null!=t.filter||(t.filter=null),void 0!=t.sort&&null!=t.sort||(t.sort=null),void 0!=t.data&&null!=t.data||(t.data=null);if(null!=t&&(void 0!=t._source?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,!o.initializedcall){if(t._source&&this.sortable&&(void 0!=t._source.sortcolumn&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),void 0!=t._source.sortdirection)){this.dataview.sortfielddirection=t._source.sortdirection;var a=t._source.sortdirection;if("a"==a||"asc"==a||"ascending"==a||1==a)l=!0;else var l=!1;this.sortdirection=null!=a?{ascending:l,descending:!l}:{ascending:!1,descending:!1}}this.pageable&&t._source&&(void 0!=t._source.pagenum&&(this.dataview.pagenum=t._source.pagenum),void 0!=t._source.pagesize?(this.pageSize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pageSize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection))}this._loading=!0,this.dataview.update=function(t){o._loading=!1,o.rowsByKey=new Array;var a=o.source._source.datafields;if(o.groups&&o.groups.length>0){var l=Object.prototype.toString,n=o.groups[0];if(Object.prototype.toString="function"==typeof n?n:function(){return this[n]},!o.source.records.sort){var d=new Array,h=0;e.each(data,function(){d[startindex+h++]=this}),data=d}o.source.records.sort(function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return-1;if(null!==t&&null===i)return 1;var r=0,s=0;if(t&&t.uid&&(r=t.uid),i&&i.uid&&(s=i.uid),t=t.toString(),i=i.toString(),e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(e){}if("number"==typeof r){if(r<s)return-1;if(r>s)return 1}return 0}),Object.prototype.toString=l}for(var c=0;c<o.source.records.length;c++){var u=o.source.records[c];if(o.rowsByKey[u.uid]=u,u.records&&u.records.length>0){var g=function(e){for(var t=0;t<e.length;t++)e[t]&&(o.rowsByKey[e[t].uid]=e[t],e[t].records&&e[t].records.length>0&&g(e[t].records))};g(u.records)}if(0===c){var p=!1;if(a)for(w=0;w<a.length;w++)if(a[w]&&!a[w].type){p=!0,a[w].type="string";var f=u[a[w].name];if(void 0==f)continue;if(!0!==f&&!1!==f||(a[w].type="boolean"),null!=f&&f.toString().indexOf(o.gridlocalization.currencysymbol)>-1||f.toString().indexOf(o.gridlocalization.percentsymbol)>-1){var m=f.toString().split(" ").length,v=new Number(o._toNumber(f.toString()));isNaN(v)||1!=m||(a[w].type="number")}(e.jqx.dataFormat.isNumber(f)||!isNaN(parseFloat(f))&&isFinite(f))&&(a[w].type="number"),e.jqx.dataFormat.isDate(f)&&(a[w].type="date")}if(p)for(var w=0;w<a.length;w++){var y=o.source.getvaluebytype(u[a[w].name],a[w]);if(null!=y&&"number"==a[w].type){var x=y;x=new Number(o._toNumber(x.toString())),isNaN(x)||(y=x)}u[a[w].name]=y}}}if("pager"===i||"filter"===i||"sort"===i?o.refresh():o._render(),o.autoShowLoadElement&&!o._loading&&(e(o.dataloadelement).css("visibility","hidden"),e(o.dataloadelement).css("display","none")),o.pageable&&(o.disabled||o.pagernexttop&&(o.pagerfirsttop.jqxButton({disabled:!1}),o.pagerfirstbottom.jqxButton({disabled:!1}),o.pagerlasttop.jqxButton({disabled:!1}),o.pagerlastbottom.jqxButton({disabled:!1}),o.pagernexttop.jqxButton({disabled:!1}),o.pagerprevioustop.jqxButton({disabled:!1}),o.pagershowrowscombotop.jqxDropDownList&&"advanced"==o.pagerMode&&(o.pagershowrowscombotop.jqxDropDownList({disabled:!1}),o.pagershowrowscombobottom.jqxDropDownList({disabled:!1})),o.pagernextbottom.jqxButton({disabled:!1}),o.pagerpreviousbottom.jqxButton({disabled:!1}))),o._updateTouchScrolling(),o._raiseEvent("bindingComplete"),r&&r(),!o.initializedcall){if(o.initializedcall=!0,o.isInitialized=!0,o.ready&&o.ready(),(null!=o.width&&-1!=o.width.toString().indexOf("%")||null!=o.height&&-1!=o.height.toString().indexOf("%"))&&o._updatesize(!0),o._rendercelltexts&&o._rendercelltexts(),o._gridRenderElement){e(o._gridRenderElement).show("slow");var b=6e3+Math.floor(4e3*Math.random()+1),_=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase();s[e.camelCase(_)](function(){e(o._gridRenderElement).hide("slow",function(){e(o._gridRenderElement).remove()})},b)}if("hidden"==o.host.css("visibility")){e.jqx.browser.msie&&e.jqx.browser.version;"visible"==o.vScrollBar.css("visibility")&&o.vScrollBar.css("visibility","inherit"),"visible"==o.hScrollBar.css("visibility")&&o.hScrollBar.css("visibility","inherit"),o._intervalTimer=setInterval(function(){"visible"==o.host.css("visibility")&&(o._updatesize(!0),clearInterval(o._intervalTimer))},100)}}},this.dataview.databind(t)}},_raiseEvent:function(t,i){void 0==i&&(i={owner:null});var r=t;args=i,args.owner=this;var s=new e.Event(r);s.owner=this,s.args=args;var o=this.host.trigger(s);return i=s.args,o},ensureColumnVisible:function(e){for(var t=0,i=0,r=0;r<this.columns.records.length;r++){if(this.columns.records[r].datafield==e){t+=this.columns.records[r].width,i=this.columns.records[r].width;break}t+=this.columns.records[r].width}if("hidden"!=this.hScrollBar.css("visibility")){var s=this.hScrollBar.jqxScrollBar("value"),o=s+this.host.width();s>t-i?this.hScrollBar.jqxScrollBar("setPosition",t-i):t>o&&this.hScrollBar.jqxScrollBar("setPosition",s+t-o)}},ensurerowvisiblebykey:function(t){if("hidden"===this.vScrollBar[0].style.visibility)return!1;var i=this._getuirow(t);if(i){var r=this.vScrollBar.jqxScrollBar("value"),s=this.host.height(),o=0;this.columnGroups?o+=this.showHeader?this.columnsheader.height():0:o+=this.showHeader?this.columnsHeight:0,this.filterable&&(o+=this.filter.height()),this.pageable&&"top"===this.pagerPosition&&(o+=this.pagerHeight),this.showtoolbar&&(o+=this.toolbarHeight),s-=o,this.pageable&&"top"!==this.pagerPosition&&(s-=this.pagerHeight),this.showstatusbar&&(s-=this.statusBarHeight),this.showAggregates&&(s-=this.aggregatesHeight),"hidden"!=this.hScrollBar.css("visibility")&&(s-=20);var a=this.host.coord().top+o,l=r,n=s+l,d=i.coord().top+r-a,h=(d=Math.round(d))+i.outerHeight();if(h=Math.round(h),0===Math.round(i.position().top))return this.vScrollBar.jqxScrollBar("setPosition",0);var c=e(this._table.children()[1]).children().length-1,u=this._getuikey(c),g=this._getuirow(u);if(g&&g[0]===i[0])return this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max"));if(d<l){var p=d-i.height();return p<0&&(p=0),this.vScrollBar.jqxScrollBar("setPosition",p)}return h>n?this.vScrollBar.jqxScrollBar("setPosition",4+h-s-r):void 0}},ensureRowVisible:function(e){var t=this._getkey(e);this.ensurerowvisiblebykey(t)},getColumn:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;var r=t;t=t.toLowerCase();var s=this.getColumn(e);if(null!=s){s[t];s[t]=i,s[r]=i;var o=this.getColumn(e);switch(null!=o&&(o[t]=i),t){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==t?(this._rendercolumnheaders(),this.refresh()):"text"==t||"class"==t||"hidden"==t||"pinned"==t||"resizable"==t||"renderer"==t?(this._rendercolumnheaders(),this.refresh()):"width"==t||"maxwidth"==t||"minwidth"==t?(s._width=null,s._percentagewidth=null,this._updatecolumnwidths(),this.refresh()):this.refresh()}}},getColumnProperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getColumn(e)[t])},setColumnProperty:function(e,t,i){this._setcolumnproperty(e,t,i)},hideColumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showColumn:function(e){this._setcolumnproperty(e,"hidden",!1)},updateBoundData:function(e,t){this.databind(this.source,e,t)},refresh:function(t){if(1!=t){if(e.jqx.isHidden(this.host))return;this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._arrangeFilterRow&&this._arrangeFilterRow(),this._renderhorizontalscroll(),this._showicons(),this.showAggregates&&this._updateaggregates(),this._updateTouchScrolling()}},_rendercelltexts:function(){var t=String.fromCharCode(119,119,119,46,106,113,119,105,100,103,101,116,115,46,99,111,109);if(-1==location.hostname.indexOf(t.substring(4))){this._gridRenderElement&&e(this._gridRenderElement).remove();var i=String.fromCharCode(83,80,65,78),r=String.fromCharCode(72,84,84,80,58,47,47),s=document.createElement(i);s.id=e.jqx.utilities.createId(),s.innerHTML=t,s.style.position="absolute",s.style.right="5px",s.style.bottom="5px",s.style.color="#909090",s.style.cursor="pointer",s.style.zIndex="999999",s.style.display="none",s.style.fontSize="9px",s.onmousedown=function(){open(r+t)},this.content[0].appendChild(s),this._gridRenderElement=s}},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){var i=e.jqx.mobile.getTouchEventName("touchstart"),r=e.jqx.mobile.getTouchEventName("touchend"),s=e.jqx.mobile.getTouchEventName("touchmove");t.table&&(t.removeHandler(t.table,i+".touchScroll"),t.removeHandler(t.table,s+".touchScroll"),t.removeHandler(t.table,r+".touchScroll"),t.removeHandler(t.table,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.table[0],Math.max(t.vScrollInstance.max,t.hScrollInstance.max),function(e,i){if(null!=i&&"hidden"!=t.vScrollBar.css("visibility")){t.vScrollInstance.value;t.vScrollInstance.setPosition(i)}if(null!=e&&"hidden"!=t.hScrollBar.css("visibility")){t.hScrollInstance.value;t.hScrollInstance.setPosition(e)}t.scrolled=new Date,t.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar))}},_showicons:function(){if(this.table)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];if(e(i.filtericon).hide(),e(i.sortasc).hide(),e(i.sortdesc).hide(),"simple"!==this.filterMode)for(var r=0;r<this.dataview.filters.length;r++)if(this.dataview.filters[r].datafield===i.displayfield){e(i.filtericon).show();break}if(null!==this.sortcolumn&&this.sortcolumn===i.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?e(i.sortasc).show():e(i.sortdesc).show()),"left"!=i.align&&"center"!=i.align&&!this.rtl||this.rtl&&"right"!=i.align&&"center"!=i.align){var s=e.jqx.isHidden(e(i.filtericon))?0:16;s+=e.jqx.isHidden(e(i.sortasc))?0:16,s+=e.jqx.isHidden(e(i.sortdesc))?0:16;var o=e(e(e(i.element).children()[0]).children()[0]);this.rtl?s>0?o.css("margin-left",4+s+"px"):o.css("margin-left","4px"):s>0?o.css("margin-right",4+s+"px"):o.css("margin-right","4px")}}},render:function(t){var i="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerText="",this.element.innerHTML=i,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var r=this.host.find("#verticalScrollBar"+this.element.id),s=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar=r.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=s.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("jqx-widget-header")),this.filter.addClass(this.toTP("jqx-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("jqx-grid-statusbar")),this.aggregates.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("jqx-grid-pager-top")),this.toppager.addClass(this.toTP("jqx-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns;var o=this.source.datafields;if(null==o&&this.source._source&&(o=this.source._source.datafields),o)for(var a=0;a<this.columns.length;a++){var l=this.columns[a];if(l&&l.cellsFormat&&l.cellsFormat.length>2)for(var n=0;n<o.length;n++)if(o[n].name==l.datafield&&!o[n].format){o[n].format=l.cellsFormat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showAggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var d=this,h=function(){d.content&&(d.content[0].scrollTop=0,d.content[0].scrollLeft=0),d.gridcontent&&(d.gridcontent[0].scrollLeft=0,d.gridcontent[0].scrollTop=0)};this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(e){return h(),!1}),!0!==t&&this._render()},_render:function(){var t=this;if(null!=t.dataview&&!t._loading){(25!=t.columnsHeight||t.columnGroups)&&t._measureElement("column"),t.filterable?t.filter[0].style.visibility="inherit":t.filter[0].style.visibility="hidden",t.rowinfo=new Array,t._removeHandlers(),null==t.columns?t.columns=new e.jqx.dataCollection(t.element):t._initializeColumns();var i=!1,r=!1;null!=t.width&&-1!=t.width.toString().indexOf("%")&&(i=!0),i?t.element.width=t.width:t.host.width(t.width),null!=t.height&&-1!=t.height.toString().indexOf("%")&&(r=!0),r?t.element.height=t.height:t.host.height(t.height),t._lastHostWidth=t.host.width(),t._lastHostHeight=t.host.height(),e.jqx.utilities.html(t.content,""),t.columnsheader=t.columnsheader||e('<div style="overflow: hidden;"></div>'),t.columnsheader.remove(),t.columnsheader.addClass(t.toTP("jqx-widget-header")),t.columnsheader.addClass(t.toTP("jqx-grid-header")),t.showHeader?t.columnsheader&&t.columnsheader.css("display","block"):t.columnsheader.css("display","none"),t.gridcontent=t.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),t.gridcontent.remove();var s=t.columnsHeight;s=t._preparecolumnGroups(),t.columnsheader.height(s),t.content.append(t.columnsheader),t.content.append(t.gridcontent),t._rendercolumnheaders(),t.tableheight=null,t.gridcontent.find("#contenttable"+t.element.id).remove(),null!=t.table&&(t.table.remove(),t.table=null),t.table=e('<div id="contenttable'+t.element.id+'" style="overflow: hidden; position: relative;"></div>'),t.gridcontent.addClass(t.toTP("jqx-grid-content")),t.gridcontent.addClass(t.toTP("jqx-widget-content")),t.gridcontent.append(t.table),t._renderrows(),t.filterable&&t._renderfilter(),t.pageable&&t._initpager(),t._arrange(),t.renderStatusBar&&t.renderStatusBar(t.statusbar),t.rendertoolbar&&t.rendertoolbar(t.toolbar),t.showAggregates&&t._updateaggregates(),t.disabled&&t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t._renderhorizontalscroll(),t._showicons(),t._addHandlers()}},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var t=this.gridlocalization.pagergotopagestring,i=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),r=(this.pagerHeight-17)/2;if(this.pagerdiv=this.pagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||e('<div style="width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();if(this.pagerRenderer){this.pagerdiv.children().remove(),this.toppager.children().remove();var s=this.pagerRenderer();null!=s&&this.pagerdiv.append(e(s)),this.pager.append(this.pagerdiv),null!=(s=this.pagerRenderer())&&this.toppagerdiv.append(e(s)),this.toppager.append(this.toppagerdiv)}else{this.pagerdiv.css("top",r),this.toppagerdiv.css("top",r);var o=function(r,s){var o=this,a=e('<div style="margin-right: 7px; width: 27px; height: 17px; float: right;"><input style="margin-top: 0px; text-align: right; width: 27px;" type="text"/></div>'),l=e('<div style="float: right; margin-right: 7px;"></div>'),n=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),d=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),h=e('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),c=e('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),u=e('<div style="margin-right: 7px; float: right;"></div>'),g=e('<div style="margin-right: 7px; float: right;"></div>'),p=e('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>');a.attr("disabled",o.disabled);var f=e('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');if(f[0].id="gridpagerlist"+s+o.element.id,o.removeHandler(n,"mousedown"),o.removeHandler(n,"mouseup"),o.removeHandler(n,"click"),o.removeHandler(d,"mousedown"),o.removeHandler(d,"mouseup"),o.removeHandler(d,"click"),o.removeHandler(h,"mousedown"),o.removeHandler(h,"mouseup"),o.removeHandler(h,"click"),o.removeHandler(c,"mousedown"),o.removeHandler(c,"mouseup"),o.removeHandler(c,"click"),o.rtl?(n.attr("title",o.gridlocalization.pagerpreviousbuttonstring),d.attr("title",o.gridlocalization.pagernextbuttonstring)):(d.attr("title",o.gridlocalization.pagerpreviousbuttonstring),n.attr("title",o.gridlocalization.pagernextbuttonstring)),e.jqx.browser.msie&&e.jqx.browser.version<8&&p.css("padding-top","3px"),this["pagerfirst"+s]=h,this["pagerlast"+s]=c,this["pagernext"+s]=n,this["pagerprevious"+s]=d,this["pagergotoinput"+s]=a,this["pagerdetails"+s]=u,this["pagershowrows"+s]=g,this["pagergotolabel"+s]=l,this["pagershowrowscombo"+s]=f,this["pagerbuttons"+s]=p,"default"==o.pagerMode){o.rtl?(c.attr("title",o.gridlocalization.pagerfirstbuttonstring),h.attr("title",o.gridlocalization.pagerlastbuttonstring)):(h.attr("title",o.gridlocalization.pagerfirstbuttonstring),c.attr("title",o.gridlocalization.pagerlastbuttonstring));var m=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");m.addClass(o.toThemeProperty("jqx-icon-arrow-first")),h.wrapInner(m);var v=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");v.addClass(o.toThemeProperty("jqx-icon-arrow-last")),c.wrapInner(v),o.rtl?(r.append(c),r.append(n),r.append(p),r.append(d),r.append(h)):(r.append(h),r.append(d),r.append(p),r.append(n),r.append(c)),c.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),h.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme});var w=o.rtl?"right":"left";p.css("float",w),c.css("float",w),h.css("float",w),n.css("float",w),d.css("float",w),u.css("float",o.rtl?"left":"right"),o.rtl?(u.css("margin-left","7px"),u.css("margin-right","0px")):(u.css("margin-left","0px"),u.css("margin-right","7px"))}else o.rtl||(r.append(n),r.append(d));n.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme}),d.jqxButton({cursor:"pointer",disabled:o.disabled,theme:o.theme});var y=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");y.addClass(o.toThemeProperty("jqx-icon-arrow-left")),d.wrapInner(y);var x=e("<div style='margin-left: 6px; width: 15px; height: 15px;'></div>");if(x.addClass(o.toThemeProperty("jqx-icon-arrow-right")),n.wrapInner(x),o.rtl||r.append(u),"default"!=o.pagerMode){o.rtl?(r.append(l),r.append(a),r.append(g),r.append(f),r.append(u),r.append(n),r.append(d)):(r.append(f),r.append(g),r.append(a),r.append(l));var b=o.pageSizeOptions;f.jqxDropDownList({_checkForHiddenParent:!1,rtl:o.rtl,disabled:o.disabled,source:b,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:44,height:16,theme:o.theme});for(var _=0,j=0;j<b.length;j++)this.pageSize>=b[j]&&(_=j);l[0].innerHTML=t,f.jqxDropDownList({selectedIndex:_});var q=a.find("input");q.addClass(o.toThemeProperty("jqx-input")),q.addClass(o.toThemeProperty("jqx-widget-content")),this.rtl&&q.css("direction","rtl");o=this;this.removeHandler(f,"select"),this.addHandler(f,"select",function(e){if(e.args){o.vScrollInstance&&o.vScrollInstance.setPosition(0);var t=e.args.index;o.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(t),o.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(t),o.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"),o.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse");var i=o.dataview.pagenum*o.dataview.pagesize,r=b[t],s=o.pageSize;o.pageSize=parseInt(r),isNaN(o.pageSize)&&(o.pageSize=10),r>=100?(o.pagershowrowscombotop.jqxDropDownList({width:55}),o.pagershowrowscombobottom.jqxDropDownList({width:55})):(o.pagershowrowscombotop.jqxDropDownList({width:44}),o.pagershowrowscombobottom.jqxDropDownList({width:44})),o.dataview.pagesize=o.pageSize;var a=Math.floor(i/o.dataview.pagesize);a===o.dataview.pagenum&&parseInt(r)===parseInt(s)||(o._raiseEvent("pageSizeChanged",{pagenum:a,oldpageSize:s,pageSize:o.dataview.pagesize}),o.goToPage(a)||(o.serverProcessing?o.updateBoundData("pager"):o.refresh()))}}),(a=a.find("input")).addClass(o.toThemeProperty("jqx-grid-pager-input")),a.addClass(o.toThemeProperty("jqx-rc-all")),this.removeHandler(a,"keydown"),this.removeHandler(a,"change"),o.addHandler(a,"keydown",function(e){if(e.keyCode>=65&&e.keyCode<=90)return!1;if("13"==e.keyCode){var t=a.val();return t=parseInt(t),isNaN(t)||o.goToPage(t-1),!1}}),o.addHandler(a,"change",function(){var e=a.val();e=parseInt(e),isNaN(e)||o.goToPage(e-1)})}g[0].innerHTML=i,o.addHandler(n,"mouseenter",function(){x.addClass(o.toThemeProperty("jqx-icon-arrow-right-hover"))}),o.addHandler(d,"mouseenter",function(){y.addClass(o.toThemeProperty("jqx-icon-arrow-left-hover"))}),o.addHandler(n,"mouseleave",function(){x.removeClass(o.toThemeProperty("jqx-icon-arrow-right-hover"))}),o.addHandler(d,"mouseleave",function(){y.removeClass(o.toThemeProperty("jqx-icon-arrow-left-hover"))}),o.addHandler(n,"mousedown",function(){x.addClass(o.toThemeProperty("jqx-icon-arrow-right-selected"))}),o.addHandler(n,"mouseup",function(){x.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected"))}),o.addHandler(d,"mousedown",function(){y.addClass(o.toThemeProperty("jqx-icon-arrow-left-selected"))}),o.addHandler(d,"mouseup",function(){y.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected"))}),"default"===o.pagerMode&&(o.addHandler(c,"mouseenter",function(){v.addClass(o.toThemeProperty("jqx-icon-arrow-last-hover"))}),o.addHandler(h,"mouseenter",function(){m.addClass(o.toThemeProperty("jqx-icon-arrow-first-hover"))}),o.addHandler(c,"mouseleave",function(){v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-hover"))}),o.addHandler(h,"mouseleave",function(){m.removeClass(o.toThemeProperty("jqx-icon-arrow-first-hover"))}),o.addHandler(c,"mousedown",function(){v.addClass(o.toThemeProperty("jqx-icon-arrow-last-selected"))}),o.addHandler(h,"mousedown",function(){m.addClass(o.toThemeProperty("jqx-icon-arrow-first-selected"))}),o.addHandler(c,"mouseup",function(){v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected"))}),o.addHandler(h,"mouseup",function(){m.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected"))})),o.addHandler(e(document),"mouseup.pagerbuttons"+s+this.element.id,function(){x.removeClass(o.toThemeProperty("jqx-icon-arrow-right-selected")),y.removeClass(o.toThemeProperty("jqx-icon-arrow-left-selected")),v&&(v.removeClass(o.toThemeProperty("jqx-icon-arrow-last-selected")),m.removeClass(o.toThemeProperty("jqx-icon-arrow-first-selected")))}),o.addHandler(n,"click",function(){n.jqxButton("disabled")||(o.rtl?o.goToPrevPage():o.goToNextPage())}),o.addHandler(d,"click",function(){d.jqxButton("disabled")||(o.rtl?o.goToNextPage():o.goToPrevPage())}),"default"===this.pagerMode&&(o.addHandler(h,"click",function(){if(!h.jqxButton("disabled"))if(o.rtl){var e=o.dataview.totalrecords,t=Math.ceil(e/o.pageSize);o.goToPage(t-1)}else o.goToPage(0)}),o.addHandler(c,"click",function(){if(!c.jqxButton("disabled"))if(o.rtl)o.goToPage(0);else{var e=o.dataview.totalrecords,t=Math.ceil(e/o.pageSize);o.goToPage(t-1)}}))};this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),o.call(this,this.pagerdiv,"bottom"),o.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails()}},_updatepagertheme:function(){},goToPage:function(t,i){if(this._loading)return!1;if(void 0!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;if(!this.endroweditbykey(this.editKey))return!1}if(null!=t&&void 0!=t||(t=0),-1==t&&(t=0),t<0)return!1;var r=this.dataview.totalrecords,s=this.dataview.pagenum,o=Math.ceil(r/this.pageSize);return t>=o&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),t>0&&(t=o-1)),this.dataview.pagenum!=t&&(this.pageable&&(this.dataview.pagenum=t,this._raiseEvent("pageChanged",{pagenum:t,oldpagenum:s,pageSize:this.dataview.pagesize})),this.serverProcessing?this.updateBoundData("pager",i):(this.refresh(),i&&e.isFunction(i)&&i()),!0)},goToPrevPage:function(e){if(this.dataview.pagenum>0)return this.goToPage(this.dataview.pagenum-1,e);if("default"!=this.pagerMode&&"advanced"!=this.pagerMode){var t=this.dataview.totalrecords,i=Math.ceil(t/this.pageSize);return this.goToPage(i-1,e)}return!1},goToNextPage:function(e){var t=this.dataview.totalrecords;this.summaryrows&&(t+=this.summaryrows.length);var i=Math.ceil(t/this.pageSize);return this.dataview.pagenum<i-1?this.goToPage(this.dataview.pagenum+1,e):"default"!=this.pagerMode&&"advanced"!=this.pagerMode&&this.goToPage(0,e)},updatepagerdetails:function(){if(this.pageable){var t=this;if(!this.serverProcessing)if(this.source.hierarchy){var i=t._names(),r=0,s=function(o,a){for(var l=0;l<a.length;l++)0==t.dataview.filters.length&&(a[l]._visible=!0),!1!==a[l]._visible&&r++,t.treeGrid&&"root"==t.treeGrid.pageSizeMode||a[l].records&&(a[l][i.expanded]||a[l][i.leaf])&&!1!==a[l]._visible&&(s(o+1,a[l].records),this.treeGrid&&e(this.treeGrid).jqxTreeGrid("showSubAggregates")&&0!=o&&r--)};s(0,this.dataview.rows),this.dataview.totalrecords=r}else this.dataview.totalrecords=this.dataview.rows.length;var o=this.dataview.pagenum*this.pageSize,a=(this.dataview.pagenum+1)*this.pageSize;a>=this.dataview.totalrecords&&(a=this.dataview.totalrecords);var l=this.dataview.totalrecords;o++;var n=Math.ceil(l/this.dataview.pagesize);if(n>=1&&n--,n++,"root"==this.pageSizeMode&&((n=Math.ceil(this.rootRecordsLength/this.dataview.pagesize))>=1&&n--,n++,l=this.rootRecordsLength,this.dataview.totalrecords=this.rootRecordsLength),"default"!=this.pagerMode){if(this.pagergotoinputbottom){var d=this.pagergotoinputbottom.find("input");d.val(this.dataview.pagenum+1),d.attr("title","1 - "+n),(d=this.pagergotoinputtop.find("input")).val(this.dataview.pagenum+1),d.attr("title","1 - "+n)}}else{var h="",c=this.pagerButtonsCount;0!=c&&c||(c=5);var u=0;for(this.rtl&&(u=c-1);this.rtl&&u>=0||!this.rtl&&u<c;){var g=1+u,p=this.dataview.pagenum/c;g+=Math.floor(p)*c;f=this.toTP("jqx-grid-pager-number");if(f+=" "+this.toTP("jqx-rc-all"),g>n&&!this.rtl)break;if(this.rtl&&g>n)u--;else{if(this.rtl||0==u&&g>c&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>"),this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl){if(u===c-1){f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),n>=1+g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>")}this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>"}else if(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>",u===c-1){f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),n>=1+g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>")}if(this.rtl){var f=this.toTP("jqx-grid-pager-number");f+=" "+this.toTP("jqx-rc-all"),0==u&&g>c&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>")}this.rtl?u--:u++}}if(!this.pagerbuttonsbottom)return;v=this.pagerbuttonsbottom.find("a");this.removeHandler(v,"click"),this.removeHandler(v,"mouseenter"),this.removeHandler(v,"mouseleave");v=this.pagerbuttonstop.find("a");this.removeHandler(v,"click"),this.removeHandler(v,"mouseenter"),this.removeHandler(v,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=h,this.pagerbuttonstop[0].innerHTML=h,this.disabled&&this.host.find(".jqx-grid-pager-number").css("cursor","default");var m=function(){v.click(function(i){if(!t.disabled){var r=e(i.target).attr("data-page");t.goToPage(parseInt(r)-1)}}),v.mouseenter(function(i){t.disabled||e(i.target).addClass(t.toTP("jqx-fill-state-hover"))}),v.mouseleave(function(i){t.disabled||e(i.target).removeClass(t.toTP("jqx-fill-state-hover"))})};if("both"===this.pagerPosition||"bottom"===this.pagerPosition){v=this.pagerbuttonsbottom.find("a");m()}if("both"===this.pagerPosition||"top"===this.pagerPosition){var v=this.pagerbuttonstop.find("a");m()}}if(0==a&&a<o&&(o=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=l+this.gridlocalization.pagerrangestring+a+"-"+o,this.pagerdetailstop[0].innerHTML=l+this.gridlocalization.pagerrangestring+a+"-"+o):(this.pagerdetailsbottom[0].innerHTML=o+"-"+a+this.gridlocalization.pagerrangestring+l,this.pagerdetailstop[0].innerHTML=o+"-"+a+this.gridlocalization.pagerrangestring+l)),"default"==this.pagerMode){var w=this.pagerbuttonsbottom.width()+e(this.pagerdetailsbottom).width()+160;this.pagerdiv.css("min-width",w),this.toppagerdiv.css("min-width",w)}o>a&&this.goToPrevPage()}},_preparecolumnGroups:function(){var e=this.columnsHeight;if(this.columnGroups){if(this.columnshierarchy=new Array,this.columnGroups.length){for(var t=this,i=0;i<this.columnGroups.length;i++)this.columnGroups[i].parent=null,this.columnGroups[i].groups=null;for(i=0;i<this.columns.records.length;i++)this.columns.records[i].parent=null,this.columns.records[i].groups=null;for(var r=function(e){for(var i=0;i<t.columnGroups.length;i++){var r=t.columnGroups[i];if(r.name===e)return r}return null},i=0;i<this.columnGroups.length;i++)(d=this.columnGroups[i]).groups||(d.groups=null),d.parentGroup&&(d.parentgroup=d.parentGroup),d.parentgroup&&(s=r(d.parentgroup))&&(d.parent=s,s.groups||(s.groups=new Array),-1===s.groups.indexOf(d)&&s.groups.push(d));for(i=0;i<this.columns.records.length;i++)if((d=this.columns.records[i]).columngroup){var s=r(d.columngroup);s&&(s.groups||(s.groups=new Array),d.parent=s,-1===s.groups.indexOf(d)&&s.groups.push(d))}for(var o=0,i=0;i<this.columns.records.length;i++){a=d=this.columns.records[i];for(d.level=0;a.parent;)a=a.parent,d.level++;var a=d,l=d.level;for(o=Math.max(o,d.level);a.parent;)(a=a.parent)&&(a.level=--l)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),!e.groups)return new Array;for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=n(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},i=0;i<this.columnGroups.length;i++){var d=this.columnGroups[i],h=n(d);d.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return e=parseInt(e),t=parseInt(t),e<t?-1:e>t?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columnGroupslevel=1+o,e=this.columnGroupslevel*this.columnsHeight}return e},wheel:function(e,t){if(t.autoheight&&"hidden"==t.hScrollBar.css("visibility"))return e.returnValue=!0,!0;var i=0;if(e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),void 0!=e.stopPropagation&&e.stopPropagation()),!!r&&(r=!1,e.returnValue=r,r)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){t=this.vScrollInstance.value;if(e<0?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20),t!=(i=this.vScrollInstance.value))return!0}else if("hidden"!=this.hScrollBar.css("visibility")){var t=this.hScrollInstance.value;e>0?this.hScrollInstance.value>20?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max);var i=this.hScrollInstance.value;if(t!=i)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(e(window),"jqxReady."+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var t="mousedown";this.isTouchDevice()&&(t=e.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,t),this.removeHandler(this.table,"selectstart."+this.element.id),e.jqx.browser.msie&&e.jqx.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){var t=this;this._mousewheelfunc=this._mousewheelfunc||function(e){return t.wheel(e,t),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(e){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(i){return!!t.enableBrowserSelection||(!(!t.filterable||!e(i.target).ischildof(t.filterrow))||(!!(t.rowDetails&&e(i.target).parents("[data-role=details]").length>0)||void 0!=t.editKey&&void 0))}),this.addHandler(e(window),"jqxReady."+this.element.id,function(){t._updatecolumnwidths(),t.refresh()}),this.editable&&this.addHandler(e(document),"mousedown.gridedit"+this.element.id,function(i){if(t.editable&&t.editSettings.saveOnBlur&&null!=t.editKey&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var r=t.host.coord(),s=t.host.width(),o=t.host.height(),a=!1,l=!1;if((i.pageY<r.top||i.pageY>r.top+o)&&(a=!0,l=!0),(i.pageX<r.left||i.pageX>r.left+s)&&(a=!0,!0),a){var n=t._editors;if(n)for(var d=0;d<n.length;d++){var h=n[d].editor,c=function(t){var r=e(t.children()[0]).data();if(r&&!r.jqxWidget&&(r=t.data()),r||(r=t.data()),r.jqxWidget&&r.jqxWidget.container&&"block"==r.jqxWidget.container[0].style.display){var s=r.jqxWidget,o=s.container.coord().top,n=s.container.coord().top+s.container.height();return!(!l||!(i.pageY<o||i.pageY>n)||(a=!0,s.close(),0))}}(h),u=h.attr("aria-owns");if(u){if(u==document.activeElement.id)return!0;if(e(document.activeElement).ischildof(e("#"+u)))return!0}else if(u=h.children().attr("aria-owns")){if(u==document.activeElement.id)return!0;if(e(document.activeElement).ischildof(e("#"+u)))return!0}if(!1===c)return}}a&&t.endroweditbykey(t.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(e){e.preventDefault});var i=this.isTouchDevice();this.vScrollInstance.valueChanged=function(e){t._timer&&clearTimeout(t._timer),i?t.table&&(t.table[0].style.top=0-t.vScrollInstance.value+"px"):t._timer=setTimeout(function(){t.table&&(t.table[0].style.top=0-t.vScrollInstance.value+"px")},5)},this.hScrollInstance.valueChanged=function(e){t._timer&&clearTimeout(t._timer),i?t.table&&t._renderhorizontalscroll():t._timer=setTimeout(function(){t.table&&t._renderhorizontalscroll()},5)};var r="mousedown";this.isTouchDevice()&&(r=e.jqx.mobile.getTouchEventName("touchend"),e.jqx.browser.msie&&e.jqx.browser.version<10&&(r="mousedown"));var s=function(e,i){for(var r=null,s=t._table.coord(),o=s.top,a=s.left,l=t._table[0].rows,n=0;n<l.length;n++)for(var d=l[n].cells,h=0;h<d.length;h++){var c=d[h],u=c.offsetLeft+a,g=c.offsetTop+o,p=c.offsetWidth,f=c.offsetHeight;if(0!==p&&0!==f){if(!(g<=i&&i<g+f))break;if(u<=e&&e<u+p){r=c;break}}}return r},o=function(){if(t.hoveredRow){var e=t.hoveredRow[0].cells,i=function(e){for(var i=0;i<e.length;i++){var r=e[i],s=r.className;s=(s=s.replace(" "+t.toTP("jqx-fill-state-hover"),"")).replace(" "+t.toTP("jqx-grid-cell-hover"),""),r.className=s}};i(e),t._pinnedTable&&e.length>0&&i(t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells)}t.hoveredRow=null};this.addHandler(this.table,"mouseleave",function(e){o(),t.wrapper&&(t.wrapper.parent().removeAttr("tabindex",0),t.wrapper.removeAttr("tabindex",1),t.content.removeAttr("tabindex",2))});var a=function(e){if(!t.enableHover)return!0;if(t.hoveredRow=e,!e)return!0;var i=e[0].cells,r=t.rowDetails&&!t.treeGrid&&!t.treeGrid?1:0,s=0;r>0&&t.rtl&&(r=0,s=1);for(a=r;a<i.length-s;a++)(l=i[a]).className+=" "+t.toTP("jqx-fill-state-hover")+" "+t.toTP("jqx-grid-cell-hover");if(t._pinnedTable&&t._pinnedTable[0].rows.length)for(var o=t._pinnedTable[0].rows[t.hoveredRow[0].rowIndex].cells,a=r;a<o.length-s;a++){var l=o[a];l.className+=" "+t.toTP("jqx-fill-state-hover")+" "+t.toTP("jqx-grid-cell-hover")}};t.isTouchDevice()&&(t.enableHover=!1),this.addHandler(this.table,"mousemove",function(i){var r=i.pageX,l=i.pageY;if(t.disabled)return!0;if(!t.enableHover)return!0;if(t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling())return!0;var n=s(r,l);if(!n)return!0;var d=e(n).parent();return o(),!(!t.rowDetails||!t.treeGrid||"row-details"!=d.attr("data-role"))||(!(!t.renderedRecords||0!==t.renderedRecords.length)||(null!=t.editKey&&t.editKey===d.attr("data-key")||(a(d),!0)))}),this.addHandler(this.host,"keydown",function(e){return t._handleKey(e)}),e.jqx.browser.msie&&e.jqx.browser.version<9&&this.addHandler(this.table,"dblclick",function(e){t.table.trigger("mousedown",e)}),this.addHandler(this.table,r,function(i){i.target;var r=null;if(t.disabled)return!0;if(!(t.touchmode&&i.originalEvent&&i.originalEvent._pageX)){t.table.coord();var o=i.pageX,l=i.pageY;if(e.jqx.browser.msie&&e.jqx.browser.version<9&&arguments&&2==arguments.length&&(o=arguments[1].pageX,l=arguments[1].pageY),t.isTouchDevice()){var n=e.jqx.position(i);o=n.left,l=n.top,(isNaN(o)||isNaN(l))&&(o=(n=e.jqx.position(i.originalEvent)).left,l=n.top)}r=s(o,l);var d=e(r).parent(),h=d.attr("data-key");if(t.rowDetails&&t.treeGrid&&"row-details"==d.attr("data-role"))return!0;var c=function(){t.enableBrowserSelection||(i.preventDefault&&i.preventDefault(),i.stopPropagation()),t.host.focus()};if(void 0!==h){var u=e(r).index(),g=t.columns.records[u];if(h==t.editKey){if(!t.editSettings.editSingleCell)return!0;if(t.clickedTD==r)return!0;if(null!=t.editKey&&t.editSettings.saveOnSelectionChange&&!t.endroweditbykey(t.editKey))return!0}else if(null!=t.editKey&&t.editSettings.saveOnSelectionChange&&!t.endroweditbykey(t.editKey))return!0;if(t.clickedTD=r,(w=t.rowinfo[h])&&w.group)return!0;var p=!1;if(w){var f=t.getrowdisplayindex(w.row),m=t.getrowindex(w.row);t._raiseEvent("rowClick",{index:f,boundIndex:m,key:h,row:w.row,originalEvent:i,dataField:g.datafield});var v=(new Date).getTime();t.clickTime||(t.clickTime=new Date),t._lastSelectedKey==h&&v-t.clickTime.getTime()<300&&(t._raiseEvent("rowDoubleClick",{index:f,boundIndex:m,key:h,row:w.row,originalEvent:i,dataField:g.datafield}),p=!0,i.preventDefault&&i.preventDefault())}if(t.clickTime=new Date,r.className.indexOf("jqx-grid-group")>=0)w.expanded?t.hidedetailsbykey(h):t.showdetailsbykey(h);else if(i.target&&i.target.className.indexOf&&i.target.className.indexOf("jqx-grid-group")>=0&&t.treeGrid)w.expanded?t.treeGrid.collapseRow(h):t.treeGrid.expandRow(h),a(t._getuirow(h)),i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault();else{if(!(i.target&&i.target.className.indexOf&&i.target.className.indexOf("checkbox")>=0&&t.treeGrid)){var u=e(r).index(),g=t.columns.records[u];if(i.stopPropagation&&i.stopPropagation(),t.editable&&null==t.editKey&&t._lastSelectedKey==h&&t.editSettings.editOnDoubleClick&&p){t.beginroweditbykey(h,g);return!0}if(t.isTouchDevice()&&t.scrolled&&new Date-t.scrolled<500)return t.enableBrowserSelection||i.preventDefault&&i.preventDefault(),!1;if("singlerow"===t.selectionMode&&"custom"!==t.selectionMode)return t.selectrowbykey(h,"mouse",!1),t._lastSelectedKey=h,t._updateSelection(),i.preventDefault&&i.preventDefault(),c(),!0;if("custom"!==t.selectionMode&&(i.ctrlKey||i.metaKey||t.clearSelection(!1),i.shiftKey&&t._lastSelectedKey)){var w=t.rowinfo[t._lastSelectedKey];t._doSelection(t._lastSelectedKey,!0,!1);var y=e(t._table.children()[1]).children("[data-key="+t._lastSelectedKey+"]").index(),x=d.index();return t._selectRange(x,y),t.selectrowbykey(h,"mouse",!1),t._updateSelection(),i.preventDefault&&i.preventDefault(),c(),!0}return t._lastSelectedKey=h,t.clickTime=new Date,"custom"===t.selectionMode||(w&&(w.selected?t.unselectrowbykey(h,"mouse",!1):t.selectrowbykey(h,"mouse",!1),c()),t._updateSelection(),t.enableBrowserSelection||i.preventDefault&&i.preventDefault(),!0)}w.checked?t.treeGrid.uncheckRow(h):t.treeGrid.checkRow(h),a(t._getuirow(h)),i.stopPropagation&&i.stopPropagation()}}}})},_updateSelection:function(){var t=this,i=e(t._table.children()[1]).children(),r=t._pinnedTable?e(t._pinnedTable.children()[1]).children():null,s=t.rowDetails&&!t.treeGrid?1:0,o=0;s>0&&t.rtl&&(s=0,o=1);for(var a=0;a<i.length;a++){var l=i[a].cells;if(r)var n=r[a].cells;var d=null;if(i[a].getAttribute&&(d=i[a].getAttribute("data-key")),t.rowinfo[d]&&"none"!==t.selectionMode)if(t.rowinfo[d].selected)for(h=s;h<l.length-o;h++){c=l[h];e(c).addClass(t.toTP("jqx-grid-cell-selected")+" "+t.toTP("jqx-fill-state-pressed")),n&&e(n[h]).addClass(t.toTP("jqx-grid-cell-selected")+" "+t.toTP("jqx-fill-state-pressed"))}else for(var h=s;h<l.length-o;h++){var c=l[h];if(n)var u=n[h];var g=c.className;g=(g=(g=(g=g.replace(" jqx-fill-state-pressed","")).replace(" jqx-fill-state-pressed-"+t.theme,"")).replace(" jqx-grid-cell-selected","")).replace(" jqx-grid-cell-selected-"+t.theme,""),c.className=g,u&&(u.className=g)}}},_selectRange:function(t,i){var r=e(e(this._table.children()[1]).children()[i]),s=this;if(t>i)for(var o=i,a=r;o<t;){l=(a=a.next()).attr("data-key");s._doSelection(l,!0,!1),o++}else if(t<i)for(var o=i,a=r;o>t;){var l=(a=a.prev()).attr("data-key");this._doSelection(l,!0,!1),o--}},_getuikey:function(t,i){var r=null,s=e(this._table.children()[1]).children();if(r=e(s[t]).attr("data-key"),e(s[t]).attr("data-role")){var o=e(s[t]);if("next"==i){for(;o;)if((o=o.next())&&!(a=o.attr("data-role")))return r=o.attr("data-key")}else if("prev"==i)for(;o;)if(o=o.prev()){var a=o.attr("data-role");if(!a)return r=o.attr("data-key")}return null}return r},getRows:function(){return this.source.records},getView:function(){var t=this,i=this._names(),r=new Array,s=function(r,o){if(o)for(var a=0;a<o.length;a++)if(o[a]&&!1!==o[a]._visible){var l=e.extend({},o[a]);r.push(l),o[a][i.expanded]?(l.records=new Array,s(l.records,o[a].records)):t.dataview.filters.length>0&&(l.records=new Array,s(l.records,o[a].records))}};return s(r,this.dataViewRecords),r},getKeys:function(){for(var e=new Array,t=this.source.records,i=0;i<t.length;i++)e.push(t[i].uid);return e},getKey:function(e){var t=this.getRows();return t?t[e].uid:-1},_getkey:function(t){if(this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);var i=null,r=function(){var i=e(this._table.children()[1]).children(),r=null,s=0;if(this.pageable&&(s-=this.dataview.pagenum*this.dataview.pagesize),this.groups.length>0){for(var o=0,a=0;a<i.length;a++){var l=e(i[a]);if(!(l.children()[0].getAttribute("colspan")>0)){if(o===s+t)return r=l.attr("data-key");o++}}return r}if(this.rowDetails)for(var o=0,a=0;a<i.length;a++){if(o===t+s)return r=e(i[a]).attr("data-key");a%2==1&&o++}else r=e(i[s+t]).attr("data-key");return r};if(null==(i=r.call(this))&&this.pageable){var s=Math.floor(t/this.dataview.pagesize);if(this.dataview.pagenum!=s){var o=this.getRows()[t];if(o&&null!=o.uid)return o.uid;if(isNaN(s))return null;this.goToPage(s),i=r.call(this)}}return i},_getuirow:function(t){try{var i=e(this._table.children()[1]).children("[data-key="+t+"]");if(i.length>0)return i}catch(i){for(var r=e(this._table.children()[1]).children(),s=0;s<r.length;s++){var o=r[s],a=o.getAttribute("data-key");if(t==a)return e(o)}return null}return null},_getpinneduirow:function(t){if(!this._pinnedTable)return null;try{var i=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(i.length>0)return i}catch(i){for(var r=e(this._pinnedTable.children()[1]).children(),s=0;s<r.length;s++){var o=r[s],a=o.getAttribute("data-key");if(t==a)return e(o)}return null}return null},_names:function(){var e={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return e;var t=this.source._source.hierarchy.reservedNames;return t||e},_getMatches:function(t,i){if(void 0==t||0==t.length)return-1;var r=this.renderedRecords;void 0!=i&&(r=r.slice(i));var s=0;if(this.rowDetails&&!this.treeGrid&&s++,s<this.columns.records.length)var o=this.columns.records[s].datafield;else new Array;var a=new Array;return e.each(r,function(i){var r=this[o];r||(r=""),e.jqx.string.startsWithIgnoreCase(r.toString(),t)&&a.push(this.uid)}),a},_handleKey:function(t){if(this._loading)return!0;if(e(t.target).ischildof(this.filter))return!0;if(e(t.target).ischildof(this.toolbar))return!0;if(e(t.target).ischildof(this.statusbar))return!0;var i=this._names(),r=this,s=t.charCode?t.charCode:t.keyCode?t.keyCode:0,o=this._lastSelectedKey,a=(this.rowinfo[o],this._getuirow(o)),l=t.shiftKey&&"singlerow"!=this.selectionMode,n=t.ctrlKey||t.metaKey;if(a){if(this.handleKeyboardNavigation&&this.handleKeyboardNavigation(s))return!0;if(this.editable&&void 0==this.editKey&&113===s&&this.editSettings.editOnF2&&this.beginroweditbykey(a.attr("data-key")),void 0==this.editKey&&!n&&!l&&this.incrementalSearch&&!(s>=33&&s<=40)){this._searchString||(this._searchString=""),(8==s||46==s)&&this._searchString.length>=1&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var d=String.fromCharCode(s),h=!isNaN(parseInt(d));if(s>=65&&s<=97||h||8==s||32==s||46==s){if(t.shiftKey||(d=d.toLocaleLowerCase()),8!=s&&32!=s&&46!=s&&(this._searchString.length>0&&this._searchString.substr(0,1)==d||(this._searchString+=d)),32==s&&(this._searchString+=" "),this._searchTime=new Date,(o=this.getSelection()).length>=1){for(var c=o[0].uid,u=-1,g=0;g<this.renderedRecords.length;g++)if(this.renderedRecords[g].uid==c){u=g;break}if(0==(p=this._getMatches(this._searchString,u)).length||p.length>0&&p[0]==c)p=this._getMatches(this._searchString)}else var p=this._getMatches(this._searchString);if(p.length>0){if((o=this.getSelection()).length>=1){var f=p.indexOf(o[0].uid);if(-1==f)this.clearSelection(!1),this.selectrowbykey(p[0]);else{var m=f+1;m>=p.length&&(m=0),this.clearSelection(!1),this.selectrowbykey(p[m])}}else this.clearSelection(!1),this.selectrowbykey(p[0]);this._lastSearchString=this._searchString}}void 0!=this._searchTimer&&clearTimeout(this._searchTimer),27!=s&&13!=s||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){r._searchString="",r._lastSearchString=""},500)}if(void 0!=this.editKey){if(27===s&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===s&&this.editSettings.saveOnEnter){if(t.target&&"div"!=t.target.nodeName.toLowerCase()&&"input"!=t.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){var v=this.columns.records.indexOf(this.editColumn);if(9==s&&v<this.columns.records.length-1&&!t.shiftKey){for(var w=this.editKey,y=null,g=v+1;g<this.columns.records.length;g++)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){y=this.columns.records[g];break}y&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(w,y))}else if(9==s&&t.shiftKey&&v>0){for(var w=this.editKey,x=null,g=v-1;g>=0;g--)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){x=this.columns.records[g];break}x&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(w,x))}if(9==s){var b=this.rowinfo[this.editKey],u=this.getrowindex(b),a=this._getuirow(this.editKey);if(t.shiftKey||y){if(!x&&t.shiftKey){for(var _=null,g=this.columns.records.length-1;g>=0;g--)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){_=this.columns.records[g];break}if(_){for(;a;)if((a=a.prev())&&!(L=a.attr("data-role"))){q=a.attr("data-key");break}if(q){this.clearSelection(!1),this._lastSelectedKey=q;var b=this.rowsByKey[q],u=this.getrowindex(b),j=this.getrowdisplayindex(b);this._raiseEvent("rowSelect",{key:q,index:j,boundIndex:u,row:this.rowsByKey[q]}),this.endroweditbykey(this.editKey,!1),this._doSelection(q,!0,!0),this.beginroweditbykey(q,_)}}}}else{for(var _=null,g=0;g<this.columns.records.length;g++)if(this.columns.records[g].editable&&!this.columns.records[g].hidden){_=this.columns.records[g];break}if(_){for(;a;)if((a=a.next())&&!(L=a.attr("data-role"))){var q=a.attr("data-key");break}if(q){this.clearSelection(!1),this._lastSelectedKey=q;var b=this.rowsByKey[q],u=this.getrowindex(b),j=this.getrowdisplayindex(b);this._raiseEvent("rowSelect",{key:q,index:j,boundIndex:u,row:this.rowsByKey[q]}),this.endroweditbykey(this.editKey,!1)?(this._doSelection(q,!0,!0),this.beginroweditbykey(q,_)):this.beginroweditbykey(this.editKey,_)}}}return!1}}return!0}if(t.ctrlKey||t.metaKey){var S=String.fromCharCode(s).toLowerCase();if(("c"==S||"x"==S)&&(o=this.getSelection()).length>=1){for(var T="",C=0;C<this.renderedRecords.length;C++)for(var z=this.renderedRecords[C],g=0;g<o.length;g++)if((b=o[g]).uid===z.uid){for(var P=0;P<this.columns.records.length;P++)T+=this.getCellTextByKey(b.uid,this.columns.records[P].displayfield),P<this.columns.records.length-1&&(T+="\t");T+="\r\n";break}if(""!=T&&(T=T.substring(0,T.length-1)),window.clipboardData)window.clipboardData.setData("Text",T);else{var k=e('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');k.val(T),e("body").append(k),k.select(),setTimeout(function(){document.designMode="off",k.select(),k.remove()},100)}}}if(32===s&&this.treeGrid&&this.treeGrid.checkboxes){if((o=this.getSelection()).length>1){for(g=0;g<o.length;g++){var B=o[g].uid;this.rowinfo[B].checked?this.treeGrid.uncheckRow(B,!1):this.treeGrid.checkRow(B,!1)}return this._renderrows(),!1}if(c=a.attr("data-key"))return this.rowinfo[c].checked?this.treeGrid.uncheckRow(c):this.treeGrid.checkRow(c),!1}var H=a.index(),D=function(t){var i=null,s=e(r._table.children()[1]).children().length-1,o=e(e(r._table.children()[1]).children()[s]),a=o.attr("data-role");if(a){for(;o;)if((o=o.prev())&&!(a=o.attr("data-role"))){i=o.attr("data-key");break}}else i=o.attr("data-key");return"all"==t?{row:o,key:i}:i},I=function(t){var i=null,s=e(e(r._table.children()[1]).children()[0]),o=s.attr("data-role");if(o){for(;s;)if((s=s.next())&&!(o=s.attr("data-role"))){i=s.attr("data-key");break}}else i=s.attr("data-key");return"all"==t?{row:s,key:i}:i},c=null,F=function(){if(n||l||r.clearSelection(!1),33==s||37==s){t=H;(c=r._getuikey(t,"prev"))||(c=I())}else if(34==s||39==s){t=H;(c=r._getuikey(t,"next"))||(c=D())}else 38==s?c=D():40==s&&(c=I());r._lastSelectedKey=c;var e=r.rowsByKey[c],t=r.getrowindex(e),i=r.getrowdisplayindex(e);r._raiseEvent("rowSelect",{key:c,index:i,boundIndex:t,row:r.rowsByKey[c]}),r._doSelection(c,!0,!0),r.host.focus()};if(this.treeGrid&&this.rtl&&(37==s?s=39:39==s&&(s=37)),36==s||n&&38==s)return function(){r.clearSelection(!1);var e=I();l||n?r._selectRange(a.index(),0):r._lastSelectedKey=e,r.selectrowbykey(e,"keyboard")}(),!1;if(35==s||n&&40==s)return function(){r.clearSelection(!1);var e=D("all"),t=e.key;l||n?r._selectRange(a.index(),e.row.index()):r._lastSelectedKey=t,r.selectrowbykey(t,"keyboard")}(),!1;if(33==s||37==s){c=a.attr("data-key");if(this.rowDetails&&37==s&&!this.treeGrid)return this.hidedetailsbykey(c),!1;if(this.treeGrid&&37==s){if(this.rowinfo[c].row&&!this.rowinfo[c].row[i.parent]&&!this.rowinfo[c][i.leaf]&&!this.rowinfo[c].expanded)return!1;if(this.rowinfo[c].expanded&&!this.rowinfo[c][i.leaf])return this.treeGrid.collapseRow(c),!1;if(this.rowinfo[c].row&&this.rowinfo[c].row[i.parent]&&(c=this.rowinfo[c].row[i.parent].uid),this.rowinfo[c][i.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToNextPage(F):this.goToPrevPage(F),!1;if(this.treeGrid&&this.pageable&&33==s)return this.goToPrevPage(F),!1}else if(34==s||39==s){c=a.attr("data-key");if(this.rowDetails&&39==s&&!this.treeGrid)return this.showdetailsbykey(c),!1;if(this.treeGrid&&39==s){if(this.rowinfo[c][i.leaf])return!1;if(!this.rowinfo[c].expanded)return this.treeGrid.expandRow(c),!1;if(this.rowinfo[c].row&&this.rowinfo[c].row.records&&this.rowinfo[c].row.records.length>0)if(this.dataview.filters.length>0){for(var M=this.rowinfo[c].row.records,g=0;g<M.length;g++)if(M[g]._visible){c=M[g].uid;break}}else c=this.rowinfo[c].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToPrevPage(F):this.goToNextPage(F),!1;if(this.treeGrid&&this.pageable&&34==s)return this.goToNextPage(F),!1}else if(38==s){for(;a;)if((a=a.prev())&&!(L=a.attr("data-role"))){c=a.attr("data-key");break}if(this.pageable&&null==c)return this.goToPrevPage(F),!1}else if(40==s){for(;a;)if((a=a.next())&&!(L=a.attr("data-role"))){c=a.attr("data-key");break}if(this.pageable&&null==c)return this.goToNextPage(F),!1}if(null!=c){if(n||l||this.clearSelection(!1),this.rowinfo[c]&&this.rowinfo[c].selected&&(n||l)){this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=c;var b=this.rowsByKey[c],u=this.getrowindex(b);r._updateSelection();j=this.getrowdisplayindex(b);return this._raiseEvent("rowUnselect",{key:c,index:j,boundIndex:u,row:b}),!1}this._lastSelectedKey=c;var b=this.rowsByKey[c],u=this.getrowindex(b);this._doSelection(c,!0,!1),r._updateSelection();j=this.getrowdisplayindex(b);if(this._raiseEvent("rowSelect",{key:c,index:j,boundIndex:u,row:b}),this.treeGrid)if(37==s){R=null;if((a=this._getuirow(c))&&((L=a.attr("data-role"))||(R=a.attr("data-key"))),this.pageable&&null==R&&this.dataview.pagenum>0)for(;null==this._getuirow(c)&&this.dataview.pagenum>0;)this.goToPrevPage()}else if(39==s){var R=null;if(a=this._getuirow(c)){var L=a.attr("data-role");L||(R=a.attr("data-key"))}this.pageable&&null==R&&this.goToNextPage()}return!1}}},_selection:function(e){if("selectionStart"in e[0]){var t=e[0],i=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:i,text:t.value}}var r=document.selection.createRange();if(null==r)return{start:0,end:t.value.length,length:0};var s=e[0].createTextRange(),o=s.duplicate();s.moveToBookmark(r.getBookmark()),o.setEndPoint("EndToStart",s);i=r.text.length;return{start:o.text.length,end:o.text.length+r.text.length,length:i,text:r.text}},_doSelection:function(e,t,i){if(null!=e){"singlerow"===this.selectionMode&&this.clearSelection(!1);var r=this.rowinfo[e];r?(r.selected=t,this.ensurerowvisiblebykey(e)):(this.ensurerowvisiblebykey(e),(r=this.rowinfo[e])?r.selected=t:this.rowinfo[e]={selected:t}),"none"!=this.selectionMode&&!1!==i&&this._renderrows()}else this.clearSelection()},clearSelection:function(e){if(this.rowinfo){var t=this.getRows();for(var i in this.rowinfo){var r=this.rowinfo[i];if(r.selected){r.selected=!1;var s=t.indexOf(r.row),o=this.getrowdisplayindex(r.row);this._raiseEvent("rowUnselect",{key:i,index:o,boundIndex:s,row:r.row})}}}!1!==e&&this._renderrows()},exportData:function(i){if(!e.jqx.dataAdapter.ArrayExporter){if(!this.treeGrid)throw"jqxDataTable: Missing reference to jqxdata.export.js!";throw"jqxTreeGrid: Missing reference to jqxdata.export.js!"}var r=this.exportSettings.columnsHeader;void 0==r&&(r=!0);var s=this.exportSettings.hiddenColumns;void 0==s&&(s=!1);var o=this.exportSettings.serverURL,a=this.exportSettings.characterSet,l=this.exportSettings.collapsedRecords;void 0==l&&(l=!1);var n=this.exportSettings.fileName;void 0===n&&(n=this.treeGrid?"jqxTreeGrid_Data":"jqxDataTable_Data");var d=this,h=this.getRows();if(1==this.exportSettings.recordsInView&&(h=this.getView()),this.treeGrid&&this.treeGrid.virtualModeCreateRecords)h=this.treeGrid.getRows();if(this.groups&&this.groups.length>0){var c=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",h),u=function(t,i){for(var r=0;r<t.length;r++){var s=e.extend({},t[r]);if(i.push(s),s.records&&s.records.length>0)for(var o=u(s.records,new Array),a=0;a<o.length;a++)o[a].leaf,i.push(o[a])}return i},g=u.call(this,c,new Array);h=g}if(0==h.length)throw"No data to export.";this.exporting=!0,this.altRows&&this._renderrows();for(var p=new Array,f=0;f<this.columns.records.length;f++)!s&&this.columns.records[f].hidden||p.push(e.extend({},this.columns.records[f]));if(this.groups&&this.groups.length>0&&p.length>0)for(var m=this._names(),f=0;f<h.length;f++)h[f][m.leaf]||(d.rtl?h[f][p[p.length-1].displayfield]=h[f].label:h[f][p[0].displayfield]=h[f].label);var v=0;if(this.treeGrid){var w=this.treeGrid.getRows();1==this.exportSettings.recordsInView&&(w=this.getView());var m=this._names(),y=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i[m.expanded]||!i[m.expanded]&&l;v=Math.max(v,1+i[m.level]),i.records&&i.records.length>0&&r&&y(e[t].records)}};if(y(w),"xml"!=i&&"json"!=i){for(var x=p.length,f=0;f<v;f++)(N=new t(this,this)).width=this.indentWidth,N.datafield="Level"+f,N.displayfield="Level"+f,N.align="center",N.cellsalign="center",N.text="",this.rtl?p.splice(x,0,N):p.splice(f,0,N);var b=new Array,_=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),j=function(t){for(var r=0;r<t.length;r++){for(var s=e.extend({},t[r]),o=0;o<s[m.level];o++)s["Level"+o]="";var a=s[m.expanded]||!s[m.expanded]&&l;("xls"==i||"html"==i||"pdf"==i)&&s.records&&s.records.length>0?s["Level"+s[m.level]]=a?"-":"+":s["Level"+s[m.level]]="",s[m.leaf]&&(s["Level"+s[m.level]]="");for(o=s[m.level]+1;o<v;o++)s["Level"+o]="";if(_&&!s[m.leaf]&&(d.rtl?s[p[p.length-v-1].displayfield]=s.label:s[p[v].displayfield]=s.label),s.aggregate)for(var n="xls"==i?"_AG":"",o=v;o<p.length;o++){var h=o;d.rtl&&(h=p.length-o-1),void 0!=s[p[h].displayfield]&&(s[p[h].displayfield]=n+s[p[h].displayfield])}b.push(s),a&&!s[m.leaf]&&j(s.records)}};j(w),h=b}else h=w}var q=void 0!=s&&s,S={},T={},C=this.host.find(".jqx-grid-cell:first"),z=this.host.find(".jqx-grid-cell-alt:first"),P=this.toThemeProperty;C.removeClass(P("jqx-grid-cell-selected")),C.removeClass(P("jqx-fill-state-pressed")),z.removeClass(P("jqx-grid-cell-selected")),z.removeClass(P("jqx-fill-state-pressed")),C.removeClass(P("jqx-grid-cell-hover")),C.removeClass(P("jqx-fill-state-hover")),z.removeClass(P("jqx-grid-cell-hover")),z.removeClass(P("jqx-fill-state-hover"));for(var k="cell",B=1,H="column",D=1,I=[],F=0;F<p.length;F++)if(""!=(N=p[F]).cellclassname)if(N.customCellStyles=new Array,"string"==typeof N.cellclassname)N.customCellStyles.push(N.cellclassname);else for(f=0;f<h.length;f++){var M=f,R=N.cellclassname(M,N.displayfield,h[f][N.displayfield],h[f]);R&&(N.customCellStyles[f]=R)}if(e.each(p,function(t){var s=t;d.treeGrid&&(t>=v?s=p.length-v-1:v>0&&t<v&&(s=0));a=e(d._table[0].rows[0].cells[s]);if(d._table[0].rows.length>1&&0==(o=e(d._table[0].rows[1].cells[s])).length)var o=e(d._table[0].rows[1].cells[0]);if(0==a.length)var a=e(d._table[0].rows[0].cells[0]);var l=this,n=function(e){var t=d.toThemeProperty;if(e.removeClass(t("jqx-cell")),e.removeClass(t("jqx-grid-cell-selected")),e.removeClass(t("jqx-fill-state-pressed")),e.removeClass(t("jqx-grid-cell-hover")),e.removeClass(t("jqx-fill-state-hover")),l.customCellStyles)for(var i in l.customCellStyles)e.removeClass(l.customCellStyles[i])};if(n(a),o&&n(o),null==this.displayfield)return!0;d.showAggregates&&d.getcolumnaggregateddata&&I.push(d.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,h));var c=d._getexportcolumntype(this);!this.exportable||this.hidden&&!q||(S[this.displayfield]={},S[this.displayfield].text=this.text,S[this.displayfield].width=parseInt(this.width),isNaN(S[this.displayfield].width)&&(S[this.displayfield].width=60),S[this.displayfield].width>500&&(S[this.displayfield].width=500),S[this.displayfield].formatString=this.cellsFormat,S[this.displayfield].localization=d.gridlocalization,S[this.displayfield].type=c,S[this.displayfield].cellsAlign=this.cellsalign,S[this.displayfield].hidden=!r,S[this.displayfield].index=s,S[this.displayfield].maxIndex=p.length),k="cell"+B;var u=this.element;if("json"!=i&&"xml"!=i){var g=function(e,t,r,s,o,a,l,n,d){T[e]={index:1+l,maxIndex:p.length},a.rtl&&(T[e].index=p.length-l),"html"!=i&&"xls"!=i&&"pdf"!=i||(t&&(T[e]["font-size"]=t.css("font-size"),T[e]["font-weight"]=t.css("font-weight"),T[e]["font-style"]=t.css("font-style"),T[e]["background-color"]=a._getexportcolor(t.css("background-color")),T[e].color=a._getexportcolor(t.css("color")),T[e]["border-color"]=a._getexportcolor(t.css("border-top-color"))),r?T[e]["text-align"]=o.align:(T[e]["text-align"]=o.cellsalign,T[e].formatString=o.cellsFormat,T[e].dataType=c),"html"!=i&&"pdf"!=i||(T[e]["border-top-width"]="0px",a.rtl?(T[e]["border-left-width"]="1px",T[e]["border-right-width"]="0px",l==p.length-v-1&&r&&(T[e]["border-right-width"]="1px")):(T[e]["border-left-width"]="0px",T[e]["border-right-width"]="1px"),T[e]["border-bottom-width"]="1px",t&&(T[e]["border-top-style"]=t.css("border-top-style"),T[e]["border-left-style"]=t.css("border-left-style"),T[e]["border-right-style"]=t.css("border-right-style"),T[e]["border-bottom-style"]=t.css("border-bottom-style")),r?(0!=l||a.rtl?l==p.length-1&&a.rtl&&(T[e]["border-right-width"]="1px"):T[e]["border-left-width"]="1px",t&&(T[e]["border-top-width"]="1px",T[e]["border-bottom-width"]=t.css("border-bottom-width"))):0!=l||a.rtl?l==p.length-1&&a.rtl&&(T[e]["border-right-width"]="1px"):T[e]["border-left-width"]="1px",t&&(T[e].height=t.css("height")),a.treeGrid&&!r&&(T[e].index-1<v?a.rtl?T[e]["border-left-width"]="0px":T[e]["border-right-width"]="0px":T[e].index-1==v&&(a.rtl?T[e]["border-right-width"]="0px":T[e]["border-left-width"]="0px")))),!o.exportable||o.hidden&&!q||(1==n?(S[o.displayfield].customCellStyles||(S[o.displayfield].customCellStyles=new Array),S[o.displayfield].customCellStyles[d]=e):r?S[o.displayfield].style=e:s?S[o.displayfield].cellAltStyle=e:S[o.displayfield].cellStyle=e)};if(g(H="column"+D,u,!0,!1,this,d,t),D++,g(k,a,!1,!1,this,d,t),d.altRows&&g(k="cellalt"+B,o,!1,!0,this,d,t),this.customCellStyles){for(var f in l.customCellStyles)a.removeClass(l.customCellStyles[f]);for(var f in l.customCellStyles)a.addClass(l.customCellStyles[f]),g(k+l.customCellStyles[f],a,!1,!1,this,d,t,!0,f),a.removeClass(l.customCellStyles[f])}B++}}),"json"!=i&&"xml"!=i&&v>0&&this.treeGrid){K=v+1;if(this.rtl&&(K=p.length-v),T["column"+K]){var L=T["column"+K];L.merge=v,L["border-left-width"]="1px";T["cell"+K];for(f=0;f<p.length;f++){K=f+1;if(this.rtl&&(K=p.length-f),T["column"+K].level=f,T["column"+K].maxLevel=v,T["cell"+K].maxLevel=v,(N=p[f]).customCellStyles)for(var A in N.customCellStyles)T["cell"+K+N.customCellStyles[A]]&&(T["cell"+K+N.customCellStyles[A]].maxLevel=v);T["cellalt"+K]&&(T["cellalt"+K].maxLevel=v)}for(f=0;f<v;f++){var K=f+1,O=f;this.rtl&&(K=p.length-f),(E=T["column"+K]).disabled=!0,T["cell"+K].level=O,T["cell"+K].maxLevel=v,T["column"+K].level=O,T["cellalt"+K]&&(T["cellalt"+K].level=O,T["cellalt"+K].maxLevel=v);var N=p[f];if(N.customCellStyles)for(var A in N.customCellStyles)T["cell"+K+N.customCellStyles[A]]&&(T["cell"+K+N.customCellStyles[A]].maxLevel=v,T["cell"+K+N.customCellStyles[A]].level=O);if(("html"==i||"pdf"==i||"xls"==i)&&(E["font-size"]=L["font-size"],E["font-weight"]=L["font-weight"],E["font-style"]=L["font-style"],E["background-color"]=L["background-color"],E.color=L.color,E["border-color"]=L["border-color"],"html"==i||"pdf"==i)){E["border-top-width"]=L["border-top-width"],E["border-left-width"]=L["border-left-width"],this.rtl&&(E["border-right-width"]=L["border-right-width"],0==f&&(E["border-right-width"]="1px")),0!=f||this.rtl?0==f&&this.rtl&&(E["border-left-width"]="0px"):E["border-left-width"]="0px",this.rtl?this.rtl&&(E["border-left-width"]="0px"):E["border-right-width"]="0px",E["border-bottom-width"]="0px";var E=T["cell"+K];this.rtl?this.rtl&&(E["border-left-width"]="0px"):E["border-right-width"]="0px"}}}}if(this.showAggregates){var G=[],W="xls"==i?"_AG":"",V=0;this.rowDetails&&!this.treeGrid&&V++,I.length>0&&(e.each(p,function(e){if(this.aggregates)for(var t=0;t<this.aggregates.length;t++)if(G[t]||(G[t]={}),G[t]){var i=d._getaggregatename(this.aggregates[t]),r=d._getaggregatetype(this.aggregates[t]),s=I[e-V];s&&(G[t][this.displayfield]=W+i+": "+s[r])}}),e.each(p,function(e){for(var t=0;t<G.length;t++)void 0==G[t][this.displayfield]&&(G[t][this.displayfield]=W)})),e.each(G,function(){h.push(this)})}var U=this,Y=e.jqx.dataAdapter.ArrayExporter(h,S,T,o,this.treeGrid&&("xml"==i||"json"==i));if(void 0==n){this._renderrows();var X=this.treeGrid&&("xml"==i||"json"==i),Z=Y.exportTo(i,this.treeGrid&&("xml"==i||"json"==i));return this.showAggregates&&e.each(G,function(){h.pop(this)}),setTimeout(function(){U.exporting=!1},50),Z}X=this.treeGrid&&("xml"==i||"json"==i);Y.exportToFile(i,n,o,a,X),this.showAggregates&&e.each(G,function(){h.pop(this)}),this._renderrows(),setTimeout(function(){U.exporting=!1},50)},_getexportcolor:function(e){var t=e;if("transparent"==e&&(t="#FFFFFF"),t&&t.toString()||(t="#FFFFFF"),-1!=t.toString().indexOf("rgb")){var i=t.split(",");if(-1!=t.toString().indexOf("rgba")){var r=parseInt(i[0].substring(5)),s=parseInt(i[1]),o=parseInt(i[2]),a=parseInt(i[3].substring(1,4)),l={r:r,g:s,b:o},n=this._rgbToHex(l);return 0==r&&0==s&&0==o&&0==a?"#ffffff":"#"+n}l={r:r=parseInt(i[0].substring(4)),g:s=parseInt(i[1]),b:o=parseInt(i[2].substring(1,4))};return"#"+(n=this._rgbToHex(l))}return-1!=t.toString().indexOf("#")&&4==t.toString().length&&(t+=t.toString().substring(1,4)),t},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return 1==t.length&&(t="0"+t),t.toUpperCase()},_getexportcolumntype:function(t){var i=this,r="string",s=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(s){var o="";if(e.each(s,function(){if(this.name==t.displayfield)return this.type&&(o=this.type),!1}),o)return o}if(null!=t){if(void 0==this.dataview.cachedrecords)return r;var a=null;if(this.virtualmode)e.each(this.dataview.cachedrecords,function(){return a=this[t.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return r;if(null!=(a=this.dataview.cachedrecords[0][t.displayfield])&&""==a.toString())return"string"}if(null!=a){if(-1!=t.cellsFormat.indexOf("c"))return"number";if(-1!=t.cellsFormat.indexOf("n"))return"number";if(-1!=t.cellsFormat.indexOf("p"))return"number";if(-1!=t.cellsFormat.indexOf("d"))return"date";if(-1!=t.cellsFormat.indexOf("y"))return"date";if(-1!=t.cellsFormat.indexOf("M"))return"date";if(-1!=t.cellsFormat.indexOf("m"))return"date";if(-1!=t.cellsFormat.indexOf("t"))return"date";if("boolean"==typeof a)r="boolean";else if(e.jqx.dataFormat.isNumber(a))r="number";else{var l=new Date(a);if("NaN"==l.toString()||"Invalid Date"==l.toString())if(e.jqx.dataFormat){if(null!=(l=e.jqx.dataFormat.tryparsedate(a))){if(l&&l.getFullYear()&&1970==l.getFullYear()&&0==l.getMonth()&&1==l.getDate()){var n=new Number(a);return isNaN(n)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}}return r},showDetails:function(e){var t=this._getkey(e);this.showdetailsbykey(t)},hideDetails:function(e){var t=this._getkey(e);this.hidedetailsbykey(t)},setCellValueByKey:function(t,i,r){var s=this,o=this.rowsByKey[t],a=this.getrowindex(o),l=o;if(null!=l&&l[i]==r)return!1;if(null==l||null!==l[i]||""!==r){var n="";if(null!=l&&l[i]!==r){var d=this.getColumn(i),h="string";if(v=this.source.datafields||(this.source._source?this.source._source.datafields:null)){var c="";e.each(v,function(){if(this.name==d.displayfield)return this.type&&(c=this.type),!1}),c&&(h=c)}if(n=l[i],!d.nullable||null!=r&&""!==r&&d.nullable&&void 0===r.label){if(e.jqx.dataFormat.isNumber(n)||"number"==h||"float"==h||"int"==h||"decimal"==h&&"date"!=h)r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0);else if((e.jqx.dataFormat.isDate(n)||"date"==h)&&""!=r){var u=r;"Invalid Date"!=(u=new Date(u))&&null!=u?r=u:"Invalid Date"==u&&(r=u=new Date)}if(l[i]===r)return}if(s.dataview._filteredData=null,s.dataview._sortData=null,s.dataview._sortHierarchyData=null,l[i]=r,this.treeGrid&&(g=this.treeGrid.getRow(t))&&(g[i]=r),null!=r&&null!=r.label&&(l[(d=this.getColumn(i)).displayfield]=r.label,l[i]=r.value,this.treeGrid)){var g=this.treeGrid.getRow(t);g&&(g[d.displayfield]=r.label,g[i]=r.value)}}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var p=a,f=this.source._source._localdata()[p];this.source.suspendKO=!0;var m=f;if(m[i]&&m[i].subscribe)null!=r&&null!=r.label?(m[d.displayfield](r.label),m[i](r.value)):m[i](r);else{var v=this.source._source.datafields,w=null;if(v&&e.each(v,function(){if(this.name==i)return w=this.map,!1}),null==w)null!=r&&null!=r.label?(m[i]=r.value,m[d.displayfield]=r.label):m[i]=r;else{var y=w.split(this.source.mapChar);if(y.length>0){for(var x=m,b=0;b<y.length-1;b++)x=x[y[b]];x[y[y.length-1]]=r}}this.source._source._localdata.replace(f,e.extend({},m))}this.source.suspendKO=!1}if(this.source.updaterow&&(void 0==sync||1==sync)){try{var _=t;void 0==this.source.updaterow(_,l,function(e){0==e&&this.setCellValue(o,i,n,!0,!1)})&&!0}catch(e){return!1,void this.setCellValue(o,i,n)}}var j=this.getrowdisplayindex(o),d=this.getColumn(i);this._raiseEvent("cellValueChanged",{value:r,oldValue:n,dataField:i,displayField:d.displayfield,key:t,boundIndex:a,index:j,row:this.rowsByKey[t]}),this.editable&&null!=this.editKey||this._renderrows()}},setCellValue:function(e,t,i){if(null==e||null==t)return!1;var r=parseInt(e),s=this._getkey(r);this.setCellValueByKey(s,t,i)},getCellText:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellTextByKey(r,t)},getCellTextByKey:function(t,i){if(null==t||null==i)return null;var r=this.getCellValueByKey(t,i),s=this.getColumn(i);return s&&""!=s.cellsFormat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsFormat,this.gridlocalization):(e.jqx.dataFormat.isNumber(r)||!isNaN(parseFloat(r))&&isFinite(r))&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsFormat,this.gridlocalization))),r},getCellValue:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellValueByKey(r,t)},getCellValueByKey:function(e,t){var i=this.rowsByKey[e];!i&&this.treeGrid&&(i=this.treeGrid.getRow(e));this.getrowindex(i);var r=i;return null!=r?r[t]:null},beginRowEdit:function(e){var t=this._getkey(e);this.beginroweditbykey(t)},beginCellEdit:function(e,t){var i=this._getkey(e),r=this.getColumn(t);this.beginroweditbykey(i,r)},endCellEdit:function(e,t,i){this.endRowEdit(e,i)},endRowEdit:function(e,t){var i=this._getkey(e);this.endroweditbykey(i,t)},getrowindex:function(e){var t=this.getRows().indexOf(e);if(-1!=t)return t;if(this.groups&&this.groups.length>0)for(var i=this.getRows(),r=0;r<i.length;r++)if(e.originalRecord){if(i[r].uid==e.originalRecord.uid){t=r;break}}else if(i[r].uid==e.uid){t=r;break}return t},getrowdisplayindex:function(e){if(this.treeGrid)return-1;var t=this.getView(),i=t.indexOf(e);if(-1!=i)return i;if(void 0==e)return i;for(var r=t,s=0;s<r.length;s++)if(r[s].uid==e.uid||e.originalRecord&&r[s].uid==e.originalRecord.uid){i=s;break}return i},beginroweditbykey:function(t,i){if(this.beginEdit&&!1===this.beginEdit(t,i))return!1;var r=this.treeGrid?this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0:this.groups.length;if(r>0){a=this.rowsByKey[t];if(this.treeGrid)a=this.treeGrid.getRow(t);if(a.level<r)return!1}if(null==this._lastSelectedKey&&this.selectrowbykey(t),this.editKey===t&&void 0!=this.editKey)return!1;if(this.rowinfo[t]&&this.rowinfo[t].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(t,!0),!1;var s=this.editSettings.editSingleCell;if(!i&&s&&this.columns.records&&this.columns.records.length>0){for(g=0;g<this.columns.records.length&&(!(i=this.columns.records[g]).editable||i.hidden);g++);if(!i)return!1}if(s&&i&&!i.editable)return this.editKey=null,!1;s&&(this.editColumn=i);var o=this,a=this.rowsByKey[t];if(this.treeGrid)a=this.treeGrid.getRow(t);var l=this.getrowindex(a),n=this._getuirow(t),d=this._getpinneduirow(t);this._editors=new Array;var h=!1;if(n)for(var c=n[0].cells,u=0,g=0;g<c.length;g++){var p=this.columns.records[g],f=c[g];if(!p.rowDetailscolumn&&!(p.checkboxcolumn||(p.pinned&&(f=d[0].cells[g]),s&&i&&p.datafield!=i.datafield||(e(f).removeClass(this.toTP("jqx-grid-cell-selected")),e(f).removeClass(this.toTP("jqx-fill-state-pressed")),e(f).removeClass(this.toTP("jqx-grid-cell-hover")),e(f).removeClass(this.toTP("jqx-fill-state-hover")),"none"==p.columntype)))){var m=e(f).outerWidth(),v=e(f).width();0===u&&(u=e(f).outerHeight()-1),e(f).css("padding","0px"),cellContent="<div style='height:"+u+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>";j=this.getCellTextByKey(t,p.displayfield);f.innerHTML=cellContent;var w=e(f.firstChild);switch(p.columntype){case"textbox":case"default":var y=e("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(w);if(this.rtl&&y.css("direction","rtl"),y.addClass(this.toThemeProperty("jqx-input")),y.addClass(this.toThemeProperty("jqx-widget-content")),y.addClass(this.toThemeProperty("jqx-cell-editor")),y[0].onfocus=function(t){setTimeout(function(){if(t)(i=e(t.target).parent().parent().index())>=0&&o.ensureColumnVisible(o.columns.records[i].datafield);else{var i=e(document.activeElement).parent().parent().index();i>=0&&o.ensureColumnVisible(o.columns.records[i].datafield)}o.content&&(o.content[0].scrollTop=0,o.content[0].scrollLeft=0),o.gridcontent&&(o.gridcontent[0].scrollLeft=0,o.gridcontent[0].scrollTop=0)},10)},p.editable){if(!h){h=!0;var x=e.jqx.browser.msie&&e.jqx.browser.version>10;x||y.focus();var b=y;setTimeout(function(){var e=b.val().length;x||b.focus();try{if("selectionStart"in b[0])b[0].setSelectionRange(0,e);else{var t=b[0].createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",0),t.select()}}catch(e){}},10)}}else y.attr("disabled",!0),y.attr("readOnly",!0),y.addClass(this.toThemeProperty("jqx-fill-state-disabled"));if(y.width(v),y.height(u),e.jqx.browser.msie&&e.jqx.browser.version<9&&y.css("line-height",parseInt(u)+"px"),y.css("text-align",p.cellsalign),null===j&&(j=""),void 0==j&&(j=""),y.val(j),p.createeditor){var _=j,j=this.getCellValueByKey(t,p.displayfield);p.createeditor(this.treeGrid?t:l,j,y,_,v,u)}if(this._editors.push({column:p,editor:y}),""!=p.cellsFormat&&(-1==p.cellsFormat.indexOf("p")&&-1==p.cellsFormat.indexOf("c")&&-1==p.cellsFormat.indexOf("n")&&-1==p.cellsFormat.indexOf("f")||y.keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0,i=String.fromCharCode(t),r=parseInt(i);if(isNaN(r))return!0;if(o._selection(y).length>0)return!0;var s="",a=y.val();if(p.cellsFormat.length>1){l=parseInt(p.cellsFormat.substring(1));isNaN(l)&&(l=0)}else var l=0;if(l>0&&-1!=a.indexOf(o.gridlocalization.decimalseparator)&&o._selection(y).start>a.indexOf(o.gridlocalization.decimalseparator))return!0;for(var n=0;n<a.length-l;n++){var d=a.substring(n,n+1);null!=d.match(/^[0-9]+$/)&&(s+=d)}return!(s.length>=11)&&void 0})),p.initeditor){var _=j,j=this.getCellValueByKey(t,p.displayfield);p.initeditor(this.treeGrid?t:l,j,y,_,v,u)}break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var q=e("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(w),S=e.trim(p.datafield).split(" ").join("");-1!=S.indexOf(".")&&(S=S.replace(".",""));T=this.editorsCache["templateeditor_"+S];if("custom"==p.columntype)var T=this.editorsCache["customeditor_"+S+"_"+t];var _=j,j=this.getCellValueByKey(t,p.displayfield);T?((y=T).width(m),y.height(u),y.appendTo(q)):((y=e("<div style='border: none;'></div>")).width(m),y.height(u),T=y,null===j&&(j=""),"custom"!=p.columntype?this.editorsCache["templateeditor_"+S]=y:this.editorsCache["customeditor_"+S+"_"+t]=y,y.appendTo(q),p.createeditor&&p.createeditor(this.treeGrid?t:l,j,y,_,m,u)),p.initeditor&&p.initeditor(this.treeGrid?t:l,j,y,_,m,u),this._editors.push({column:p,editor:y})}}}this.editKey=t,this.beginUpdate();var C=this.getrowdisplayindex(a);if(this._raiseEvent("rowBeginEdit",{key:t,index:C,boundIndex:l,row:this.rowsByKey[t]}),s){var z=null,P=null;(a=this.rowsByKey[t])&&(z=a[i.datafield],P=a[i.displayfield]),this._raiseEvent("cellBeginEdit",{value:z,displayValue:P,key:t,index:C,dataField:i.datafield,displayField:i.displayfield,boundIndex:l,row:this.rowsByKey[t]})}this.endUpdate(!1)},_toNumber:function(e){e.indexOf||void 0==e||(e=e.toString()),e.indexOf(this.gridlocalization.currencysymbol)>-1&&(e=e.replace(this.gridlocalization.currencysymbol,""));(e=(e=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)s=(r=r.replace(t,i)).indexOf(t);return r}(e,this.gridlocalization.thousandsseparator,"")).replace(this.gridlocalization.decimalseparator,".")).indexOf(this.gridlocalization.percentsymbol)>-1&&(e=e.replace(this.gridlocalization.percentsymbol,""));for(var t="",i=0;i<e.length;i++){var r=e.substring(i,i+1);"-"===r&&(t+="-"),"."===r&&(t+="."),null!=r.match(/^[0-9]+$/)&&(t+=r)}return e=t,e=e.replace(/ /g,"")},_geteditorvalue:function(t,i,r,s){var o=new String;if(i){if(!t.geteditorvalue)switch(t.columntype){case"textbox":default:if(o=i.val(),""!=t.cellsFormat){var a="string",l=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(l){var n="";e.each(l,function(){if(this.name==t.displayfield)return this.type&&(n=this.type),!1}),n&&(a=n)}var d="number"===a||"float"===a||"int"===a||"integer"===a,h="date"===a||"time"===a;if(d||"string"===a&&(-1!=t.cellsFormat.indexOf("p")||-1!=t.cellsFormat.indexOf("c")||-1!=t.cellsFormat.indexOf("n")||-1!=t.cellsFormat.indexOf("f"))){if(""===o&&t.nullable)return"";o=this._toNumber(o),o=new Number(o),isNaN(o)&&(o="")}if(h||"string"===a&&(-1!=t.cellsFormat.indexOf("H")||-1!=t.cellsFormat.indexOf("m")||-1!=t.cellsFormat.indexOf("M")||-1!=t.cellsFormat.indexOf("y")||-1!=t.cellsFormat.indexOf("h")||-1!=t.cellsFormat.indexOf("d"))){if(""===o&&t.nullable)return"";var c=o;("Invalid Date"==(o=new Date(o))||null==o||t.cellsFormat.length>1)&&(e.jqx.dataFormat&&(o=e.jqx.dataFormat.parsedate(c,t.cellsFormat,this.gridlocalization)),"Invalid Date"!=o&&null!=o||(o=""))}}t.displayfield!=t.datafield&&(o={label:o,value:o})}if(t.geteditorvalue){var u=this.getCellValueByKey(s,t.displayfield);o=t.geteditorvalue(this.treeGrid?s:r,u,i)}}return o},_validateEditors:function(e){for(var t=this,i=!0,r=t.rowsByKey[e],s=t.getrowindex(r),o=t._editors,e=t.editKey,a=t._getuirow(e),l=0;l<o.length;l++){var n=o[l].editor,d=o[l].column,h=t._geteditorvalue(d,n,s,e);if(d.validation){n.removeClass(t.toThemeProperty("jqx-grid-validation-label"));var c=d.datafield;try{var u=d.validation({value:h,row:e,datafield:d.datafield,displayfield:d.displayfield,column:d},h),g=t.gridlocalization.validationstring;void 0!=u.message&&(g=u.message),("boolean"==typeof u?u:u.result)||(void 0!=u.showmessage&&1!=u.showmessage||t._showvalidationpopup(a,c,g,n),i=!1)}catch(e){t._showvalidationpopup(a,c,t.gridlocalization.validationstring,n),i=!1}}}return i},endroweditbykey:function(t,i){var r=this;if(null!==r.editKey&&(!this.endEdit||!1!==this.endEdit(t))){var s=r.rowsByKey[t],o=r.getrowindex(s),a=r._editors,l=r.editKey;r._getuirow(l);if(!0!==i){var n=!0;if(a&&(n=r._validateEditors(l))){for(var d=e.extend({},s),h=e.extend({},s),c=0;c<a.length;c++){var u=a[c].editor,g=a[c].column,p=r._geteditorvalue(g,u,o,l);p&&void 0!=p.label?(d[g.displayfield]=p.label,d[g.datafield]=p.value):d[g.displayfield]=p}r.updaterowbykey(r.editKey,d,!1,function(){r.dataview._sortHierarchyData=null,r.dataview._sortData=null;for(var i=0;i<a.length;i++){var n=a[i].editor,d=a[i].column,c=r._geteditorvalue(d,n,o,l),u=h[d.displayfield];if(c&&void 0!=c.label?(s[d.displayfield]=c.label,s[d.datafield]=c.value):s[d.displayfield]=c,r.treeGrid){var g=r.treeGrid.getRow(l);g&&(g[d.displayfield]=c)}if(r.editorsCache){var p=function(e){if(e&&e.jqxWidget){var t=e.jqxWidget.element.className;(t.indexOf("dropdownlist")>=0||t.indexOf("datetimeinput")>=0||t.indexOf("combobox")>=0||t.indexOf("menu")>=0)&&e.jqxWidget.isOpened&&e.jqxWidget.isOpened()&&e.jqxWidget.close()}},f="customeditor_"+d.displayfield+"_"+t,m="templateeditor_"+d.displayfield;if(r.editorsCache[f]){var v=e(r.editorsCache[f]).data(),w=r.editorsCache[f];!v.jqxWidget&&e(w).children()[0]&&e(e(w).children()[0]).data().jqxWidget&&(v=e(e(w).children()[0]).data()),p(v),r.editorsCache[f].detach()}if(r.editorsCache[m]){r.editorsCache[m].detach();var v=e(r.editorsCache[m]).data(),w=r.editorsCache[m];!v.jqxWidget&&e(w).children()[0]&&e(e(w).children()[0]).data().jqxWidget&&(v=e(e(w).children()[0]).data()),p(v)}}c!=u&&(r.beginUpdate(),r._raiseEvent("cellValueChanged",{value:c,oldValue:u,dataField:d.datafield,displayField:d.displayfield,key:t,index:o,row:s}),r.endUpdate(!1))}})}if(!n)return!1}return r._detachEditors(l),!0}},_detachEditors:function(t){var i=this,r=i.rowsByKey[t],s=i.getrowindex(r);if(i.editorsCache)for(var o in i.editorsCache){var a=e(i.editorsCache[o]).data();if(a&&a.jqxWidget){var l=a.jqxWidget.element.className;(l.indexOf("dropdownlist")>=0||l.indexOf("datetimeinput")>=0||l.indexOf("combobox")>=0||l.indexOf("menu")>=0)&&a.jqxWidget.isOpened&&a.jqxWidget.isOpened()&&a.jqxWidget.close()}e(i.editorsCache[o]).detach()}i.beginUpdate();var n=i.getrowdisplayindex(r);if(i.editSettings.editSingleCell){var d=null,h=null;(r=i.rowsByKey[t])&&(d=r[i.editColumn.datafield],h=r[i.editColumn.displayfield]),i._raiseEvent("cellEndEdit",{value:d,displayValue:h,key:t,index:n,dataField:i.editColumn.datafield,displayField:i.editColumn.displayfield,boundIndex:s,row:i.rowsByKey[t]})}i._raiseEvent("rowEndEdit",{key:t,index:n,boundIndex:s,row:i.rowsByKey[t]}),i.endUpdate(!1),i.editColumn=null,i.editKey=null,i._renderrows(),i._renderhorizontalscroll(),i.host.focus(),setTimeout(function(){i.host.focus()},10)},_showvalidationpopup:function(t,i,r,s){if(void 0==r)var r=this.gridlocalization.validationstring;s.addClass(this.toThemeProperty("jqx-grid-validation-label"));var o=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),a=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");o.html(r),a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.hide(),a.hide(),o.prependTo(this.table),a.prependTo(this.table);var l=this.hScrollInstance.value,n=parseInt(l),d=this.getColumn(i).uielement;if(t){var h=t;o.css("top",parseInt(h.position().top)+30+"px");var c=parseInt(o.css("top"));a.css("top",c-11),a.removeClass(),a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var u=!1;c>=this._table.height()&&(a.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),a.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),(c=parseInt(h.position().top)-h.outerHeight()-5)<0&&(c=0,a.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),u=!0),o.css("top",c+"px"),a.css("top",c+o.outerHeight()-9));var g=-n+parseInt(e(d).position().left),p=parseInt(this._table.css("left"));isNaN(p)&&(p=0),0!=p&&(n=0),a.css("left",n+g+30);var f=o.width();f+g>this.host.width()-20&&(g-=f+g-this.host.width()+40),u?o.css("left",n+parseInt(e(d).position().left)-o.outerWidth()):o.css("left",n+g),s.mouseenter(function(){s.hasClass("jqx-grid-validation-label")&&(o.show(),a.show())}),s.mouseleave(function(){o.hide(),a.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:o,validationrow:a}}},addRow:function(t,i,r,s){if(void 0!=i){this._datachanged=!0,void 0==r&&(r="last");var o=!1,a=this.that;if(null==t){var l=this.dataview.filters&&this.dataview.filters.length>0,n=l?this.source.records.length:this.dataview.totalrecords;if(!this.pageable){this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length;n=l?this.source.records.length:this.dataview.totalrecords}if(e.isArray(i)){var d=new Array;e.each(i,function(e,t){var r=a.dataview.getid(a.dataview.source.id,i[e],n+e);d.push(r),a.getColumn(a.dataview.source.id)&&(i[e][a.dataview.source.id]=r)}),t=d}else t=this.dataview.getid(this.dataview.source.id,i,n),this.getColumn(this.dataview.source.id)&&(i[this.dataview.source.id]=t)}else e.isArray(i)?e.each(i,function(e,r){var s=t[e];a.getColumn(a.dataview.source.id)&&(i[e][a.dataview.source.id]=s)}):this.getColumn(this.dataview.source.id)&&(i[this.dataview.source.id]=t);var h=!!this.treeGrid&&!!this.treeGrid.virtualModeCreateRecords,c=function(t,i,r,o){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);var a=t.vScrollInstance.value,l=!1;if(e.isArray(r)?e.each(r,function(e,r){var a=null;null!=i&&null!=i[e]&&(a=i[e]),this.uid=a,t.rowsByKey[a]=this,i==s&&(s=null),l=t.source.addRecord(this,o,s,h)}):(r.uid=i,t.rowsByKey[i]=r,i==s&&(s=null),l=t.source.addRecord(r,o,s,h)),t.groups&&t.groups.length>0){var n=Object.prototype.toString,d=t.groups[0];if(Object.prototype.toString="function"==typeof d?d:function(){return this[d]},!t.source.records.sort){var c=new Array,u=0;e.each(data,function(){c[startindex+u++]=this}),data=c}t.source.records.sort(function(t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return-1;if(null!==t&&null===i)return 1;var r=0,s=0;if(t&&t.uid&&(r=t.uid),i&&i.uid&&(s=i.uid),t=t.toString(),i=i.toString(),e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(e){}if("number"==typeof r){if(r<s)return-1;if(r>s)return 1}return 0}),Object.prototype.toString=n}return t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null,void 0!=t._updating&&0!=t._updating||t.refresh(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),t.vScrollInstance.setPosition(a),l};if(this.source.addrow){var u=function(e,s){1!=e&&void 0!=e||(void 0!=s&&(t=s),c(a,t,i,r))};try{void 0==(o=a.treeGrid?this.source.addrow(t,i,r,s,u):this.source.addrow(t,i,r,u))&&(o=!0)}catch(e){o=!1}if(0==o)return!1}else c(this,t,i,r);return o}return!1},deleteRow:function(e){var t=this._getkey(e);this.deleterowbykey(t)},deleterowbykey:function(t){if(void 0!=t){this._datachanged=!0;var i=!1,r=this.that,s=function(t,i){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null;var r=!1,s=t.vScrollInstance.value;if(e.isArray(i))e.each(i,function(){var e=this;if(t.rowsByKey[e]){if(r=!0,t.rowinfo[e].selected&&t.unselectrowbykey(e,!1),t.treeGrid)var i=t._names(),s=t.rowsByKey[e][i.parent];if(delete t.rowsByKey[e],t.treeGrid&&t.rowinfo[e]){var o=t.rowinfo[e].row.records,a=function(e){for(var i=0;i<e.length;i++){var r=e[i].uid;delete t.rowsByKey[r],delete t.rowinfo[r],e[i].records&&a(e[i].records)}};o&&(a(o),delete t.rowinfo[e])}t.source.deleteRecord(e),s&&i&&s.records&&0==s.records.length&&(s[i.leaf]=!0,t.rowinfo[s.uid][i.leaf]=!0)}});else{r=!1;if(t.rowsByKey[i]){if(r=!0,t.rowinfo[i]&&t.rowinfo[i].selected&&t.unselectrowbykey(i,!1),t.treeGrid)var o=t._names(),a=t.rowsByKey[i][o.parent];if(delete t.rowsByKey[i],t.treeGrid&&t.rowinfo[i]){var l=t.rowinfo[i].row.records,n=function(e){for(var i=0;i<e.length;i++){var r=e[i].uid;delete t.rowsByKey[r],delete t.rowinfo[r],e[i].records&&n(e[i].records)}};l&&n(l)}delete t.rowinfo[i],t.source.deleteRecord(i),a&&o&&a.records&&0==a.records.length&&(a[o.leaf]=!0,t.rowinfo[a.uid][o.leaf]=!0)}}return t.refresh(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),t.vScrollInstance.setPosition(s),r};if(this.source.deleterow){try{this.source.deleterow(t,function(e){1!=e&&void 0!=e||s(r,t)}),void 0==i&&(i=!0)}catch(e){i=!1}}else i=s(r,t);return i}return!1},updateRow:function(e,t){var i=this._getkey(e);this.updaterowbykey(i,t)},updaterowbykey:function(t,i,r,s){if(void 0!=t&&void 0!=i){var o=this.that,a=!1,l=function(t,i,s){if(t._loading)throw new Error("jqxDataTable: "+t.loadingErrorMessage);t.dataview._filteredData=null,t.dataview._sortData=null,t.dataview._sortHierarchyData=null;var o=!1;if(e.isArray(i))e.each(i,function(e,i){var r=t.rowsByKey[this],a=function(t,i){r?r[this]=s[e]:o=!1,o=!0};a(),t.treeGrid&&(r=t.treeGrid.getRow(this),a())});else{var a=function(e){if(e){for(var i=0;i<t.columns.records.length;i++)e[t.columns.records[i].datafield]=s[t.columns.records[i].datafield],t.groups.length>0&&e.originalRecord&&(e.originalRecord[t.columns.records[i].datafield]=s[t.columns.records[i].datafield]);o=!0}else o=!1};a(n=t.rowsByKey[i]),t.treeGrid&&a(n=t.treeGrid.getRow(i))}var l=t.vScrollInstance.value;if(void 0!=r&&1!=r||void 0!=t._updating&&0!=t._updating||t._renderrows(),t.showAggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var n=t.rowsByKey[i],d=t.getrowindex(n),h=t.source._source._localdata()[d];t.source.suspendKO=!0,t.source._source._localdata.replace(h,e.extend({},n)),t.source.suspendKO=!1}return t.vScrollInstance.setPosition(l),o};if(this.source.updaterow){try{void 0==(a=this.source.updaterow(t,i,function(e){1!=e&&void 0!=e||(l(o,t,i),s&&s(),o._renderrows(!1),o.autoRowHeight&&(o._updateScrollbars(),o._arrange()))}))&&(a=!0)}catch(e){a=!1}}else(a=l(o,t,i))&&s&&s(),o._renderrows(!1),o.autoRowHeight&&(o._updateScrollbars(),o._arrange());return a}return!1},lockRow:function(e){var t=this._getkey(e);this.lockrowbykey(t)},unlockRow:function(e){var t=this._getkey(e);this.unlockrowbykey(t)},lockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!0:this.rowinfo[e]={locked:!0},this._renderrows()},unlockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!1:this.rowinfo[e]={locked:!1},this._renderrows()},selectRow:function(e){var t=this._getkey(e);this.selectrowbykey(t)},unselectRow:function(e){var t=this._getkey(e);this.unselectrowbykey(t)},selectrowbykey:function(e,t,i){"keyboard"!=t&&"mouse"!=t&&(this._lastSelectedKey=e);var r=!1!==i;this._doSelection(e,!0,r);var s=this.rowsByKey[e],o=this.getrowindex(s),a=this.getrowdisplayindex(s);this._raiseEvent("rowSelect",{key:e,index:a,boundIndex:o,row:this.rowsByKey[e]})},unselectrowbykey:function(e,t){var i=!1!==t;this._doSelection(e,!1,i);var r=this.rowsByKey[e],s=this.getrowindex(r),o=this.getrowdisplayindex(r);this._raiseEvent("rowUnselect",{key:e,index:o,boundIndex:s,row:this.rowsByKey[e]})},getSelection:function(){var e=new Array;if(this.rowinfo)for(var t in this.rowinfo){var i=this.rowinfo[t];i.selected&&e.push(i.row)}return e},showdetailsbykey:function(t){if(this.rowDetails){var i=this.rowinfo[t];if(i){i.expanded=!0;var r=e(this._table.children()[1]).children("[data-key="+t+"]"),s=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(r){var o=s.children(),a=e(o[0]);if(this.rtl)a=e(o[o.length-1]);this.rtl?(a.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),a.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),a.removeClass(this.toThemeProperty("jqx-icon-arrow-left")),a.addClass(this.toThemeProperty("jqx-icon-arrow-down"))):(a.removeClass(this.toThemeProperty("jqx-grid-group-collapse")),a.addClass(this.toThemeProperty("jqx-grid-group-expand")),a.removeClass(this.toThemeProperty("jqx-icon-arrow-right")),a.addClass(this.toThemeProperty("jqx-icon-arrow-down"))),r.next().show();var l=s.next();if(l.show(),e.jqx.browser.msie&&e.jqx.browser.version<8&&(r.next().children().show(),s.next().children().show()),!i.initialized){var n=i.detailsHeight,d=this.initRowDetails(t,i.row,e(e(l).children().children().children()[0]),i);i.details=e(l).children().children().children()[0],i.initialized=!0,!1!==d&&i.detailsHeight==n||(!1===d&&(i.expanded=!1,i.nodetails=!0,l.hide()),this._renderrows())}this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var h=this.getrowindex(i.row),c=this.getrowdisplayindex(i.row);this._raiseEvent("rowExpand",{row:i.row,index:c,boundIndex:h,rowKey:t})}}}},hidedetailsbykey:function(t){if(this.rowDetails){var i=this.rowinfo[t];if(i){i.expanded=!1;var r=e(this._table.children()[1]).children("[data-key="+t+"]"),s=e(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(r){var o=s.children(),a=e(o[0]);if(this.rtl)a=e(o[o.length-1]);this.rtl?(a.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),a.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),a.addClass(this.toThemeProperty("jqx-icon-arrow-left")),a.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))):(a.addClass(this.toThemeProperty("jqx-grid-group-collapse")),a.removeClass(this.toThemeProperty("jqx-grid-group-expand")),a.addClass(this.toThemeProperty("jqx-icon-arrow-right")),a.removeClass(this.toThemeProperty("jqx-icon-arrow-down"))),r.next().hide(),s.next().hide(),e.jqx.browser.msie&&e.jqx.browser.version<8&&(r.next().children().hide(),s.next().children().hide()),this._updateScrollbars(),("auto"===this.height||null===this.height||this.autoheight)&&this._arrange();var l=this.getrowindex(i.row),n=this.getrowdisplayindex(i.row);this._raiseEvent("rowCollapse",{row:i.row,index:n,boundIndex:l,rowKey:t})}}}},_getvirtualcolumnsindexes:function(e,t,i,r,s){if(this.rowDetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+r};var o=0,a=-1,l=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var n=0;n<i+r;n++){if(this.columns.records[n].hidden||(o+=this.columns.records[n].width),o>=e&&-1==a&&(a=n),o>t+e){l=n;break}}return++l>i+r&&(l=i+r),-1==a&&(a=0),{start:a,end:l}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(e.value=0,t=0);var i=parseInt(t);if(null!=this.table){var r=this.columnsrow,s=this.columns.records.length-0,o=this.columns.records,a=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),a&&!this._haspinned)this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px";else{if(this._haspinned||void 0==this._haspinned){for(var l=0;l<0+s;l++)if(o[l].pinned){var n=null;if(this.showAggregates&&this.statusbar[0].cells&&(n=this.statusbar[0].cells[l]),this.filterrow&&this.filterrow[0].cells&&(filtercell=this.filterrow[0].cells[l]),this.rtl){var d=r[0].cells[l];d.style.marginLeft=-parseInt(t)+"px",n&&(n.style.marginLeft=-parseInt(t)+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=-parseInt(t)+"px")}else(d=r[0].cells[l]).style.marginLeft=i+"px",n&&(n.style.marginLeft=i+"px"),this.filterrow&&filtercell&&(filtercell.style.marginLeft=i+"px")}if(this.columnsVirtualization){for(var h=(f=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1)).start,c=f.end,u=0;u<h;u++){var g=u,p=this.columns.records[g].element[0];this.columns.records[g].pinned||(p.parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m))}for(u=c;u<this.columns.records.length;u++){var g=u,p=this.columns.records[g].element[0];this.columns.records[g].pinned||(p.parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m))}for(u=h;u<c;u++){g=u;p=this.columns.records[g].element[0],this.columns.records[g].pinned||(p.parentNode||this.columnsrow[0].appendChild(p),this.filterrow&&this.filterrow[0]&&((m=this.filterrow[0].cells[g]).parentNode||this.filterrow[0].appendChild(m)))}}this._table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}else if(0==this._haspinned){if(this.columnsVirtualization){for(var f=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1),h=f.start,c=f.end,u=0;u<h;u++){g=u;(p=this.columns.records[g].element[0]).parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m)}for(u=c;u<this.columns.records.length;u++){g=u;(p=this.columns.records[g].element[0]).parentNode&&p.parentNode.removeChild(p),this.filterrow&&this.filterrow[0]&&(m=this.filterrow[0].cells[g]).parentNode&&m.parentNode.removeChild(m)}for(u=h;u<c;u++){g=u;if((p=this.columns.records[g].element[0]).parentNode||this.columnsrow[0].appendChild(p),this.filterrow&&this.filterrow[0]){var m=this.filterrow[0].cells[g];m.parentNode||this.filterrow[0].appendChild(m)}}}this.table[0].style.left=-i+"px",r[0].style.marginLeft=-i+"px"}this.filterrow&&(this.filterrow[0].style.left=-i+"px",this.rtl&&(this.filterrow[0].style.left=-i+parseInt(this.content.css("left"))+"px"))}if(this.showAggregates&&this.aggregates[0].cells){var v=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(v="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-i+v+"px"}}},_initializeColumns:function(){var i=this.source.datafields;null==i&&this.source._source&&(i=this.source._source.datafields);var r=!!i&&i.length>0;if(this.columns&&this.columns.records)for(var s=0;s<this.columns.records.length;s++)this._removecolumnhandlers(this.columns.records[s]);var o=this,a=new e.jqx.dataCollection(this.element),l=0;if(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionMode&&((n=new t(o,this)).visibleindex=l++,n.width=o.indentWidth,n.checkboxcolumn=!0,n.editable=!1,n.columntype="checkbox",n.groupable=!1,n.draggable=!1,n.filterable=!1,n.resizable=!1,n.datafield="_checkboxcolumn",a.add(n)),this.rowDetails&&!this.treeGrid){var n=new t(o,this);n.visibleindex=l++,n.width=o.indentWidth,n.editable=!1,n.rowDetailscolumn=!0,n.groupable=!1,n.draggable=!1,n.pinned=!0,n.filterable=!1,n.resizable=!1,n.text="",a.add(n)}var d=new Array;e.each(this.columns,function(e){if(void 0!=o.columns[e]){var i=new t(o,this);if(i.visibleindex=l++,void 0!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(o._haspinned=!0),null==this.datafield)o.source&&o.source._source&&"array"==o.source._source.datatype&&(r||(o.source._source.datafields?o.source._source.datafields.push({name:e.toString()}):(o.source._source.datafields=new Array,o.source._source.datafields.push({name:e.toString()}))),this.datafield=e.toString(),this.displayfield=e.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else{if(d[this.datafield])throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields.");d[this.datafield]=!0}a.add(i)}}),this.rtl&&a.records.reverse(),this.columns=a},addFilter:function(e,t){this.getColumn(e)&&this.dataview.addFilter(e,t)},removeFilter:function(e){this.getColumn(e)&&this.dataview.removeFilter(e)},clearFilters:function(e,t){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,!1!==t&&this.resetfilter(),!1!==e&&this.applyFilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var t=0;t<this.filterrow[0].cells.length;t++){var i=this.filterrow[0].cells[t],r=e(i).find("input:first"),s=e(i).find(".filterconditions"),o=this.columns.records[t];if(o.filterable){r.val("");var a=this.getcolumntypebydatafield(o),l=new e.jqx.filter;switch(a){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=l.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=l.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=l.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=l.getoperatorsbyfiltertype("stringfilter")}s.length>0&&("stringfilter"===filtertype?s.jqxDropDownList({selectedIndex:2}):s.jqxDropDownList({selectedIndex:0}))}}},applyFilters:function(){if(this.editable&&null!=this.editKey)this.endroweditbykey(this.editKey);if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updateBoundData("filter")):(this.goToPage(0),this.refresh()),arguments&&arguments.length>0){if(this._updateSimpleFilter&&this.filtercolumnsList){var e=this.filtercolumnsList.jqxDropDownList("getSelectedItem").value;this._updateSimpleFilter(e)}this._updateFilterRow&&this._updateFilterRow()}this._raiseEvent("filter",{filters:this.dataview.filters})},sortBy:function(e,t){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(this.editable&&null!=this.editKey)this.endroweditbykey(this.editKey);if(null==e&&(t=null,e=this.sortcolumn),e){var i=this;ascending="a"==t||"asc"==t||"ascending"==t||1==t,i.sortdirection=null!=t?{ascending:ascending,descending:!ascending}:{ascending:!1,descending:!1},i.sortcolumn=null!=t?e:null,i.source.sort&&(i.dataview.sortfield=e,i.dataview.sortfielddirection=null==t?"":ascending?"asc":"desc",i.source.sort&&!this._loading&&i.source.sort(e,t)),i.dataview.sortBy(e,t),i._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})}this.serverProcessing?this.updateBoundData("sort"):this.refresh()},_togglesort:function(e){var t=this;if(!this.disabled&&e.sortable&&t.sortable){var i={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection},r=null;r=null==i.sortcolumn||i.sortcolumn!=e.displayfield||1!=(r=i.sortdirection.ascending)&&null,t.sortBy(e.displayfield,r)}},_renderfilter:function(){var t=this,i=e("<div style='position: relative; margin: 4px;'><input style='height: 22px; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>");i.height(22);var r=i.find("input"),s=i.find("div:first");i.addClass(this.toThemeProperty("jqx-rc-all")),i.addClass(this.toThemeProperty("jqx-widget")),i.addClass(this.toThemeProperty("jqx-input-group")),r.addClass(this.toThemeProperty("jqx-input")),r.addClass(this.toThemeProperty("jqx-rc-l")),r.addClass(this.toThemeProperty("jqx-input-group-addon")),r.addClass(this.toThemeProperty("jqx-widget")),r.addClass(this.toThemeProperty("jqx-widget-content")),s.addClass(this.toThemeProperty("jqx-fill-state-normal")),s.addClass(this.toThemeProperty("jqx-rc-r")),s.addClass(this.toThemeProperty("jqx-input-group-addon")),s.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(r.addClass(this.toThemeProperty("jqx-rtl")),r.css("direction","rtl")),this.filter.children().remove(),this.filterbutton=s;for(var o=new Array,a=0;a<t.columns.records.length;a++)t.columns.records[a].datafield&&t.columns.records[a].filterable&&o.push({label:t.columns.records[a].text,value:t.columns.records[a].displayfield});var l=o.length<10,n=e("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filter.append(n);var d=e("<div class='filtercolumns' style='position: relative; margin: 4px; float: left;'></div>");this.filter.append(d),d.jqxDropDownList&&d.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:l,rtl:t.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:o,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=d;var h=function(e){t.filterinput.val("");for(var i=0;i<t.dataview.filters.length;i++){var r=t.dataview.filters[i];r.datafield===e&&t.filterinput.val(r.filter.getfilterat(0).filtervalue)}};30!==t.filterHeight&&(t.filtercolumnsList.css("margin-top",t.filterHeight/2-10),i.css("margin-top",t.filterHeight/2-10)),t._updateSimpleFilter=h,this.addHandler(d,"select",function(e){var t=e.args.item.value;h(t)}),"simple"===this.filterMode?(this.filtercolumnsList.hide(),n.show(),n.css("margin-top",-this.filter.height()/2),i.css("float","left")):(this.filtercolumnsList.show(),n.hide());var c=function(){if(!s.hasClass("jqx-fill-state-disabled")){var i=r.val();if(d.jqxDropDownList)var o=d.jqxDropDownList("getSelectedItem");var a=function(i,r,s){var o=new e.jqx.filter,a=t.getcolumntypebydatafield(i),l=t._getfiltertype(a);if("datefilter"==l)n=o.createfilter(l,r,"EQUAL",null,i.cellsFormat,t.gridlocalization);else if("numericfilter"==l||"booleanfilter"==l){"numericfilter"==l&&(","==t.gridlocalization.decimalseparator&&r.indexOf(t.gridlocalization.decimalseparator)>=0&&(r=r.replace(t.gridlocalization.decimalseparator,".")),r.indexOf(t.gridlocalization.currencysymbol)>=0&&(r=r.replace(t.gridlocalization.currencysymbol,"")),r.indexOf(t.gridlocalization.percentagesymbol)>=0&&(r=r.replace(t.gridlocalization.percentagesymbol,"")));n=o.createfilter(l,r,"EQUAL",null,i.cellsFormat,t.gridlocalization)}else var n=o.createfilter(l,r,"CONTAINS");return o.operator=s,o.addfilter(0,n),o};if("simple"!==t.filterMode){if(o){var l=o.value,n=a(c=t.getColumn(l),i,"and");i.length>0?(t.removeFilter(l),t.addFilter(l,n),t.applyFilters()):(t.removeFilter(l),t.applyFilters()),"advanced"===t.filterMode&&t._updateFilterRow&&t._updateFilterRow(!0)}}else{if(t.clearFilters(!1,!1),i.length>0)for(var h=0;h<t.columns.records.length;h++){var c=t.columns.records[h],n=a(c,i,"or");t.addFilter(c.datafield,n)}t.applyFilters()}0==t.dataview.filters.length?t.filtericon.fadeOut(200):t.filtericon.fadeIn(200)}};if(r.keydown(function(e){if(13===e.keyCode)return c(),e.preventDefault&&e.preventDefault(),!1}),s.click(function(){c()}),this.filterinput=r,this.filter.append(i),"advanced"==this.filterMode){var u=e("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>");i.append(u),this.addHandler(u,"click",function(i){var r=function(i){if(t.filterrow)for(var r=0;r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],o=e(s).find("input:first"),a=t.columns.records[r];if(a.filterable){!0===i&&o.val("");for(var l=0;l<t.dataview.filters.length;l++){var n=t.dataview.filters[l];if(n.datafield===a.displayfield){o.val(n.filter.getfilterat(0).filtervalue);break}}}}},s=function(i){if(t.filterrow)for(var r=0;r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],o=e(s).find("input:first"),a=t.columns.records[r];a.hidden?s.style.visibility="hidden":s.style.visibility="inherit",a.filterable&&(s.style.left=parseInt(0)+parseInt(a.uielement[0].style.left)+"px",s.style.width=6+a.width+"px",o[0]&&(o[0].style.width=a.width-6-22+"px"))}};t._updateFilterRow=r,t._arrangeFilterRow=s;var o=function(){t.filtercolumnsList.jqxDropDownList({disabled:!0}),t.filterinput.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!0),t.filterbutton.addClass(t.toThemeProperty("jqx-fill-state-disabled"))};return 0===t.filter.find(".filterrow").length?(t._renderadvancedfilter(),o(),r(),t._arrange(),s()):("none"===t.filter.find(".filterrow").css("display")?(o(),t.filter.find(".filterrow").removeClass("filterrow-hidden"),r(),t.filter.find(".filterrow").show(),s()):(t.filtercolumnsList.jqxDropDownList({disabled:!1}),t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!1),t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),h(t.filtercolumnsList.jqxDropDownList("getSelectedItem").value),t.filter.find(".filterrow").addClass("filterrow-hidden"),t.filter.find(".filterrow").hide()),t._arrange()),!1})}var g=e("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");g.attr("title",t.gridlocalization.filterclearstring),g.addClass(t.toThemeProperty("jqx-icon-close")),i.append(g),g.hide(),t.filtericon=g,g.click(function(){t.clearFilters(),t.filtericon.fadeOut(200)}),t.dataview.filters.length>0&&("advanced"!=t.filterMode?h(t.dataview.filters[0].datafield):t._updateFilterRow&&t._updateFilterRow())},_renderadvancedfilter:function(){var t=this,i=function(){t.clearFilters(!1,!1);for(var i=t.filtercolumnsList.jqxDropDownList("getSelectedItem").value,r=(t.filterinput.val(),0);r<t.filterrow[0].cells.length;r++){var s=t.filterrow[0].cells[r],o=e(s).find("input:first"),a=e(s).find(".filterconditions"),l=t.columns.records[r],n="";if(l.filterable){l.displayfield===i&&t.filterinput.val(o.val());var d=t.getcolumntypebydatafield(l),h=new e.jqx.filter;switch(d){case"number":case"int":case"float":case"decimal":filtertype="numericfilter",conditions=h.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":filtertype="booleanfilter",conditions=h.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":filtertype="datefilter",conditions=h.getoperatorsbyfiltertype("datefilter");break;case"string":filtertype="stringfilter",conditions=h.getoperatorsbyfiltertype("stringfilter")}if(0==a.length)n="stringfilter"===filtertype?conditions[2]:conditions[0];else{var c=a.jqxDropDownList("getSelectedItem");n=c?conditions[c.index]:"stringfilter"===filtertype?conditions[2]:conditions[0]}var u=o.val();if(u.length>0||0==u.length&&"NOT_NULL"==n||0==u.length&&"NOT_EMPTY"==n||0==u.length&&"EMPTY"==n||0==u.length&&"NULL"==n){var g=l.displayfield,p=new e.jqx.filter;"numericfilter"==filtertype&&(","==t.gridlocalization.decimalseparator&&u.indexOf(t.gridlocalization.decimalseparator)>=0&&(u=u.replace(t.gridlocalization.decimalseparator,".")),u.indexOf(t.gridlocalization.currencysymbol)>=0&&(u=u.replace(t.gridlocalization.currencysymbol,"")),u.indexOf(t.gridlocalization.percentagesymbol)>=0&&(u=u.replace(t.gridlocalization.percentagesymbol,"")));h=p.createfilter(filtertype,u,n,null,l.cellsFormat,t.gridlocalization);p.addfilter(0,h),t.addFilter(g,p)}}}t.dataview.filters.length>0?t.applyFilters():t.clearFilters(),0==t.dataview.filters.length?t.filtericon.fadeOut(200):t.filtericon.fadeIn(200)};!function(){var r=e("<div style='position: relative;' class='filterrow'></div>").appendTo(t.filter);t.filterrow=r,r[0].cells=new Array,r.height(24),r.width(t.table.width());var s=t.filtercolumnsList.jqxDropDownList("getSelectedItem").value,o=t.filterinput.val();e.each(t.columns.records,function(){var a=this,l=e("<div></div>").appendTo(r);if(l.css("position","absolute"),l.css("left",0+parseInt(a.uielement[0].style.left)),a.pinned&&(l.css("z-index",t.tableZIndex+t.columns.records.length),l.addClass(t.toThemeProperty("jqx-widget-header"))),r[0].cells.push(l[0]),!this.filterable)return!0;var n=e("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(l);n.keydown(function(e){13===e.keyCode&&i()}),a.displayfield===s&&n.val(o),n.addClass(t.toThemeProperty("jqx-input")),n.addClass(t.toThemeProperty("jqx-rc-all")),n.addClass(t.toThemeProperty("jqx-widget")),n.addClass(t.toThemeProperty("jqx-widget-content"));var d=e("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(l);d.append(e("<div style='width: 16px; height: 16px;' class='"+t.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>")),n.focus(function(){t.ensureColumnVisible(a.displayfield),t.filter[0].scrollLeft=0,t.ensureColumnVisible(a.displayfield),setTimeout(function(){t.filter[0].scrollLeft=0,t.ensureColumnVisible(a.displayfield)},10)}),d.click(function(){var i=e("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>");i.insertAfter(d),d.remove();var r=t.getcolumntypebydatafield(a),s=t._getfiltersbytype(r);index="string"===r?2:0,i.jqxDropDownList({theme:t.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:index,rtl:t.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:s,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+t.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>"}}),t.addHandler(i,"close",function(e){n.focus(),setTimeout(function(){n.focus()},10)}),i.removeAttr("tabindex"),i.find("div").removeAttr("tabindex"),i.jqxDropDownList("open")}),n[0].style.width=a.width-6-22+"px"}),e("<div style='clear: both;'></div>").appendTo(r)}();var r=e("<div style='position:relative;' class='filterrow'></div>").appendTo(t.filter),s=e("<input type='button' style='position: relative; float: left; margin-top: 4px; margin-left: 4px;' value='"+t.gridlocalization.filterapplystring+"'/>").appendTo(r),o=e("<input type='button' style='position: relative; float: left; margin-top: 4px;  margin-left: 4px;' value='"+t.gridlocalization.filtercancelstring+"'/>").appendTo(r);s.css("left",0),o.css("left",0),s.jqxButton({theme:t.theme}),o.jqxButton({theme:t.theme}),o.click(function(){t.filtercolumnsList.jqxDropDownList({disabled:!1}),t.filterinput.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filterinput.attr("disabled",!1),t.filterbutton.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.filter.find(".filterrow").addClass("filterrow-hidden"),t.filter.find(".filterrow").hide(),t._arrange()}),s.click(function(){i()}),t._renderhorizontalscroll()},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},getcolumntypebydatafield:function(t){var i=this,r=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(r){var s="";if(e.each(r,function(){if(this.name==t.displayfield)return this.type&&(s=this.type),!1}),s)return s}return"string"},_getfiltersbytype:function(e){var t=this,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getcellvalue:function(e,t){var i=null;return i=t[e.datafield],null!=e.displayfield&&(i=t[e.displayfield]),null==i&&(i=""),i},_renderrows:function(t){if(this.editable&&null!=this.editKey&&!1!==t)this.endroweditbykey(this.editKey);if(this.treeGrid)this.treeGrid._renderrows();else if(!this._loading&&!this._updating){this.rendering&&this.rendering();var i=this,r=0;this.table[0].rows=new Array;B=this.toTP("jqx-cell")+" "+this.toTP("jqx-widget-content");this.rtl&&(B+=" "+this.toTP("jqx-cell-rtl"));var s=this.columns.records.length,o=e.jqx.browser.msie&&e.jqx.browser.version<8;o&&this.host.attr("hideFocus","true");var a=i.groups.length,l=new Array,n=this.source.records;if(n=this.dataview.evaluate(n),this.dataViewRecords=n,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing){d=n;if(this.pageable&&this.serverProcessing&&n.length>this.dataview.pagesize)d=n.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize)}else var d=n.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize);if(i.groups&&i.groups.length>0){var h=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0;if("root"===this.pageSizeMode){c=i.source.getGroupedRecords(i.groups,"records","label",null,"data",null,"parent",n,0);i.rootRecordsLength=c.length,c=function(e){for(var t=0,r=new Array,s=0;s<e.length;s++){var o=e[s];if(0==o.level&&t++,t>i.dataview.pagesize*i.dataview.pagenum&&t<=i.dataview.pagesize*i.dataview.pagenum+i.dataview.pagesize&&r.push(o),t>i.dataview.pagesize*i.dataview.pagenum+i.dataview.pagesize)break}return r}(c)}else var c=i.source.getGroupedRecords(i.groups,"records","label",null,"data",null,"parent",d,h);var u=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(t.push(r),r.records&&r.records.length>0)for(var s=u(r.records,new Array),o=0;o<s.length;o++)s[o].leaf,t.push(s[o])}return t};d=l=u.call(i,c,new Array),this.rowsByKey=new Array;for(I=0;I<d.length;I++){var g=d[I];this.rowsByKey[g.uid]=g}}l=d;this.renderedRecords=l;var p=l.length,f=this.tableZIndex,m=0,v=0;if(o)for(j=0;j<s;j++){(A=(q=this.columns.records[j]).width)<q.minwidth&&(A=q.minwidth),A>q.maxwidth&&(A=q.maxwidth);k=e('<table><tr><td role="gridcell" style="max-width: '+A+"px; width:"+A+'px;" class="'+B+'"></td></tr></table>');e(document.body).append(k);var w=k.find("td");m=1+parseInt(w.css("padding-left"))+parseInt(w.css("padding-right")),k.remove();break}for(var y=this.rtl?" "+this.toTP("jqx-grid-table-rtl"):"",x="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+y+"' id='table"+this.element.id+"'><colgroup>",b="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+y+"' id='pinnedtable"+this.element.id+"'><colgroup>",_=0,j=0;j<s;j++){var q=this.columns.records[j];if(q.hidden)_++,0;else{if((A=q.width)<q.minwidth&&(A=q.minwidth),A>q.maxwidth&&(A=q.maxwidth),(A-=m)<0&&(A=0),o){O=A;j==_&&O++,q.rowDetailscolumn?(b+="<col style='max-width: "+(O=O+4)+"px; width: "+O+"px;'>",x+="<col style='max-width: "+O+"px; width: "+O+"px;'>"):(b+="<col style='max-width: "+O+"px; width: "+O+"px;'>",x+="<col style='max-width: "+O+"px; width: "+O+"px;'>")}else b+="<col style='max-width: "+A+"px; width: "+A+"px;'>",x+="<col style='max-width: "+A+"px; width: "+A+"px;'>";v+=A}}x+="</colgroup>",b+="</colgroup>",this._hiddencolumns=!1;var S=!1;if(this.rowDetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===p){var T='<tr role="row">',C=this.host.height();if(this.pageable&&(C-=this.pagerHeight,"both"===this.pagerPosition&&(C-=this.pagerHeight)),C-=this.columnsHeight,this.filterable){var z=this.filter.find(".filterrow"),P=1;this.filter.find(".filterrow-hidden").length>0&&(P=0),C-=this.filterHeight+this.filterHeight*z.length*P}this.showstatusbar&&(C-=this.statusBarHeight),this.showAggregates&&(C-=this.aggregatesHeight),C<25&&(C=25),"hidden"!=this.hScrollBar[0].style.visibility&&(C-=this.hScrollBar.outerHeight()),("auto"===this.height||null===this.height||this.autoheight)&&(C=300);var k='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+C+"px; height: "+C+"px; max-width:"+v+"px; width:"+v+"px;",B=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");k+='" class="'+(B+=" "+this.toTP("jqx-center-align"))+'">',k+=this.gridlocalization.emptydatastring,x+=T+=k+="</td>",b+=T,this.table[0].style.width=v+2+"px",r=v}for(var H=this.getRows(),D=new Array,I=0;I<l.length;I++){te=(g=l[I]).uid;void 0===g.uid&&(g.uid=this.dataview.generatekey());var T='<tr data-key="'+te+'" role="row" id="row'+I+this.element.id+'">',F='<tr data-key="'+te+'" role="row" id="row'+I+this.element.id+'">';if(a>0&&g.level<a)var T='<tr data-role="row-group" data-key="'+te+'" role="row" id="row'+I+this.element.id+'">',F='<tr data-role="row-group" data-key="'+te+'" role="row" id="row'+I+this.element.id+'">';for(var M=0,R=0,j=0;j<s;j++){var L=this.columns.records[j];(L.pinned||this.rtl&&this.columns.records[s-1].pinned)&&(S=!0);var A=L.width;A<L.minwidth&&(A=L.minwidth),A>L.maxwidth&&(A=L.maxwidth),(A-=m)<0&&(A=0);B=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");L.pinned&&(B+=" "+this.toTP("jqx-grid-cell-pinned")),this.sortcolumn===L.displayfield&&(B+=" "+this.toTP("jqx-grid-cell-sort")),this.altRows&&I%2!=0&&(B+=" "+this.toTP("jqx-grid-cell-alt")),this.rtl&&(B+=" "+this.toTP("jqx-cell-rtl"));var K="";if(a>0&&g.level<a)if(o)B+=" "+this.toTP("jqx-grid-cell-pinned");else{B+=" "+this.toTP("jqx-grid-cell-pinned"),K+=' colspan="'+s+'"';for(var O=0,N=0;N<s;N++){var E=i.columns.records[N],G=E.width;G<E.minwidth&&(A=E.minwidth),G>E.maxwidth&&(A=E.maxwidth),(G-=m)<0&&(G=0),E.hidden||(O+=G)}A=O}var k='<td role="gridcell" '+K+' style="max-width:'+A+"px; width:"+A+"px;",W='<td role="gridcell" '+K+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+A+"px; width:"+A+"px;";j==s-1&&1==s&&(k+="border-right-color: transparent;",W+="border-right-color: transparent;");var V=!1;a>0&&g.level<a&&(V=!0),V?this.rtl&&(B+=" "+this.toTP("jqx-right-align")):"left"!=L.cellsalign&&("right"===L.cellsalign?B+=" "+this.toTP("jqx-right-align"):B+=" "+this.toTP("jqx-center-align")),this.rowinfo[g.uid]&&(this.rowinfo[g.uid].selected&&!L.rowDetailscolumn&&this.editKey!==g.uid&&"none"!==this.selectionMode&&(B+=" "+this.toTP("jqx-grid-cell-selected"),B+=" "+this.toTP("jqx-fill-state-pressed")),this.rowinfo[g.uid].locked&&(B+=" "+this.toTP("jqx-grid-cell-locked"))),L.hidden?V||(k+="display: none;",W+="display: none;",this._hiddencolumns=!0):(M+=m+A,0==R&&(k+="border-left-width: 0px;",W+="border-left-width: 0px;"),R++),a>0&&o&&V&&j>=a&&(k+="font-size: 1px; border-color: transparent;  color: transparent;",W+="font-size: 1px; border-color: transparent; color: transparent;"),L.pinned&&(k+="pointer-events: auto;",W+="pointer-events: auto;"),!V&&L.rowDetailscolumn&&(this.rowinfo[g.uid]?this.rowinfo[g.uid].nodetails||(this.rowinfo[g.uid].expanded?(this.rtl?B+=" "+this.toTP("jqx-grid-group-expand-rtl"):B+=" "+this.toTP("jqx-grid-group-expand"),B+=" "+this.toTP("jqx-icon-arrow-down")):this.rtl?(B+=" "+this.toTP("jqx-grid-group-collapse-rtl"),B+=" "+this.toTP("jqx-icon-arrow-left")):(B+=" "+this.toTP("jqx-grid-group-collapse"),B+=" "+this.toTP("jqx-icon-arrow-right"))):this.rtl?(B+=" "+this.toTP("jqx-grid-group-collapse-rtl"),B+=" "+this.toTP("jqx-icon-arrow-left")):(B+=" "+this.toTP("jqx-grid-group-collapse"),B+=" "+this.toTP("jqx-icon-arrow-right"))),(!this.autoRowHeight||this.autoRowHeight&&!L.autoCellHeight)&&(B+=" "+this.toTP("jqx-grid-cell-nowrap "));var U=i._getcellvalue(L,g),Y=L.cellsFormat;if(a>0&&g.level<a&&(U=g.label,Y=i.getColumn(i.groups[g.level]).cellsFormat),""!=Y&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(U)?U=e.jqx.dataFormat.formatdate(U,Y,i.gridlocalization):(e.jqx.dataFormat.isNumber(U)||!isNaN(parseFloat(U))&&isFinite(U))&&(U=e.jqx.dataFormat.formatnumber(U,Y,i.gridlocalization))),V)this.groupsRenderer&&(U=this.groupsRenderer(U,g,g.level));else{if(""!=L.cellclassname&&L.cellclassname)if("string"==typeof L.cellclassname)B+=" "+L.cellclassname;else{var X=L.cellclassname(I,L.datafield,U,g);X&&(B+=" "+X)}if(""!=L.cellsRenderer&&L.cellsRenderer){if(-1===(Z=H.indexOf(g))&&g.originalRecord)var Z=H.indexOf(g.originalRecord);(U=L.cellsRenderer(Z,L.datafield,U,g))&&(U.indexOf("<jqx-")>=0||U.indexOf(" ng-")>=0)&&D.push({rowKey:g.uid,row:Z,column:L.datafield,value:U,columnIndex:j})}}if(k+='" class="'+B+'">',k+=U,k+="</td>",W+='" class="'+B+'">',W+=U,W+="</td>",L.pinned?(F+=k,T+=k):(T+=k,S&&(F+=W)),a>0&&!o&&g.level<a)break}if(0==r&&(this.table[0].style.width=M+2+"px",r=M),T+="</tr>",F+="</tr>",x+=T,b+=F,this.rowinfo[g.uid]?("group"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].group=V),"row"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].row=g),"details"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].details=null),"detailsHeight"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].detailsHeight=200),"initialized"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].initialized=!1),"expanded"in this.rowinfo[g.uid]||(this.rowinfo[g.uid].expanded=!1)):this.rowinfo[g.uid]={group:V,row:g,details:null,detailsHeight:200,initialized:!1,expanded:!1},this.serverProcessing&&(this.rowinfo[g.uid].row=g),this.rowDetails){var $=this.rowinfo[g.uid].detailsHeight;if(this.rowinfo[g.uid])if(this.rowinfo[g.uid].expanded)J='<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+$+"px; max-height: "+$+"px; height: "+$+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else J='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+$+"px; max-height: "+$+"px; height: "+$+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';else var J='<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+$+"px; max-height: "+$+"px; height: "+$+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"';B=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");B+=" "+this.toTP("jqx-details"),B+=" "+this.toTP("jqx-reset"),x+=J+='" class="'+B+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+$+"px; max-height: "+$+"px; height: "+$+'px;"><div data-role="details"></div></div></td></tr>',b+=J}}if(x+="</table>",b+="</table>",S){i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(b+x)}):i.table[0].innerHTML=b+x;var Q=this.table.find("#table"+this.element.id),ee=this.table.find("#pinnedtable"+this.element.id);if(ee.css("float","left"),ee.css("pointer-events","none"),Q.css("float","left"),ee[0].style.position="absolute",Q[0].style.position="relative",Q[0].style.zIndex=f-10,ee[0].style.zIndex=f+10,this._table=Q,this._table[0].style.left="0px",this._pinnedTable=ee,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=r+"px",this._table[0].style.width=r+"px",this.rtl&&r>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-r+parseInt(this.element.style.width)+"px"),this.rowDetails)for(I=0;I<p;I++){var te=(g=l[I]).uid;if(this.rowinfo[te].details){var ie=e(this._table.children()[1]).children("[data-key="+te+"]"),re=e(this._pinnedTable.children()[1]).children("[data-key="+te+"]");if(ie){var se=re.next(),oe=e(e(se).children().children());oe.children().detach(),oe.append(this.rowinfo[g.uid].details)}}}}else{i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(x)}):i.table[0].innerHTML=x;N=this.table.find("#table"+this.element.id);this._table=N,e.jqx.browser.msie&&e.jqx.browser.version<10&&(this._table[0].style.width=r+"px"),0===p&&(this._table[0].style.width=2+r+"px")}if(0===p&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),D&&D.length>0){this._table[0].rows;e.each(D,function(){this.row;var t=this.rowKey,r=(this.column,this.columnIndex),s=i._getuirow(t);if(s){var o=s[0].cells[r];e.jqx.angularCompile&&e.jqx.angularCompile(o,"<div>"+o.innerHTML+"</div>")}})}this.rendered&&this.rendered()}},getcolumnindex:function(e){var t=this.getColumn(e);return this.columns.records.indexOf(t)},setcolumnindex:function(t,i,r){if(!((h=this.getColumn(t)).pinned||h.hidden||h.checkboxcolumn||h.grouped)){var s=this.columns.records.indexOf(h);this.columns.records.splice(s,1),this.columns.records.splice(i,0,h);var o=0,a=this.headerZIndex;this.columnsrow.children().detach();this.toThemeProperty("jqx-grid-cell");" "+this.toThemeProperty("jqx-grid-cell-pinned")," "+this.toThemeProperty("jqx-item");var l=this;if(void 0!=l.filterrow)e(l.filterrow.children()[0]);this.columnsrow[0].cells=[];var n=!1;if(e.each(this.columns.records,function(e,t){var i=this.uielement;l.columnsrow.append(i),l.rtl?i.css("z-index",a++):i.css("z-index",a--);var r=l.rtl?250+a+1:250+a-1;this.pinned&&i.css("z-index",r);var s=this.width;i.css("left",o),l.columnsrow[0].cells[l.columnsrow[0].cells.length]=i[0],this.hidden&&(n=!0),this.hidden&&this.hideable||(o+=s)}),this.groupable){var d=this.groups.length;d>0&&s-d>=0&&(s-=d,i-=d)}this.rowDetails&&s-1>=0&&(s--,i--),"checkbox"==this.selectionMode&&s-1>=0&&(s--,i--);var h=this._columns[s];this._columns.splice(s,1),this._columns.splice(i,0,h),this.resize(),this._rendercolumnGroups(),this._raiseEvent("columnReordered",{dataField:h.datafield,oldIndex:s,newIndex:i})}},_pinnedColumnsLength:function(){var t=0;return e.each(this.columns.records,function(){this.pinned&&t++,this.grouped&&t++}),this.rowDetails&&t++,"checkbox"==this.selectionMode&&t++,t},_handlecolumnsReorder:function(){var t=this,i=-1,r=!1;if(t.columnsReorder){var s="mousemove.reorder"+this.element.id,o="mousedown.reorder"+this.element.id,a="mouseup.reorder"+this.element.id,l=!1;this.isTouchDevice()&&!0!==this.touchmode&&(l=!0,s=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(s){if(t.resizing)return!0;if(null!=t.reordercolumn){var o=parseInt(s.pageX),a=parseInt(s.pageY);if(l){var n=t.getTouches(s)[0];void 0!=n&&(o=parseInt(n.pageX),a=parseInt(n.pageY))}var d=t.host.coord(),h=parseInt(d.left),c=parseInt(d.top);void 0!=t.dragmousedownoffset&&null!=t.dragmousedownoffset||(t.dragmousedownoffset={left:0,top:0});var u=parseInt(o)-parseInt(t.dragmousedownoffset.left),g=parseInt(a)-parseInt(t.dragmousedownoffset.top);if(t.reordercolumn.css({left:u+"px",top:g+"px"}),r=!1,o>=h&&o<=h+t.host.width()&&a>=c&&a<=c+t.host.height()&&(r=!0),i=-1,r){t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-dragcancel-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-drag-icon"));var p=t.columnsheader.coord(),f=p.top+t.columnsheader.height();if(null!=t.columnsdropline)if(a>=p.top&&a<=f){if(i=t._handlereordercolumnsdroplines(o),t.columnGroups&&-1!=i){var m=0;m+=t._pinnedColumnsLength();var v=i.index;if(v>=m){var w=t.columns.records[v];if(void 0!=w){y=t.columns.records.indexOf(t.getColumn(w.datafield));if(null==w.datafield)var y=t.columns.records.indexOf(t.getcolumnbytext(w.text));var x=e.data(t.reordercolumn[0],"reorderrecord"),b=w;if(t.columns.records.indexOf(t.getColumn(x))<y&&"before"==i.position&&(b=t.columns.records[y-1]),b.columngroup!=t.getColumn(x).columngroup)return void t.columnsdropline.hide()}}}}else t.columnsdropline.fadeOut("slow")}else null!=t.columnsdropline&&t.columnsdropline.fadeOut("slow"),t.reordercolumnicon.removeClass(t.toThemeProperty("jqx-grid-drag-icon")),t.reordercolumnicon.addClass(t.toThemeProperty("jqx-grid-dragcancel-icon"));if(s.preventDefault&&(s.preventDefault(),s.stopPropagation()),l)return s.preventDefault(),s.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(e(document),o),this.addHandler(e(document),o,function(i){if(t.resizing)return!0;t.columnsbounds=new Array;var r=t.host.coord().left,s=t.host.coord().top;t.showtoolbar&&(s+=t.toolbarHeight),t.filter&&(s+=t.filter.height());var o=0;e.each(t.columns.records,function(i){var a=this;if(a.hidden)return t.columnsbounds[t.columnsbounds.length]={top:s,column:a,left:r,width:0,height:2},!0;0==o&&(r=t.rtl?parseInt(t.host.coord().left)-t.hScrollInstance.max+t.hScrollInstance.value:parseInt(t.host.coord().left)-t.hScrollInstance.value),o++;var l=2+t.columnsHeight;t.columnshierarchy&&(s=e(a.uielement).coord().top,l=e(a.uielement).height()),t.columnsbounds[t.columnsbounds.length]={top:s,column:a,left:r,width:a.width,height:l},r+=a.width})}),this.removeHandler(e(document),a),this.addHandler(e(document),a,function(s){if(t.resizing)return!0;t.__drag=!1,e(document.body).removeClass("jqx-disableselect");parseInt(s.pageX),parseInt(s.pageY);if(l){var o=t.getTouches(s)[0];parseInt(o.pageX),parseInt(o.pageY)}var a=t.host.coord();parseInt(a.left),parseInt(a.top);if(t.showtoolbar&&t.toolbarHeight,t.columndragstarted=!1,t.dragmousedown=null,null!=t.reordercolumn){var n=e.data(t.reordercolumn[0],"reorderrecord"),d=t.columns.records.indexOf(t.getColumn(n));t.reordercolumn.remove(),t.reordercolumn=null;var h=0;if(h+=t._pinnedColumnsLength(),null!=n){if(r&&-1!=i){var c=i.index;if(c>=h){var u=t.columns.records[c];if(void 0!=u){g=t.columns.records.indexOf(t.getColumn(u.datafield));if(null==u.datafield)var g=t.columns.records.indexOf(t.getcolumnbytext(u.text));if(t.columnGroups){var p=u;if(d<g&&"before"==i.position&&(p=t.columns.records[g-1]),p.columngroup!=t.getColumn(n).columngroup)return void(null!=t.columnsdropline&&(t.columnsdropline.remove(),t.columnsdropline=null))}d<g?"before"==i.position?t.setcolumnindex(n,g-1):t.setcolumnindex(n,g):d>g&&t.setcolumnindex(n,g)}}}null!=t.columnsdropline&&(t.columnsdropline.remove(),t.columnsdropline=null)}}})}},getcolumnbytext:function(t){var i=null;return this.columns.records&&e.each(this.columns.records,function(){if(this.text==t)return i=this,!1}),i},_handlereordercolumnsdroplines:function(t){var i=this,r=-1,s=i._pinnedColumnsLength(),o=parseInt(i.host.coord().left)+i.host.width(),a="hidden"!=i.vScrollBar.css("visibility")?19:0;return i.rtl||(a=0),e.each(i.columnsbounds,function(e){if(e>=s){if(0==this.width)return!0;if(t<=this.left+this.width/2)return t>o?(i.columnsdropline.fadeOut(),!1):(i.columnsdropline.css("left",a+parseInt(this.left)+"px"),i.columnsdropline.css("top",parseInt(this.top)+"px"),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"before"},!1);if(t>=this.left+this.width/2){if(this.left+this.width>o)return i.columnsdropline.fadeOut(),!1;i.columnsdropline.css("left",a+1+this.left+this.width),i.columnsdropline.css("top",this.top),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"after"}}}}),r},_createreordercolumn:function(t,i,r){var s=this,o=i;s.reordercolumn&&s.reordercolumn.remove(),s.columnsdropline&&s.columnsdropline.remove(),s.reordercolumn=e("<div></div>");var a=t.clone();s.reordercolumn.css("z-index",999999),a.css("border-width","1px"),a.css("opacity","0.4");var l=e(a.find("."+s.toThemeProperty("jqx-grid-column-menubutton")));l.length>0&&l.css("display","none");var n=e(a.find(".jqx-icon-close"));n.length>0&&n.css("display","none"),s.reordercolumnicon=e('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),s.reordercolumnicon.addClass(s.toThemeProperty("jqx-grid-drag-icon")),s.reordercolumn.css("float","left"),s.reordercolumn.css("position","absolute");s.host.coord();a.width(t.width()+16),s.reordercolumn.append(a),s.reordercolumn.height(t.height()),s.reordercolumn.width(a.width()),s.reordercolumn.append(s.reordercolumnicon),e(document.body).append(s.reordercolumn),a.css("margin-left",0),a.css("left",0),a.css("top",0),s.reordercolumn.css("left",o.left+s.dragmousedown.left),s.reordercolumn.css("top",o.top+s.dragmousedown.top),void 0!=r&&r&&(s.columnsdropline=e('<div style="z-index: 9999; display: none; position: absolute;"></div>'),s.columnsdropline.width(2),s.columnsdropline.addClass(s.toThemeProperty("jqx-grid-group-drag-line")),e(document.body).append(s.columnsdropline))},_handlecolumnsdragreorder:function(t,i){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var r=this,s=!1;this.isTouchDevice()&&!0!==this.touchmode&&(s=!0);var o="mousedown.drag",a="mousemove.drag";s?(o=e.jqx.mobile.getTouchEventName("touchstart")+".drag",a=e.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(i,"dragstart",function(e){return!1}),this.addHandler(i,o,function(i){if(0==t.draggable)return!0;if(r.resizing)return!0;r.__drag=!0;var o=i.pageX,a=i.pageY;if(s){var l=r.getTouches(i)[0];o=l.pageX,a=l.pageY}r.dragmousedown={left:o,top:a};var n=e(i.target).coord();return r.dragmousedownoffset={left:parseInt(o)-parseInt(n.left),top:parseInt(a-n.top)},i.preventDefault&&i.preventDefault(),!0}),this.addHandler(i,a,function(o){if(!t.draggable)return!0;if(void 0==t.datafield)return!0;if(t.pinned)return!0;if(r.resizing)return!0;if(r.dragmousedown){var l=o.pageX,n=o.pageY;if(s){var d=r.getTouches(o)[0];void 0!=d&&(l=d.pageX,n=d.pageY)}if(a={left:l,top:n},!r.columndragstarted&&null==r.reordercolumn){var h=Math.abs(a.left-r.dragmousedown.left),c=Math.abs(a.top-r.dragmousedown.top);(h>3||c>3)&&(r._createreordercolumn(i,a,!0),e(document.body).addClass("jqx-disableselect"),e.data(r.reordercolumn[0],"reorderrecord",t.datafield))}}})},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_handlecolumnsResize:function(){var t=this;if(this.columnsResize){var i=!1;t.isTouchDevice()&&(i=!0);var r="mousemove.resize"+this.element.id,s="mousedown.resize"+this.element.id,o="mouseup.resize"+this.element.id;if(i)var r=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,s=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,o=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),r),this.addHandler(e(document),r,function(r){if(null!=t.resizablecolumn&&!t.disabled&&t.resizing&&null!=t.resizeline){t.resizablecolumn.columnelement;var s=t.host.coord(),o=parseInt(t.resizestartline.coord().left),a=o-t._startcolumnwidth,l=t.resizablecolumn.column.minwidth;l="auto"==l?0:parseInt(l);var n=t.resizablecolumn.column.maxwidth;n="auto"==n?0:parseInt(n);var d=r.pageX;i&&(d=e.jqx.mobile.getTouches(r)[0].pageX),a+=l;var h=n>0?o+n:0,c=0==n||t._startcolumnwidth+d-o<n;if(t.rtl)c=!0;if(c)if(t.rtl){if(d>=s.left&&d<=s.left+t.host.width()&&(t.resizeline.css("left",d),i))return!1}else if(d>=s.left&&d>=a&&(0!=h&&r.pageX<h?t.resizeline.css("left",d):0==h&&t.resizeline.css("left",d),i))return!1}if(!i&&null!=t.resizablecolumn)return!1}),this.removeHandler(e(document),s),this.addHandler(e(document),s,function(i){if(null!=t.resizablecolumn&&!t.disabled){var r=t.resizablecolumn.columnelement;if(r.coord().top+r.height()+5<i.pageY)return void(t.resizablecolumn=null);if(r.coord().top-5>i.pageY)return void(t.resizablecolumn=null);t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,e(document.body).addClass("jqx-disableselect"),e(document.body).addClass("jqx-position-reset"),t._mouseDownResize=new Date,t.resizing=!0,t._resizecolumn=t.resizablecolumn.column,t.resizeline=t.resizeline||e('<div style="position: absolute;"></div>'),t.resizestartline=t.resizestartline||e('<div style="position: absolute;"></div>'),t.resizebackground=t.resizebackground||e('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),t.resizebackground.css("opacity",.01),t.resizebackground.css("cursor","col-resize"),t.resizeline.css("cursor","col-resize"),t.resizestartline.css("cursor","col-resize"),t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline")),t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline")),e(document.body).append(t.resizeline),e(document.body).append(t.resizestartline),e(document.body).append(t.resizebackground);var s=t.resizablecolumn.columnelement.coord();t.resizebackground.css("left",t.host.coord().left),t.resizebackground.css("top",t.host.coord().top),t.resizebackground.width(t.host.width()),t.resizebackground.height(t.host.height()),t.resizebackground.css("z-index",999999999);var o=function(e){t.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+t._startcolumnwidth);var i=0;i+=t.showtoolbar?t.toolbarHeight:0,i+=t.showstatusbar?t.statusBarHeight:0,i+=t.showAggregates?t.aggregatesHeight:0,t.pageable&&"bottom"!=t.pagerPosition&&(i+=t.pagerHeight),t.filterable&&(i+=t.filter.height());var r=0;t.pageable&&"top"!=t.pagerPosition&&(r=t.pagerHeight);var o="hidden"!=t.hScrollBar.css("visibility")?t.scrollBarSize:0;e.css("top",parseInt(s.top)),e.css("z-index",9999999999),t.columnGroups?e.height(t.host.height()+t.resizablecolumn.columnelement.height()-r-i-o-t.columnGroupslevel*t.columnsHeight):e.height(t.host.height()-r-i-o),e.show("fast")};o(t.resizeline),o(t.resizestartline),t.dragmousedown=null}});var a=function(){if(e(document.body).removeClass("jqx-disableselect"),e(document.body).removeClass("jqx-position-reset"),t.resizing){if(t._mouseUpResize=new Date,t._mouseUpResize-t._mouseDownResize<200)return t.resizing=!1,void(null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove()));if(t.resizing=!1,!t.disabled){var i=t.host.width();if("hidden"!=t.vScrollBar[0].style.visibility&&(i-=20),i<0&&(i=0),null!=t._resizecolumn&&null!=t.resizeline&&"block"==t.resizeline.css("display")){var r=parseInt(t.resizeline.css("left")),s=parseInt(t.resizestartline.css("left")),o=t._startcolumnwidth+r-s;if(t.rtl)o=t._startcolumnwidth-r+s;var a=t._resizecolumn.width;t._resizecolumn.width=o,void 0!=t._resizecolumn._percentagewidth&&(t._resizecolumn._percentagewidth=o/i*100);for(var l=0;l<t._columns.length;l++)if(t._columns[l].datafield===t._resizecolumn.datafield){t._columns[l].width=t._resizecolumn.width;break}t.hScrollBar[0].style.visibility;var n=t._resizecolumn.displayfield;t._updatecolumnwidths(),t.refresh(),t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null,t._raiseEvent("columnResized",{dataField:n,oldWidth:a,newWidth:o})}else t.resizablecolumn=null}}};try{if(""!=document.referrer||window.frameElement){var l=null;if(null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(l=document.referrer),l&&-1!=l.indexOf(document.location.host)){var n=function(e){a()};window.top.document.addEventListener?window.top.document.addEventListener("mouseup",n,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",n)}}}catch(e){}this.removeHandler(e(document),o),this.addHandler(e(document),o,function(i){if(null!=e.data(document.body,"contextmenu"+t.element.id)&&t.autoshowcolumnsmenubutton)return!0;a()})}},_updatecolumnwidths:function(){var t=this.host.width(),i=t;"hidden"!==this.vScrollBar.css("visibility")&&this.scrollBarSize>0&&(t-=parseInt(this.scrollBarSize)+6,i=t);var r="";if(void 0!=this.columns&&void 0!=this.columns.records){var s=this,o=!1;e.each(this.columns.records,function(e,o){if(!this.hidden)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var o=0;"hidden"==s.vScrollBar[0].style.visibility||s.scrollBarSize;0==s.scrollBarSize&&0,o=parseFloat(this.width)*i/100,void 0!=this._percentagewidth&&(o=parseFloat(this._percentagewidth)*i/100),o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth),t-=Math.round(o)}else"auto"==this.width||this._width?r+=this.text:t-=this.width});var a=this.columnsheader.find("#columntable"+this.element.id);if(0!=a.length){var l=0,n=a.find(".jqx-grid-column-header"),d=0;e.each(this.columns.records,function(a,h){var c=e(n[a]),u=!1,g=this.width,p=this.width;if(-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(g=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,g=Math.round(g),u=!0),"auto"==this.width||this._width||u)if(u)g<this.minwidth&&"auto"!=this.minwidth&&(g=this.minwidth,this.width=g),g>this.maxwidth&&"auto"!=this.maxwidth&&(g=this.maxwidth,this.width=g),parseInt(c[0].style.width)!=g&&(c.width(g),this.width=g);else{var f=Math.floor(t*(this.text.length/r.length));isNaN(f)&&(f=this.minwidth);var m=t*(this.text.length/r.length)-f;(l+=m)>=1&&(l-=1,f++),l>=.5&&a==s.columns.records.length-1&&f++,f<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),f=10+$element.width(),$element.remove()),f<this.minwidth&&(f=this.minwidth),f>this.maxwidth&&(f=this.maxwidth),this._width="auto",this.width=f,c.width(this.width)}else parseInt(c[0].style.width)!=this.width&&c.width(this.width);parseInt(c[0].style.left)!=d&&c.css("left",d),this.hidden||(d+=this.width),this._requirewidthupdate=!0,p!==this.width&&(o=!0)}),this.columnsheader.width(2+d),a.width(this.columnsheader.width()),this._resizecolumnGroups(),o&&this._renderrows(),this.showAggregates&&this._refreshcolumnsaggregates()}}},_rendercolumnheaders:function(){var t=this;if(!this._updating){this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var i=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array;var r=0,s="",o=this.host.width(),a=o,l=new Array,n=new Array;if(e.each(this.columns.records,function(e,i){if(!this.hidden)if("auto"==this.width||this._width)s+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)o-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)o-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var i=0;(i=parseFloat(this.width)*a/100)<this.minwidth&&"auto"!=this.minwidth&&(i=this.minwidth),i>this.maxwidth&&"auto"!=this.maxwidth&&(i=this.maxwidth),o-=i}else"string"==typeof this.width&&(this.width=parseInt(this.width)),o-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),l[l.length]=this):n[n.length]=this}),this.rtl){var d=0;l.reverse();for(h=this.columns.records.length-1;h>=this.columns.records.length-l.length;h--)this.columns.replace(h,l[d++]);for(c=0;c<n.length;c++)this.columns.replace(c,n[c])}else{for(var h=0;h<l.length;h++)this.columns.replace(h,l[h]);for(var c=0;c<n.length;c++)this.columns.replace(l.length+c,n[c])}var u=this.headerZIndex,g=t.columnsHeight,p=function(e,i){var r=t.columnGroupslevel*t.columnsHeight;return r-=i.level*t.columnsHeight},f=0;e.each(this.columns.records,function(l,n){this.height=t.columnsHeight,t.columnGroups&&t.columnGroups.length&&(this.height=p(this.datafield,this),g=this.height);var d=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(d+=" "+t.toTP("jqx-grid-column-header-rtl")),t.enableBrowserSelection||(d+=" "+t.toTP("jqx-disableselect"));var h=self.rtl?250+u+1:250+u-1,c=t.rtl?u++:u--,m=e('<div role="columnheader" style="z-index: '+c+';position: absolute; height: 100%;" class="'+d+'"><div style="height: 100%; width: 100%;"></div></div>');t.rtl&&0===l&&(m[0].style.borderLeftColor="transparent"),t.columnGroups&&(m[0].style.height=g+"px",m[0].style.bottom="0px",this.pinned&&(m[0].style.zIndex=h)),this.uielement=m,this.element=m,""!=this.classname&&this.classname&&m.addClass(this.classname);var v=this.width,w=!1;if(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&void 0==this._percentagewidth||(v=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*a/100:parseFloat(this.width)*a/100,v=Math.round(v),w=!0),"auto"==this.width||this._width||w)if(w)v<this.minwidth&&"auto"!=this.minwidth&&(v=this.minwidth),v>this.maxwidth&&"auto"!=this.maxwidth&&(v=this.maxwidth),void 0!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),m.width(v),this.width=v;else{var y=Math.floor(o*(this.text.length/s.length)),x=o*(this.text.length/s.length)-y;(f+=x)>=1&&(f-=1,y++),f>=.5&&l==t.columns.records.length-1&&y++,isNaN(y)&&(y=this.minwidth),y<0&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),y=10+$element.width(),$element.remove()),y<this.minwidth&&(y=this.minwidth),y>this.maxwidth&&(y=this.maxwidth),this._width="auto",this.width=parseInt(y),v=this.width,m.width(this.width)}else v<this.minwidth&&"auto"!=this.minwidth&&(v=this.minwidth),v>this.maxwidth&&"auto"!=this.maxwidth&&(v=this.maxwidth),m[0].style.width=parseInt(v)+"px";this.hidden&&m.css("display","none");var b=e(m.children()[0]);i[0].cells[l]=m[0];var _=null!=this.renderer?this.renderer(this.text,this.align,g):t._rendercolumnheader(this.text,this.align,g,t);if(null==_&&(_=t._rendercolumnheader(this.text,this.align,g,t)),null!=this.renderer&&(_=e(_)),!0,t.WinJS?MSApp.execUnsafeLocalFunction(function(){b.append(e(_))}):this.renderer?b.append(e(_)):_&&(b[0].innerHTML=_),null!=_){var j=e('<div class="iconscontainer" style="height: '+g+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+g+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>');b.append(j);var q=j.children();this.sortasc=q[1],this.sortdesc=q[2],this.filtericon=q[0],this.iconscontainer=j,t.rtl&&(j.css("margin-left","0px"),j.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left"))}i.append(m),t.columnsReorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,m);var S=this;if(t.addHandler(m,"click",function(e){if(S.checkboxcolumn)return!0;t._togglesort&&(t._loading||t._togglesort(S)),e.preventDefault()}),t.columnsResize){var T=!1,C="mousemove";t.isTouchDevice()&&(T=!0,C=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(m,C,function(i){if(!S.resizable)return t.resizablecolumn=null,!0;var r=parseInt(i.pageX),s=5,o=parseInt(m.coord().left);if(t.hasTransform&&(o=e.jqx.utilities.getOffset(m).left),t._handlecolumnsResize){if(T)return r=e.jqx.mobile.getTouches(i)[0].pageX,s=40,r>=o+S.width-s?(t.resizablecolumn={columnelement:m,column:S},m.css("cursor","col-resize")):(m.css("cursor",""),t.resizablecolumn=null),!0;var a=S.width;if(t.rtl&&(a=0),r>=o+a-s){if(r<=o+a+s)return t.resizablecolumn={columnelement:m,column:S},m.css("cursor","col-resize"),!1;m.css("cursor",""),t.resizablecolumn=null}else m.css("cursor",""),r<o+a-s&&(S._animating||S._menuvisible||m.mouseenter()),t.resizablecolumn=null}})}m.css("left",r),this.hidden||(r+=v),S.rendered&&S.rendered(e(b[0].firstChild),S.align,g)&&null!=j&&j.hide()}),r>0?this.columnsheader.width(2+r):this.columnsheader.width(r),this.columnsrow=i,t.columnsheader.append(i),i.width(r),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsReorder&&this._handlecolumnsReorder(),this._handlecolumnsResize&&this._handlecolumnsResize(),this.columnGroups&&this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(this.columnGroups){for(var t=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&t++;var r=this.headerZIndex-t+this.columns.records.length,s=this,o=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header");s.rtl&&(o+=" "+s.toTP("jqx-grid-columngroup-header-rtl"));var a=this.columnsheader.find("#columntable"+this.element.id);a.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columnGroupslevel-1;l++)for(i=0;i<this.columnGroups.length;i++){var n=this.columnGroups[i],d=n.level;if(d===l){var h=d*this.columnsHeight,c=99999;if(n.groups){var u=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=u(r):r.hidden||(t+=r.width,c=Math.min(parseInt(r.element[0].style.left),c))}return t};n.width=u(n),n.left=c;var g=this.columnsHeight,p=r--,f=e('<div role="columnheader" style="z-index: '+p+';position: absolute;" class="'+o+'"></div>'),m=e(this._rendercolumnheader(n.text,n.align,this.columnsHeight,this));f.append(m),f[0].style.left=c+"px",0===c&&(f[0].style.borderLeftColor="transparent"),f[0].style.top=h+"px",f[0].style.height=g+"px",f[0].style.width=-1+n.width+"px",a.append(f),n.element=f}}}}},_resizecolumnGroups:function(){if(this.columnGroups)for(var e=0;e<this.columnGroups.length;e++){var t=this.columnGroups[e],i=t.level*this.columnsHeight,r=99999;if(t.groups){var s=function(e){for(var t=0,i=0;i<e.groups.length;i++){var o=e.groups[i];o.groups?t+=s(o):o.hidden||(t+=o.width,r=Math.min(parseInt(o.element[0].style.left),r))}return t};t.width=s(t),t.left=r;var o=this.columnsHeight,a=t.element;a[0].style.left=r+"px",a[0].style.top=i+"px",a[0].style.height=o+"px",a[0].style.width=-1+t.width+"px"}}},_removecolumnhandlers:function(t){var i=this,r=e(t.element);if(r.length>0){i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave");var s=e(t.filtericon);i.removeHandler(s,"mousedown"),i.removeHandler(s,"click"),i.removeHandler(r,"click")}},_calculateaggregate:function(e,t,i,r){if(!e.datafield)return null;var s=e.aggregates;if(s||(s=t),s){for(var o=new Array,a=0;a<s.length;a++)"count"!=s[a]&&(o[o.length]=e.cellsFormat);if(this.source&&this.source.getAggregatedData){void 0==r&&(r=this.getRows(),this.dataViewRecords&&(r=this.dataViewRecords));var l=r,n=-1;if(this.treeGrid){var d=new Array,h=function(e){for(var t=0;t<e.length;t++)void 0!=e[t]&&(-1==n&&(n=e[t].level),e[t].aggregate||d.push(e[t]),!e[t].leaf&&e[t].records&&e[t].records.length>0&&h(e[t].records))};h(r),r=d}if(this.treeGrid&&this.filterable&&this.dataview.filters.length>0){for(var c=new Array,a=0;a<r.length;a++)r[a]&&!1!==r[a]._visible&&c.push(r[a]);r=c;for(var u=new Array,a=0;a<l.length;a++)l[a]&&!1!==l[a]._visible&&u.push(l[a]);l=u}if(void 0==i||1==i){g=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,r,n);if(this.treeGrid&&(0==(p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0)||n>=p)&&g&&(void 0!=g[e.datafield].sum||void 0!=g[e.datafield].avg)){f=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,l,n);void 0!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),void 0!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg)}return g}var g=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,r,n);if(this.treeGrid&&g&&(void 0!=g[e.datafield].sum||void 0!=g[e.datafield].avg)){var p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0;if(0==p||n>=p){var f=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,l,n);void 0!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),void 0!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg)}}return g}}return null},getcolumnaggregateddata:function(e,t,i,r){var s=this.getColumn(e);if(!s)return"";var o=void 0!=i&&0!=i&&i;if(null==t)return"";var a=s.aggregates;s.aggregates=null;var l=this._calculateaggregate(s,t,o,r),n={};return l&&(n=l[e],s.aggregates=a),n},_updatecolumnaggregates:function(t,i,r){var s=this;if(i)if(r.children().remove(),r.html(""),t.aggregatesRenderer){if(i){a=t.aggregatesRenderer(i[t.datafield],t,r,this.getcolumnaggregateddata(t.datafield,t.aggregates),"aggregates");r.html(a)}}else e.each(i,function(){var t=this;for(o in t){var i=e('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),a=o;a=s._getaggregatename(a),i.html(a+":"+t[o]),s.rtl&&i.addClass(s.toThemeProperty("jqx-rtl")),r.append(i)}});else if(r.children().remove(),r.html(""),t.aggregatesRenderer){var o={};t.aggregates&&(o=this.getcolumnaggregateddata(t.datafield,t.aggregates));var a=t.aggregatesRenderer({},t,r,null);r.html(a)}},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return e}var t=e;for(var i in e){t=i;break}return t},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&"string"!=typeof t)for(var i in e){t=i;break}return t},_updatecolumnsaggregates:function(){var t=this.getRows();this.dataViewRecords&&(t=this.dataViewRecords);var i=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var r=0;r<i;r++){var s=e(this.aggregates[0].cells[r]),o=this.columns.records[r],a=this._calculateaggregate(o,null,!0,t);this._updatecolumnaggregates(o,a,s)}},_refreshcolumnsaggregates:function(){var t=this.columns.records.length;if(void 0!=this.aggregates[0].cells)for(var i=0,r=0;r<t;r++){var s=e(this.aggregates[0].cells[r]),o=this.columns.records[r];s&&(s.width(o.width),s[0].style.left=i+"px",o.hidden&&o.hideable?s.css("display","none"):i+=o.width)}},_updateaggregates:function(){var t=e('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),i=0,r=this.columns.records.length,s=this.toThemeProperty("jqx-grid-cell");this.rtl&&(s+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),i=0,t.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),s+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var o=r+10,a=new Array;this.aggregates[0].cells=a;for(var l=0;l<r;l++){var n=this.columns.records[l],d=this._calculateaggregate(n),h=n.width;h<n.minwidth&&(h=n.minwidth),h>n.maxwidth&&(h=n.maxwidth);var c=s;n.cellsalign&&(c+=" "+this.toThemeProperty("jqx-"+n.cellsalign+"-align"));var u=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+c+'"></div>');t.append(u),u.css("left",i),this.rtl?(u.css("z-index",o++),0==l&&u.css("border-left-width","0px")):u.css("z-index",o--),u.width(h),u[0].style.left=i+"px",n.hidden&&n.hideable?u.css("display","none"):i+=h,a[a.length]=u[0],this._updatecolumnaggregates(n,d,u)}e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",o--),t.width(parseInt(i)+2),t.height(this.aggregatesHeight),this.aggregates.children().remove(),this.aggregates.append(t),this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")),this.aggregates.addClass(s),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){var t=this;if(t.columns&&t.columns.records)for(o=0;o<t.columns.records.length;o++)t._removecolumnhandlers(t.columns.records[o]);t.removeHandler(e(document),"mouseup.pagerbuttonstop"),t.removeHandler(e(document),"mouseup.pagerbuttonsbottom"),t.removeHandler(t.content,"scroll"),t.removeHandler(t.content,"mousedown"),t.removeHandler(e(document),"mousedown.gridedit"+t.element.id);var i="mousemove.resize"+t.element.id,r="mousedown.resize"+t.element.id,s="mouseup.resize"+t.element.id;t.removeHandler(e(document),i),t.removeHandler(e(document),r),t.removeHandler(e(document),s);var i="mousemove.reorder"+t.element.id,r="mousedown.reorder"+t.element.id,s="mouseup.reorder"+t.element.id;if(t.removeHandler(e(document),i),t.removeHandler(e(document),r),t.removeHandler(e(document),s),t.filterable){if(t.filterrow)for(var o=0;o<t.filterrow[0].cells.length;o++){var a=t.filterrow[0].cells[o],l=e(a).find(".filterconditions");t.columns.records[o];l.length>0&&l.jqxDropDownList("destroy")}t.filtercolumnsList&&t.filtercolumnsList.jqxDropDownList("destroy")}if(t.pageable){t.pagershowrowscombotop&&t.pagershowrowscombotop.jqxDropDownList&&t.pagershowrowscombotop.jqxDropDownList("destroy"),t.pagershowrowscombobottom&&t.pagershowrowscombobottom.jqxDropDownList&&t.pagershowrowscombobottom.jqxDropDownList("destroy");n=t.pagerbuttonsbottom.find("a");t.removeHandler(n,"click"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave"),n.remove();var n=t.pagerbuttonstop.find("a");t.removeHandler(n,"click"),t.removeHandler(n,"mouseenter"),t.removeHandler(n,"mouseleave"),n.remove(),t.pagernexttop&&(t.pagernexttop.jqxButton("destroy"),t.pagerprevioustop.jqxButton("destroy"),t.pagernextbottom.jqxButton("destroy"),t.pagerpreviousbottom.jqxButton("destroy"),t.pagerfirsttop.jqxButton("destroy"),t.pagerfirstbottom.jqxButton("destroy"),t.pagerlasttop.jqxButton("destroy"),t.pagerlastbottom.jqxButton("destroy"))}t._removeHandlers(),t.vScrollBar.jqxScrollBar("destroy"),t.hScrollBar.jqxScrollBar("destroy"),delete t.vScrollBar,delete t.hScrollBar,delete t._mousewheelfunc,e.jqx.utilities.resize(t.host,null,!0),t.host.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(t,i,r,s){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&2==Object.keys(t.batchUpdate).length)&&s!==r)if("filterable"==i)t._render();else if("height"===i)t.host.height(t.height),t.host.width(t.width),t._updatesize(!1,!0);else if("width"===i)t.host.height(t.height),t.host.width(t.width),t._updatesize(!0,!1);else if("source"===i)t.updateBoundData();else if("columns"===i||"columnGroups"===i)t._columns=null,t._render();else if("rtl"===i)t.content.css("left",""),t.columns=t._columns,t.vScrollBar.jqxScrollBar({rtl:s}),t.hScrollBar.jqxScrollBar({rtl:s}),t._render();else if("pagerMode"===i)t.pagerMode=s,t._initpager();else if("pageSizeOptions"==i){t._initpager();for(var o=!1,a=0;a<s.length;a++)if(parseInt(s[a])==t.pageSize){o=!0;break}o||e.jqx.set(t,[{pageSize:s[0]}])}else if("pageSize"==i){var l=t.dataview.pagenum*t.dataview.pagesize;t.dataview.pagesize=t.pageSize;var n=Math.floor(l/t.dataview.pagesize);n===t.dataview.pagenum&&parseInt(s)===parseInt(r)||(t._raiseEvent("pageSizeChanged",{pagenum:s,oldpageSize:r,pageSize:t.dataview.pagesize}),t.goToPage(n)||(t.serverProcessing?t.updateBoundData("pager"):t.refresh()))}else if("pagerPosition"===i)t.refresh();else if("selectionMode"===i)t.selectionMode=s.toLowerCase();else if("touchmode"==i)t.touchDevice=null,t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:s}),t.hScrollBar.jqxScrollBar({touchMode:s}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._renderrows(),t._addHandlers();else{if("enableHover"==i)return;if("disabled"==i)s?t.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),t.pageable&&(t.pagernexttop&&(t.pagernexttop.jqxButton({disabled:s}),t.pagerprevioustop.jqxButton({disabled:s}),t.pagernextbottom.jqxButton({disabled:s}),t.pagerpreviousbottom.jqxButton({disabled:s}),t.pagerfirsttop.jqxButton({disabled:s}),t.pagerfirstbottom.jqxButton({disabled:s}),t.pagerlasttop.jqxButton({disabled:s}),t.pagerlastbottom.jqxButton({disabled:s}),t.pagershowrowscombotop.jqxDropDownList&&"advanced"==t.pagerMode&&(t.pagershowrowscombotop.jqxDropDownList({disabled:!1}),t.pagershowrowscombobottom.jqxDropDownList({disabled:!1}))),t.host.find(".jqx-grid-pager-number").css("cursor",s?"default":"pointer")),t.host.find(".jqx-grid-group-collapse").css("cursor",s?"default":"pointer"),t.host.find(".jqx-grid-group-expand").css("cursor",s?"default":"pointer");else if("columnsHeight"==i)t._render();else if("theme"==i){if(e.jqx.utilities.setTheme(r,s,t.host),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.hScrollBar.jqxScrollBar({theme:t.theme}),t.pageable&&t.pagernexttop&&(t.pagernexttop.jqxButton({theme:t.theme}),t.pagerprevioustop.jqxButton({theme:t.theme}),t.pagernextbottom.jqxButton({theme:t.theme}),t.pagerpreviousbottom.jqxButton({theme:t.theme}),t.pagerfirsttop.jqxButton({theme:t.theme}),t.pagerfirstbottom.jqxButton({theme:t.theme}),t.pagerlasttop.jqxButton({theme:t.theme}),t.pagerlastbottom.jqxButton({theme:t.theme}),t.pagershowrowscombotop.jqxDropDownList&&"advanced"==t.pagerMode&&(t.pagershowrowscombotop.jqxDropDownList({theme:t.theme}),t.pagershowrowscombobottom.jqxDropDownList({theme:t.theme}))),t.filterable){var d=e(".filterconditions");d.length>0&&d.jqxDropDownList({theme:t.theme}),t.filtercolumnsList&&t.filtercolumnsList.jqxDropDownList({theme:t.theme})}t.refresh()}else t.refresh()}},_rendercolumnheader:function(e,t,i,r){var s="4px";return r.columnGroups?((s=i/2-this._columnheight/2)<0&&(s=4),s+="px"):25!=this.columnsHeight&&((s=this.columnsHeight/2-this._columnheight/2)<0&&(s=4),s+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+s+"; margin-top: "+s+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>"}}),e.jqx.dataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return void 0==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&void 0!=e&&(null!=t&&(e>=0&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||void 0==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),!0)},this.removeAt=function(e){if(null==e||void 0==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},e.jqx.dataView=function(){return this.that=this,this.grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(t,i){var r=!!t._source,s=null;this._sortData=null,this._sortHierarchyData=null,r?(s=t,t=t._source):s=new e.jqx.dataAdapter(t,{autoBind:!1});var o=function(e){e.originaldata=s.originaldata,e.records=s.records,e.hierarchy=s.hierarchy,e.grid.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,s.hierarchy=new Array),s._source.totalrecords?e.totalrecords=s._source.totalrecords:s._source.totalRecords?e.totalrecords=s._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=s.cachedrecords};!function(e){s.recordids=[],s.records=new Array,s.cachedrecords=new Array,s.originaldata=new Array,s._options.totalrecords=e.totalrecords,s._options.originaldata=e.originaldata,s._options.recordids=e.recordids,s._options.cachedrecords=new Array,s._options.pagenum=e.pagenum,s._options.pageable=e.pageable,void 0!=t.type&&(s._options.type=t.type),void 0!=t.formatdata&&(s._options.formatData=t.formatdata),void 0!=t.contenttype&&(s._options.contentType=t.contenttype),void 0!=t.async&&(s._options.async=t.async),void 0!=t.updaterow&&(s._options.updaterow=t.updaterow),void 0!=t.addrow&&(s._options.addrow=t.addrow),void 0!=t.deleterow&&(s._options.deleterow=t.deleterow),0==e.pagesize&&(e.pagesize=10),s._options.pagesize=e.pagesize}(this),this.source=t,void 0!==i&&(uniqueId=i);var a=this;switch(t.datatype){case"local":case"array":default:null==t.localdata&&(t.localdata=[]),null!=t.localdata&&(s.unbindBindingUpdate(a.grid.element.id),(!a.grid.autoBind&&a.grid.isInitialized||a.grid.autoBind)&&s.dataBind(),(j=function(){o(a),a.update()})(),s.bindBindingUpdate(a.grid.element.id,j));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=t.localdata)return s.unbindBindingUpdate(a.grid.element.id),(!a.grid.autoBind&&a.grid.isInitialized||a.grid.autoBind)&&s.dataBind(),(j=function(e){o(a),a.update()})(),void s.bindBindingUpdate(a.grid.element.id,j);for(var l=[],n=0,d={},h=0;h<this.filters.length;h++){var c=this.filters[h].datafield,u=this.filters[h].filter;if(u.getfilters){var g=u.getfilters();d[c+"operator"]=u.operator;for(var p=0;p<g.length;p++){g[p].datafield=c;var f=g[p].value;if("datefilter"==g[p].type)if(g[p].value&&g[p].value.toLocaleString){var m=this.grid.getColumn(g[p].datafield);if(m&&m.cellsformat){var v=this.grid.source.formatDate(g[p].value,m.cellsformat,this.grid.gridlocalization);d["filtervalue"+n]=v||g[p].value.toLocaleString()}else d["filtervalue"+n]=f.toString()}else d["filtervalue"+n]=f.toString();else d["filtervalue"+n]=f.toString(),g[p].data&&(d["filterid"+n]=g[p].data.toString()),g[p].id&&(d["filterid"+n]=g[p].id.toString());d["filtercondition"+n]=g[p].condition,d["filteroperator"+n]=g[p].operator,d["filterdatafield"+n]=c;var w={label:f.toString()};g[p].data&&(w.value=g[p].data.toString()),g[p].id?w.value=g[p].id.toString():w.value=f.toString(),w.condition=g[p].condition,w.operator=0==g[p].operator?"and":"or",w.field=c,w.type=g[p].type;var y=!1;if(l.length>0)for(var x=0;x<l.length;x++){var b=l[x];if(b.field==c){b.filters.push(w),y=!0;break}}y||(l.push({field:c,filters:[]}),l[l.length-1].filters.push(w)),n++}}}d.filterGroups=l,d.filterslength=n,e.extend(d,{sortdatafield:a.sortfield,sortorder:a.sortfielddirection,pagenum:a.pagenum,pagesize:a.grid.pageSize});var _=s._options.data;s._options.data?e.extend(s._options.data,d):(t.data&&e.extend(d,t.data),s._options.data=d);var j=function(){var t=function(){o(a),a.update()};if(e.jqx.browser.msie&&e.jqx.browser.version<9)try{t()}catch(e){}else t()};s.unbindDownloadComplete(a.grid.element.id),s.bindDownloadComplete(a.grid.element.id,j),s._source.loaderror=function(e,t,i){j()},(!a.grid.autoBind&&a.grid.isInitialized||a.grid.autoBind)&&s.dataBind(),s._options.data=_}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.sortBy=function(e,t){if(null==t)return this.sortfield="",void(this.sortfielddirection="");void 0==t&&(t=!0),t="a"==t||"asc"==t||"ascending"==t||1==t,"constructor"==e&&(e=""),this.sortfield=e,this.sortfielddirection=t?"asc":"desc"},this._sort=function(t){if(!this.sortfield||!this.sortfielddirection)return t;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;var i=this,r=Object.prototype.toString;Object.prototype.toString="function"==typeof i.sortfield?i.sortfield:function(){return this[i.sortfield]};var s="";this.source.datafields&&e.each(this.source.datafields,function(){if(this.name==i.sortfield)return this.type&&(s=this.type),!1});for(var o=new Array,a=0;a<t.length;a++)o.push(e.extend({originalRecord:t[a]},t[a]));if(this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,"desc"===this.sortfielddirection)l=o.sort(function(e,t){return i._compare(e,t,s)}).reverse();else var l=o.sort(function(e,t){return i._compare(e,t,s)});return this._sortData=l,Object.prototype.toString=r,l},this._compare=function(t,i,r){var i=i;if(void 0===(t=t)&&(t=null),void 0===i&&(i=null),null===t&&null===i)return 0;if(null===t&&null!==i)return 1;if(null!==t&&null===i)return 1;if(t=t.toString(),i=i.toString(),e.jqx.dataFormat)if(r&&""!=r)switch(r){case"number":case"int":case"float":return t<i?-1:t>i?1:0;case"date":case"time":return t<i?-1:t>i?1:0;case"string":case"text":t=String(t).toLowerCase(),i=String(i).toLowerCase()}else{if(e.jqx.dataFormat.isNumber(t)&&e.jqx.dataFormat.isNumber(i))return t<i?-1:t>i?1:0;if(e.jqx.dataFormat.isDate(t)&&e.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;e.jqx.dataFormat.isNumber(t)||e.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase())}try{if(t<i)return-1;if(t>i)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(t){if(this.grid.serverProcessing){if(t&&(""==this.grid.source._source.id||null==this.grid.source._source.id)&&this.grid.pageable){var i=this.grid.pageSize*this.pagenum;this.grid.rowsByKey=new Array;c=this;e.each(t,function(e){this.uid=i,c.grid.rowsByKey[this.uid]=this,i++})}return t}var r=new Array;if(this.filters.length){var s=new Array,o=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];r._visible=!0;for(var o=void 0,a=0;a<this.filters.length;a++){var l=this.filters[a].filter,n=r[this.filters[a].datafield],d=l.evaluate(n);o=void 0==o?d:"or"==l.operator?o||d:o&&d}r._visible=!1,(o||r.aggregate)&&(r._visible=!0,t.push(r),s[r.uid]=r)}};if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var a=new Array,l=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];a.push(r),r.records&&r.records.length>0&&l(r,r.records)}};l(null,t),o.call(this,a,r);for(var n=0;n<r.length;n++)for(var d=r[n];d.parent;){var h=d.parent;s[h.uid]||(h._visible=!0,s[h.uid]=h),d=h}r=t}else o.call(this,t,r);this._filteredData=r,this.rows=r}}else this.rows=t;if(this.source.hierarchy||this.grid.source.hierarchy&&this.grid.source.hierarchy.length>0){var c=this,u=new Array;this._sortData=null;var g=function(t,i){c._sortData=null;var r=null;if(c.source.hierarchy.groupingDataFields)if(i&&i.length>0&&i[0].level<c.source.hierarchy.groupingDataFields.length){r=new Array;for(s=0;s<i.length;s++)r.push(e.extend({originalRecord:i[s]},i[s]))}else r=c._sort(i);else r=c._sort(i);t.records?t.records=r:t=t.concat(r);for(var s=0;s<r.length;s++)r[s].records&&r[s].records.length&&g(r[s],r[s].records);return t};(this.sortfield||this.sortfielddirection)&&(u=this._sortHierarchyData?this._sortHierarchyData:g(u,t),this.rows=u,this._sortHierarchyData=u)}else this.rows=this._sort(this.rows);return this.rows},this.getid=function(t,i,r){if(e(t,i).length>0)return e(t,i).text();if(this.rows&&""!=t&&void 0!=t&&this.rows.length>0){null==(o=this.rows[this.rows.length-1][t])&&(o=null);for(l=1;l<=100;l++)if(!(a=this.grid.rowsByKey[l+o])){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(a=this.grid.rowsByKey["jqx"+o+l])continue;return"jqx"+o+l}return o+l}}if(void 0!=t&&t.toString().length>0){var s=e(i).attr(t);if(null!=s&&s.toString().length>0)return this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords?"jqx"+s:s}if(this.rows&&this.rows.length>0&&(a=this.grid.rowsByKey[r])){var o=this.rows[this.rows.length-1][t];null==o&&(o="");for(l=1;l<=1e3;l++)if(!(a=this.grid.rowsByKey[l+o])){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(a=this.grid.rowsByKey["jqx"+o+l])continue;return"jqx"+o+l}return o+l}}if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){var a=this.grid.rowsByKey["jqx"+r];if(!a)return"jqx"+r;for(var l=r+1;l<=100;l++)if(!(a=this.grid.rowsByKey["jqx"+l])){if(a=this.grid.rowsByKey["jqx"+l])continue;return"jqx"+l}}return r},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);

