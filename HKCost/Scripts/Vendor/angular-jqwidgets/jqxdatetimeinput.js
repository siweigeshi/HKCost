/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(t){t.jqx.jqxWidget("jqxDateTimeInput","",{}),t.extend(t.jqx._jqxDateTimeInput.prototype,{defineInstance:function(){var e={value:t.jqx._jqxDateTimeInput.getDateTime(new Date),minDate:t.jqx._jqxDateTimeInput.getDateTime(new Date),maxDate:t.jqx._jqxDateTimeInput.getDateTime(new Date),min:new Date(1900,0,1),max:new Date(2100,0,1),rowHeaderWidth:25,enableViews:!0,views:["month","year","decade"],selectableDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],change:null,changing:null,template:"default",columnHeaderHeight:20,titleHeight:30,firstDayOfWeek:0,showWeekNumbers:!1,showTimeButton:!1,cookies:!1,cookieoptions:null,showFooter:!1,formatString:"dd/MM/yyyy",width:200,height:25,dayNameFormat:"firstTwoLetters",textAlign:"left",readonly:!1,culture:"default",activeEditor:null,showCalendarButton:!0,openDelay:250,closeDelay:300,closeCalendarAfterSelection:!0,isEditing:!1,enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",dropDownVerticalAlignment:"bottom",enableAbsoluteSelection:!1,disabled:!1,buttonSize:21,animationType:"slide",dropDownWidth:"200px",restrictedDates:new Array,dropDownHeight:"205px",dropDownContainer:"default",selectionMode:"default",renderMode:"full",rtl:!1,timeRange:null,_editor:!1,todayString:"Today",clearString:"Clear",popupZIndex:9999999999999,allowNullDate:!0,changeType:null,placeHolder:"",enableHover:!0,allowKeyboardDelete:!0,localization:{backString:"Back",forwardString:"Forward",todayString:"Today",clearString:"Clear",calendar:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss"}}},events:["valueChanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","open","close","change"],aria:{"aria-valuenow":{name:"getDate",type:"date"},"aria-valuetext":{name:"getText",type:"string"},"aria-valuemin":{name:"min",type:"date"},"aria-valuemax":{name:"max",type:"date"},"aria-disabled":{name:"disabled",type:"boolean"}}};return this===t.jqx._jqxDateTimeInput.prototype?e:(t.extend(!0,this,e),this.value._setHours(0),this.value._setMinutes(0),this.value._setSeconds(0),this.value._setMilliseconds(0),this.minDate._setYear(1900),this.minDate._setMonth(1),this.minDate._setDay(1),this.minDate._setHours(1),this.minDate._setMinutes(1),this.minDate._setSeconds(1),this.minDate._setMilliseconds(1),this.maxDate._setYear(2100),this.maxDate._setMonth(1),this.maxDate._setDay(1),this.maxDate._setHours(1),this.maxDate._setMinutes(1),this.maxDate._setSeconds(1),this.maxDate._setMilliseconds(1),this.defaultMinDate=this.minDate,this.defaultMaxDate=this.maxDate,e)},createInstance:function(e){var i="",a=this;if(!a.host.jqxCalendar)throw new Error("jqxDateTimeInput: Missing reference to jqxcalendar.js.");if("dd/MM/yyyy"!=a.formatString){var n=a.formatString.split(" ");if(n&&n.length>1){for(var s="",r=0;r<n.length;r++)"1"==n[r].length?s+=a._getFormatValue(n[r]):s+=n[r],r<n.length-1&&(s+=" ");a.formatString=s}}if("input"==a.element.nodeName.toLowerCase()){var o=a.element.getAttribute("type");if(o&&"dd/MM/yyyy"==a.formatString){if("date"==o&&(a.formatString="d"),"datetime"==o){var l=a._getFormatValue("d")+" "+a._getFormatValue("t");a.formatString=l,a.showTimeButton=!0}"time"==o&&(a.formatString="t",a.showTimeButton=!0,a.showCalendarButton=!1)}if(a.field=a.element,a.field.getAttribute("min")){var d=new Date(a.field.getAttribute("min"));"Invalid Date"!=d&&(a.min=d)}if(a.field.getAttribute("max")){var h=new Date(a.field.getAttribute("max"));"Invalid Date"!=h&&(a.max=h)}a.field.className&&(a._className=a.field.className);var u={title:a.field.title};a.field.value&&(u.value=a.field.value),a.field.id.length?u.id=a.field.id.replace(/[^\w]/g,"_")+"_jqxDateTimeInput":u.id=t.jqx.utilities.createId()+"_jqxDateTimeInput";var c=t("<div></div>",u);c[0].style.cssText=a.field.style.cssText,a.width||(a.width=t(a.field).width()),a.height||(a.height=t(a.field).outerHeight()),t(a.field).hide().after(c);var m=a.host.data();if(a.host=c,a.host.data(m),a.element=c[0],a.element.id=a.field.id,a.field.id=u.id,a._className&&(a.host.addClass(a._className),t(a.field).removeClass(a._className)),a.field.tabIndex){var p=a.field.tabIndex;a.field.tabIndex=-1,a.element.tabIndex=p}}if(a.host.attr("value")){i=!0;var f=a.host.attr("value");"range"!=a.selectionMode&&(void 0==(g=new Date(f))||isNaN(g)||(a.value=t.jqx._jqxDateTimeInput.getDateTime(g)))}if(null!=a.value&&a.value instanceof Date)a.value=t.jqx._jqxDateTimeInput.getDateTime(a.value);else if(null!=a.value&&"string"==typeof a.value){var g=new Date(a.value);void 0==g||isNaN(g)?a.value.indexOf(",")>=0&&(a.value=a.value.replace(/\,/g,"/"),void 0==(g=new Date(a.value))||isNaN(g)||(a.value=t.jqx._jqxDateTimeInput.getDateTime(g))):a.value=t.jqx._jqxDateTimeInput.getDateTime(g)}if(this._initTimeRange(),this._validateTimeRange(),a.host.attr("data-role","input"),a.render(),t.jqx.aria(this),null!=a.getDate()?t.jqx.aria(this,"aria-label","Current focused date is "+a.getDate().toLocaleString()):t.jqx.aria(this,"aria-label","Current focused date is Null"),a.minDate!==a.defaultMinDate&&(a.min=a.minDate),a.maxDate!==a.defaultMaxDate&&(a.max=a.maxDate),a.setMaxDate(a.max,!1),a.setMinDate(a.min,!1),"range"==a.selectionMode)if(i){var v=(f=a.host.attr("value")).substring(0,f.indexOf("-")),x=f.substring(f.indexOf("-")+1),y=new Date(v),T=new Date(x);void 0==y||isNaN(y)||void 0==T||isNaN(T)||a.setRange(y,T)}else null!=a.getDate()&&a.setRange(a.getDate(),a.getDate())},_validateTimeRange:function(){if(this.timeRange){var t=this.value.dateTime.getHours(),e=this.value.dateTime.getMinutes();t<=this.timeRange.minHour&&(this.value._setHours(this.timeRange.minHour),e<this.timeRange.minMinute?(this.value._setMinutes(this.timeRange.minMinute),this._updateEditorsValue()):this._updateEditorsValue()),t>=this.timeRange.maxHour&&(this.value._setHours(this.timeRange.maxHour),e>this.timeRange.maxMinute?(this.value._setMinutes(this.timeRange.maxMinute),this._updateEditorsValue()):this._updateEditorsValue())}},_initTimeRange:function(){if(this.timeRange){if(this.timeRange.min){a=null;(this.timeRange.min.indexOf("AM")>=0||this.timeRange.min.indexOf("PM")>=0)&&(a=this.timeRange.min.indexOf("AM")>=0?"AM":"PM");var t=this.timeRange.min.split(":"),e=parseInt(t[0]),i=parseInt(t[1]);a&&(this.timeRange.minDefaultHour=e,this.timeRange.minMeridian=a),a&&"PM"==a&&(e+=12),this.timeRange.minHour=e,this.timeRange.minMinute=i}if(this.timeRange.max){var a=null;(this.timeRange.max.indexOf("AM")>=0||this.timeRange.max.indexOf("PM")>=0)&&(a=this.timeRange.max.indexOf("AM")>=0?"AM":"PM");var n=this.timeRange.max.split(":"),e=parseInt(n[0]),i=parseInt(n[1]);a&&(this.timeRange.maxDefaultHour=e,this.timeRange.maxMeridian=a),a&&"PM"==a&&(e+=12),this.timeRange.maxHour=e,this.timeRange.maxMinute=i}}},_format:function(e,i,a){var n=!1;try{void 0!=Globalize&&(n=!0)}catch(t){}if(t.global)return t.global.format(e,i,this.culture);if(!n){if(t.jqx.dataFormat)return e instanceof Date?t.jqx.dataFormat.formatdate(e,i,this.localization.calendar):"number"==typeof e?t.jqx.dataFormat.formatnumber(e,i,this.localization.calendar):t.jqx.dataFormat.formatdate(e,i,this.localization.calendar);throw new Error("jqxDateTimeInput: Missing reference to globalize.js.")}try{return i=Globalize.format(e,i,this.culture)}catch(t){return Globalize.format(e,i)}},render:function(){var e=this;e._removeHandlers(),e.element.innerHTML="",e.host.attr({role:"textbox"}),e.id=t.jqx.utilities.createId();t.jqx.utilities.createId(),t.jqx.utilities.createId();e._setSize(),null==e.width&&(e.width=e.host.width(),e.host.width(e.width)),e.touch=t.jqx.mobile.isTouchDevice();var i=t("<div class='jqx-max-size jqx-position-relative'></div>").appendTo(e.host);e.dateTimeInput=t("<input style='border: none; padding-left: 3px; padding-right: 3px;' class='jqx-position-absolute' id='input"+e.element.id+"' autocomplete='off' type='textarea'/>").appendTo(i),e.dateTimeInput.addClass(e.toThemeProperty("jqx-reset")),e.dateTimeInput.addClass(e.toThemeProperty("jqx-clear")),e.dateTimeInput.addClass(e.toThemeProperty("jqx-input-content")),e.dateTimeInput.addClass(e.toThemeProperty("jqx-widget-content")),e.dateTimeInput.addClass(e.toThemeProperty("jqx-rc-all")),e.dateTimeInput.attr("placeHolder",e.placeHolder),"full"!=e.renderMode&&e.dateTimeInput.remove();var a=e.host.attr("name");a&&e.dateTimeInput.attr("name",a),e.host.attr("tabindex")&&(e.dateTimeInput.attr("tabindex",e.host.attr("tabindex")),e.host.removeAttr("tabindex")),e.rtl&&(e.dateTimeInput.css("direction","rtl"),e.dateTimeInput.addClass("jqx-rtl")),e.calendarButton=t("<div style='height: 100%;' class='jqx-position-absolute'><div></div></div>").appendTo(i),e.rtl?e.calendarButton.addClass(e.toThemeProperty("jqx-action-button-rtl")):e.calendarButton.addClass(e.toThemeProperty("jqx-action-button")),e.calendarButtonIcon=t(e.calendarButton.children()[0]),e.calendarButtonIcon.addClass(e.toThemeProperty("jqx-icon")),e.calendarButtonIcon.addClass(e.toThemeProperty("jqx-icon-calendar")),e.calendarButton.addClass(e.toThemeProperty("jqx-fill-state-normal")),e.rtl?e.calendarButton.addClass(e.toThemeProperty("jqx-rc-l")):e.showTimeButton||e.calendarButton.addClass(e.toThemeProperty("jqx-rc-r")),e.timeButton=t("<div style='height: 100%;' class='jqx-position-absolute'><div></div></div>").appendTo(i),e.rtl?e.timeButton.addClass(e.toThemeProperty("jqx-action-button-rtl")):e.timeButton.addClass(e.toThemeProperty("jqx-action-button")),e.template&&(e.timeButton.addClass(e.toThemeProperty("jqx-"+e.template)),e.calendarButton.addClass(e.toThemeProperty("jqx-"+e.template))),e.timeButtonIcon=t(e.timeButton.children()[0]),e.timeButtonIcon.addClass(e.toThemeProperty("jqx-icon")),e.timeButtonIcon.addClass(e.toThemeProperty("jqx-icon-time")),e.timeButton.addClass(e.toThemeProperty("jqx-fill-state-normal")),e.rtl?e.timeButton.addClass(e.toThemeProperty("jqx-rc-l")):e.timeButton.addClass(e.toThemeProperty("jqx-rc-r"));o=this;if(e._arrange(),null!=t.jqx._jqxCalendar&&void 0!=t.jqx._jqxCalendar)try{var n="calendar"+e.id,s=t(t.find("#"+n));s.length>0&&s.remove(),t.jqx.aria(this,"aria-owns",n),t.jqx.aria(this,"aria-haspopup",!0),t.jqx.aria(this,"aria-readonly","range"==e.selectionMode);var r=t("<div style='overflow: hidden; background: transparent; position: absolute;' id='calendar"+e.id+"'><div id='innerCalendar"+e.id+"'></div><div id='innerTime"+e.id+"'></div></div>");"opera"==t.jqx.utilities.getBrowser().browser&&r.hide(),"element"==e.dropDownContainer?r.appendTo(e.host):r.appendTo(document.body),e.container=r,e.calendarContainer=t(t.find("#innerCalendar"+e.id)).jqxCalendar({restrictedDates:this.restrictedDates,changing:e.changing,change:e.change,enableViews:e.enableViews,selectableDays:e.selectableDays,views:e.views,rowHeaderWidth:e.rowHeaderWidth,titleHeight:e.titleHeight,columnHeaderHeight:e.columnHeaderHeight,_checkForHiddenParent:!1,enableAutoNavigation:!1,canRender:!1,localization:e.localization,todayString:e.todayString,clearString:e.clearString,dayNameFormat:e.dayNameFormat,rtl:e.rtl,culture:e.culture,showFooter:e.showFooter,selectionMode:e.selectionMode,firstDayOfWeek:e.firstDayOfWeek,showWeekNumbers:e.showWeekNumbers,width:e.dropDownWidth,height:e.dropDownHeight,theme:e.theme}),"element"==e.dropDownContainer?e.calendarContainer.css({position:"absolute",top:0,left:0}):e.calendarContainer.css({position:"absolute",zIndex:e.popupZIndex,top:0,left:0}),e.calendarContainer.addClass(e.toThemeProperty("jqx-popup")),t.jqx.browser.msie&&e.calendarContainer.addClass(e.toThemeProperty("jqx-noshadow")),e.timeContainer=t(t.find("#innerTime"+e.id)),e.timeContainer.css({position:"absolute",zIndex:e.popupZIndex,top:0,left:0}),e.timeContainer.addClass(e.toThemeProperty("jqx-popup")),t.jqx.browser.msie&&e.timeContainer.addClass(e.toThemeProperty("jqx-noshadow")),e._calendar=t.data(e.calendarContainer[0],"jqxCalendar").instance;var o=this;e._calendar.today=function(){o.today()},e._calendar.clear=function(){o.clear()},"opera"==t.jqx.utilities.getBrowser().browser&&r.show(),r.height(parseInt(e.calendarContainer.height())+25),r.width(parseInt(e.calendarContainer.width())+25),"range"==e.selectionMode&&(e.readonly=!0),"none"==e.animationType?e.container.css("display","none"):e.container.hide()}catch(t){}if(t.global&&t.global.preferCulture(e.culture),e.selectedText="",e._addHandlers(),e.self=this,e.oldValue=e.getDate(),e.items=new Array,e.editors=new Array,e._loadItems(),e.editorText="",1==e.readonly&&e.dateTimeInput.css("readonly",e.readonly),e.dateTimeInput.css("text-align",e.textAlign),e.host.addClass(e.toThemeProperty("jqx-widget")),e.host.addClass(e.toThemeProperty("jqx-datetimeinput")),e.host.addClass(e.toThemeProperty("jqx-input")),e.host.addClass(e.toThemeProperty("jqx-overflow-hidden")),e.host.addClass(e.toThemeProperty("jqx-rc-all")),e.host.addClass(e.toThemeProperty("jqx-reset")),e.host.addClass(e.toThemeProperty("jqx-clear")),e.host.addClass(e.toThemeProperty("jqx-widget-content")),e.propertyChangeMap.disabled=function(e,i,a,n){n?(e.host.addClass(o.toThemeProperty("jqx-input-disabled")),e.host.addClass(o.toThemeProperty("jqx-fill-state-disabled"))):(e.host.removeClass(o.toThemeProperty("jqx-fill-state-disabled")),e.host.removeClass(o.toThemeProperty("jqx-input-disabled"))),t.jqx.aria(this,"aria-disabled",n)},e.disabled&&(e.host.addClass(e.toThemeProperty("jqx-input-disabled")),e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")),e.dateTimeInput.attr("disabled",!0)),e.host.parents("form").length>0&&e.addHandler(e.host.parents("form"),"reset",function(){setTimeout(function(){o.setDate(new Date)},10)}),e.cookies){var l=t.jqx.cookie.cookie("jqxDateTimeInput"+e.element.id);null!=l&&e.setDate(new Date(l))}if(t.jqx.browser.msie&&t.jqx.browser.version<8&&e.host.parents(".jqx-window").length>0){var d=e.host.parents(".jqx-window").css("z-index");e.container.css("z-index",d+10),e.calendarContainer.css("z-index",d+10)}"default"!=e.culture&&e._applyCulture(),e.value&&(e.calendarContainer.jqxCalendar("_isDisabled",e.value.dateTime)?e.dateTimeInput.addClass(e.toThemeProperty("jqx-input-invalid")):e.dateTimeInput.removeClass(e.toThemeProperty("jqx-input-invalid")))},val:function(t){var e=this;if(0!=arguments.length){if(null==t&&e.setDate(null),"range"==e.selectionMode)return e.setRange(arguments[0],arguments[1]),e.getText();if(t instanceof Date&&e.setDate(t),"string"==typeof t){if("date"==t)return e.getDate();e.setDate(t)}e._calendar.getDate()!=e.getDate()&&e._calendar.setDate(e.getDate())}return e.getText()},_setSize:function(){null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=parseInt(this.width)+"px":void 0==this.width||isNaN(this.width)||(this.element.style.width=parseInt(this.width)+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=parseInt(this.height)+"px":void 0==this.height||isNaN(this.height)||(this.element.style.height=parseInt(this.height)+"px");var e=!1;null!=this.width&&-1!=this.width.toString().indexOf("%")&&(e=!0,this.host.width(this.width)),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(e=!0,this.host.height(this.height));var i=this,a=function(){i.calendarContainer&&i._arrange()};if(e&&this.calendarContainer){this._arrange();var n=this.host.width();"auto"!=this.dropDownWidth&&(n=this.dropDownWidth),this.calendarContainer.jqxCalendar({width:n}),this.container.width(parseInt(n)+25)}t.jqx.utilities.resize(this.host,function(){a()})},_arrange:function(){null==this.height&&(this.height=27,this.host.height(27));var e=parseInt(this.host.width()),i=parseInt(this.host.height()),a=this.buttonSize,n=2;this.showCalendarButton||this.showTimeButton||(a=0,buttonHeight=0,this.calendarButton.hide(),n=0),this.showCalendarButton?this.calendarButton.show():this.calendarButton.hide(),this.showTimeButton?this.timeButton.show():this.timeButton.hide();s=e-a-1*n;if(this.showTimeButton&&this.showCalendarButton)s=e-2*a-1*n;else if(this.showTimeButton||this.showCalendarButton)var s=e-a-1*n;s>0&&(this.dateTimeInput[0].style.width=s+"px"),this.rtl&&(this.dateTimeInput[0].style.width=-1+s+"px"),this.dateTimeInput[0].style.left="0px",this.dateTimeInput[0].style.top="0px",this.calendarButton[0].style.width=a+1+"px",this.calendarButton[0].style.left=1+s+"px",this.timeButton[0].style.width=a+1+"px",this.showCalendarButton?this.timeButton[0].style.left=1+this.calendarButton.width()+s+"px":this.timeButton[0].style.left=1+s+"px","full"!=this.renderMode&&(this.calendarButton[0].style.width="100%",this.calendarButton[0].style.left="0px",this.calendarButton.css("border","none"),this.timeButton[0].style.width="100%",this.timeButton[0].style.left="0px",this.timeButton.css("border","none"));var r=this.dateTimeInput.height();if(0==r&&"full"!=this.renderMode?(r=parseInt(this.dateTimeInput.css("font-size"))+3,this.calendarButton.addClass(this.toThemeProperty("jqx-rc-all")),this.timeButton.addClass(this.toThemeProperty("jqx-rc-all"))):r=17,-1==this.dateTimeInput[0].className.indexOf("jqx-rc-all")&&this.dateTimeInput.addClass(this.toThemeProperty("jqx-rc-all")),(l=parseInt(i)/2-parseInt(r)/2)>0){var o=this.dateTimeInput.css("font-size");""==o&&(o=13);var l=i-2-parseInt(o)-2;isNaN(l)&&(l=0),l<0&&(l=0);var d=l/2;t.jqx.browser.msie&&t.jqx.browser.version<8&&(d=l/4),this.dateTimeInput[0].style.paddingTop=Math.round(d)+"px",this.dateTimeInput[0].style.paddingBottom=Math.round(d)+"px"}this.rtl&&(this.calendarButton[0].style.width=a+"px",this.timeButton[0].style.width=a+"px",this.calendarButton.css("left","0px"),this.showCalendarButton?this.timeButton.css("left",a+"px"):this.timeButton.css("left","0px"),this.dateTimeInput.css("left",this.calendarButton.width()),this.showTimeButton&&this.showCalendarButton&&this.dateTimeInput.css("left",this.timeButton.width()+this.calendarButton.width()),t.jqx.browser.msie&&t.jqx.browser.version<=8&&(this.dateTimeInput.css("left",1+this.calendarButton.width()),this.showTimeButton&&this.showCalendarButton&&this.dateTimeInput.css("left",1+this.timeButton.width()+this.calendarButton.width())))},_removeHandlers:function(){this.removeHandler(t(document),"mousedown."+this.id),this.dateTimeInput&&(this.removeHandler(this.dateTimeInput,"keydown."+this.id),this.removeHandler(this.dateTimeInput,"blur"),this.removeHandler(this.dateTimeInput,"focus"),this.removeHandler(this.host,"focus"),this.removeHandler(this.dateTimeInput,"mousedown"),this.removeHandler(this.dateTimeInput,"mouseup"),this.removeHandler(this.dateTimeInput,"keydown"),this.removeHandler(this.dateTimeInput,"keyup"),this.removeHandler(this.dateTimeInput,"keypress")),null!=this.calendarButton&&this.removeHandler(this.calendarButton,"mousedown"),null!=this.timeButton&&this.removeHandler(this.timeButton,"mousedown"),null!=this.calendarContainer&&(this.removeHandler(this.calendarContainer,"cellSelected"),this.removeHandler(this.calendarContainer,"cellMouseDown")),this.removeHandler(t(window),"resize."+this.id)},isOpened:function(){var e=this,i=t.data(document.body,"openedJQXCalendar"+this.id);return null!=i&&i==e.calendarContainer},wheel:function(t,e){if(e.isEditing){e.changeType="mouse";var i=0;if(t||(t=window.event),t.originalEvent&&t.originalEvent.wheelDelta&&(t.wheelDelta=t.originalEvent.wheelDelta),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i){var a=e._handleDelta(i);return!a&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1,a)}t.preventDefault&&t.preventDefault(),t.returnValue=!1}},_handleDelta:function(t){return t<0?this.spinDown():this.spinUp(),!1},focus:function(){try{var t=this;t._firstFocusDate=t.getDate(),this._setSelectionStart(0),this._selectGroup(-1),this.dateTimeInput.focus(),setTimeout(function(){t._setSelectionStart(0),t._selectGroup(-1),t.dateTimeInput.focus()},25)}catch(t){}},_addHandlers:function(){this.element.id,this.element;var e=this;this.host.parents()&&this.addHandler(this.host.parents(),"scroll.datetimeinput"+this.element.id,function(t){e.isOpened()&&e.close()}),this.addHandler(this.host,"mouseenter",function(){!e.disabled&&e.enableHover&&(hovered=!0,e.calendarButtonIcon.addClass(e.toThemeProperty("jqx-icon-calendar-hover")),e.calendarButton.addClass(e.toThemeProperty("jqx-fill-state-hover")),e.showTimeButton&&(e.timeButtonIcon.addClass(e.toThemeProperty("jqx-icon-time-hover")),e.timeButton.addClass(e.toThemeProperty("jqx-fill-state-hover"))))}),this.addHandler(this.host,"mouseleave",function(){!e.disabled&&e.enableHover&&(e.calendarButtonIcon.removeClass(e.toThemeProperty("jqx-icon-calendar-hover")),e.calendarButton.removeClass(e.toThemeProperty("jqx-fill-state-hover")),e.showTimeButton&&(e.timeButtonIcon.removeClass(e.toThemeProperty("jqx-icon-time-hover")),e.timeButton.removeClass(e.toThemeProperty("jqx-fill-state-hover"))))}),this.addHandler(this.host,"mousewheel",function(t){e.wheel(t,e)}),this.addHandler(t(document),"mousedown."+this.id,this._closeOpenedCalendar,{me:this}),t.jqx.mobile.isTouchDevice()&&this.addHandler(t(document),t.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,this._closeOpenedCalendar,{me:this}),this.addHandler(this.dateTimeInput,"keydown."+this.id,function(i){var a=t.data(document.body,"openedJQXCalendar"+e.id);if(null!=a&&a==e.calendarContainer)return e.handleCalendarKey(i,e)}),null!=this.calendarContainer&&(this.addHandler(this.calendarContainer,"keydown",function(t){if(13==t.keyCode)return!(e.isOpened()&&!e._calendar._viewAnimating&&"month"==e._calendar.view)||(e.hideCalendar("selected","keyboard"),e.dateTimeInput.focus(),!1);if(9==t.keyCode){if(e.isOpened())return e.hideCalendar("selected","keyboard"),!0}else if(27==t.keyCode)return!e.isOpened()||(e.hideCalendar(null,"keyboard"),e.dateTimeInput.focus(),!1);if(e.timePopup=!1,84==t.keyCode&&(e.timePopup=!0),115==t.keyCode){if(e.isOpened())return e.hideCalendar("keyboard","keyboard"),e.dateTimeInput.focus(),!1;if(!e.isOpened())return e.showCalendar("keyboard","keyboard"),e.dateTimeInput.focus(),!1}if(t.altKey)if(38==t.keyCode){if(e.isOpened())return e.hideCalendar("keyboard","keyboard"),e.dateTimeInput.focus(),!1}else if(40==t.keyCode&&!e.isOpened())return e.showCalendar("keyboard","keyboard"),e.dateTimeInput.focus(),!1}),this.addHandler(this.calendarContainer,"cellSelected",function(i){if(e.closeCalendarAfterSelection){t.data(document.body,"openedJQXCalendarValue");"mouse"==i.args.selectionType&&("range"!=e.selectionMode?e.hideCalendar("selected","mouse"):0==e._calendar._clicks&&e.hideCalendar("selected","mouse"))}}),this.addHandler(this.calendarContainer,"cellMouseDown",function(i){e.closeCalendarAfterSelection&&e._calendar.value&&t.data(document.body,"openedJQXCalendarValue",new t.jqx._jqxDateTimeInput.getDateTime(e._calendar.value.dateTime))})),this.addHandler(this.dateTimeInput,"blur",function(t){if(null!=e.value){e.isEditing=!1;e.value.dateTime.getDay(),e._oldDT;e._validateValue(!0),t.stopPropagation&&t.stopPropagation(),e._updateText(),e._raiseEvent(9,t)}e.isOpened()||e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this.host,"focus",function(t){e.focus()}),this.addHandler(this.dateTimeInput,"focus",function(t){if(e._firstFocusDate=e.getDate(),null!=e.value?("range"!=e.selectionMode?e._oldDT=new Date(e.value.dateTime):e._oldDT=e.getRange(),setTimeout(function(){var t=e._selection();e.isEditing=!0,e._validateValue(),e._updateText(),e._setSelectionStart(0),e._selectGroup(-1,t),e.host.addClass(e.toThemeProperty("jqx-fill-state-focus"))})):(e._setSelectionStart(0),e._selectGroup(-1),e.host.addClass(e.toThemeProperty("jqx-fill-state-focus"))),t.stopPropagation&&t.stopPropagation(),t.preventDefault)return t.preventDefault(),!1});var i="mousedown";this.touch&&(i=t.jqx.mobile.getTouchEventName("touchstart")),this.addHandler(this.calendarButton,i,function(t){var i="block"==e.container.css("display");if(e.timePopup=!1,e.calendarPopup=!0,!e.disabled&&!e.isanimating){if(i)return e.hideCalendar(),!1;e.showCalendar("mouse"),t.preventDefault()}}),this.addHandler(this.timeButton,i,function(t){var i="block"==e.container.css("display");if(e.timePopup=!0,e.calendarPopup=!1,!e.disabled&&!e.isanimating){if(i)return e.hideCalendar("mouse","mouse"),!1;e.showCalendar("mouse"),t.preventDefault()}}),this.addHandler(this.dateTimeInput,"mousedown",function(t){return e._raiseEvent(2,t)}),this.addHandler(this.dateTimeInput,"mouseup",function(t){return e._raiseEvent(3,t)}),this.addHandler(this.dateTimeInput,"keydown",function(t){return e._raiseEvent(4,t)}),this.addHandler(this.dateTimeInput,"keyup",function(t){return e._raiseEvent(5,t)}),this.addHandler(this.dateTimeInput,"keypress",function(t){return e._raiseEvent(6,t)})},createID:function(){var t=Math.random()+"";return t=t.replace(".",""),t="99"+t,"dateTimeInput"+(t/=1)},setMaxDate:function(e,i){null!=e&&(null!=e&&"string"==typeof e&&"Invalid Date"==(e=new Date(e))||(this.maxDate=t.jqx._jqxDateTimeInput.getDateTime(e),null!=this._calendar&&this._calendar.setMaxDate(e),0!=i&&(null!=this.getDate()&&this.getDate()>e&&this.setDate(e),t.jqx.aria(this,"aria-valuemax",e),this._refreshValue(),this._updateText())))},getMaxDate:function(){return null!=this.maxDate&&void 0!=this.maxDate?this.maxDate.dateTime:null},setMinDate:function(e,i){null!=e&&(null!=e&&"string"==typeof e&&"Invalid Date"==(e=new Date(e))||(this.minDate=t.jqx._jqxDateTimeInput.getDateTime(e),null!=this._calendar&&this._calendar.setMinDate(e),0!=i&&(null!=this.getDate()&&this.getDate()<e&&this.setDate(e),t.jqx.aria(this,"aria-valuemin",e),this._refreshValue(),this._updateText())))},getMinDate:function(){return null!=this.minDate&&void 0!=this.minDate?this.minDate.dateTime:null},_applyCulture:function(){var e=!1;try{void 0!=Globalize&&(e=!0)}catch(t){}try{if(t.global)t.global.preferCulture(this.culture),this.localization.calendar=t.global.culture.calendar;else if(e){var i=Globalize.culture(this.culture);this.localization.calendar=i.calendar}this._loadItems(),null!=this._calendar&&(this._calendar.culture=this.culture,this._calendar.localization=this.localization,this._calendar.render())}catch(t){}},propertyMap:function(t){return"value"==t?"range"!=this.selectionMode?this.getDate():this.getRange():null},propertiesChangedHandler:function(t,e,i){i&&i.width&&i.height&&2==Object.keys(i).length&&(t.refresh(),t.close())},propertyChangedHandler:function(e,i,a,n){if(void 0!=e.isInitialized&&0!=e.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length)){if("template"==i&&(e.timeButton.removeClass(e.toThemeProperty("jqx-"+a)),e.calendarButton.removeClass(e.toThemeProperty("jqx-"+a)),e.timeButton.addClass(e.toThemeProperty("jqx-"+e.template)),e.calendarButton.addClass(e.toThemeProperty("jqx-"+e.template))),"restrictedDates"==i&&e.calendarContainer.css({restrictedDates:n}),"popupZIndex"==i&&e.calendarContainer.css({zIndex:n}),"showCalendarButton"==i&&e._arrange(),"showTimeButton"==i&&(e._arrange(),e.timePopupElement&&(e.timePopupElement.remove(),e.timePopupElement=null)),"selectionMode"==i&&(e._calendar.selectionMode=n,e.refreshValue()),"min"==i&&("string"==typeof n?e.setMinDate(new Date(n)):e.setMinDate(n)),"max"==i&&("string"==typeof n?e.setMaxDate(new Date(n)):e.setMaxDate(n)),"value"==i)if(null!=n&&n instanceof Date){if(isNaN(n.getFullYear())||isNaN(n.getMonth())||isNaN(n.getDate()))return void(this.value=a);n=t.jqx._jqxDateTimeInput.getDateTime(n)}else if(null!=n&&"string"==typeof n){var s=new Date(n);void 0==s||isNaN(s)||(this.value=t.jqx._jqxDateTimeInput.getDateTime(s))}if("views"==i&&e.calendarContainer.jqxCalendar({views:n}),"enableViews"==i&&e.calendarContainer.jqxCalendar({enableViews:n}),"selectableDays"==i&&e.calendarContainer.jqxCalendar({selectableDays:n}),"showFooter"==i&&e.calendarContainer.jqxCalendar({showFooter:n}),"rtl"==i&&(e.calendarContainer.jqxCalendar({rtl:n}),n?(e.dateTimeInput.css("direction","rtl"),e.dateTimeInput.addClass("jqx-rtl")):(e.dateTimeInput.css("direction","ltr"),e.dateTimeInput.removeClass("jqx-rtl"))),"todayString"!=i&&"clearString"!=i||e.calendarContainer.jqxCalendar({clearString:e.clearString,todayString:e.todayString}),"dayNameFormat"==i&&e.calendarContainer.jqxCalendar({dayNameFormat:n}),"firstDayOfWeek"==i&&e.calendarContainer.jqxCalendar({firstDayOfWeek:n}),"showWeekNumbers"==i&&e.calendarContainer.jqxCalendar({showWeekNumbers:n}),"culture"==i||"localization"==i?e._applyCulture():"formatString"==i&&(e.items=new Array,e._loadItems()),"theme"==i&&(t.jqx.utilities.setTheme(a,n,e.host),e.calendarContainer.jqxCalendar({theme:n})),"width"==i||"height"==i)return e.close(),void e.refresh();e._setOption(i,n,a),"dropDownWidth"!=i&&"dropDownHeight"!=i||(e.calendarContainer.jqxCalendar({width:e.dropDownWidth,height:e.dropDownHeight}),e._calendar.render(),e.container.height(e.calendarContainer.height()),e.container.width(e.calendarContainer.width()))}},clear:function(){this.allowNullDate?("range"!=this.selectionMode?this.setDate(null):(this._calendar._clicks=1,this.setRange(null,null)),this._calendar._clicks=0):"range"!=this.selectionMode?this.setDate(me.getMinDate()):(this._calendar._clicks=1,this.setRange(me.getMinDate(),me.getMinDate()),this._calendar._clicks=0),this.hideCalendar()},today:function(){var t=new Date;if(t.setHours(0,0,0,0),"range"!=this.selectionMode)this.setDate(t);else{this._calendar._clicks=0;var e=new Date;e.setHours(23,59,59,0),this.setRange(t,e),this._calendar._clicks=0}this.hideCalendar()},setDate:function(e){var i=this.getDate();if(null!=e&&"string"==typeof e){var a=e;if(e.toString().indexOf(",")>=0&&(e=e.replace(/\,/g,"/"),"Invalid Date"==(e=new Date(e))&&(e=a)),e.toString().indexOf("-")>=0&&(e=e.replace(/\-/g,"/"),"Invalid Date"==(e=new Date(e))&&(e=a)),""!=e){var n=e;if("Invalid Date"==(e=void 0!=Globalize?Globalize.parseDate(n,this.formatString,this.culture):t.jqx.dataFormat?t.jqx.dataFormat.parsedate(n,this.formatString,this.localization.calendar):new Date(e)))return;null===e&&null!==n&&"Invalid Date"!=n&&(e=n)}}if(null!=e&&"null"!=e&&"undefined"!=e||this.allowNullDate||(e=this.min),"Invalid Date"==e&&(e=null),null!=e&&"null"!=e&&"undefined"!=e&&""!==e){if(!(e<this.getMinDate()||e>this.getMaxDate()))return null==this.value&&(this.value=new t.jqx._jqxDateTimeInput.getDateTime(new Date),this.value._setHours(0),this.value._setMinutes(0),this.value._setSeconds(0),this.value._setMilliseconds(0)),e.getFullYear&&(this.value._setYear(e.getFullYear()),this.value._setDay(1),this.value._setMonth(e.getMonth()+1),this.value._setHours(e.getHours()),this.value._setMinutes(e.getMinutes()),this.value._setSeconds(e.getSeconds()),this.value._setMilliseconds(e.getMilliseconds()),this.value._setDay(e.getDate())),this._validateTimeRange(),this._refreshValue(),this.cookies&&null!=this.value&&t.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions),0!=this.getDate()-i?(this._raiseEvent("0",e,i),this._raiseEvent("9",e,i),!0):void 0}else null!=this.value&&(this.value=null,this._calendar.setDate(null),this._refreshValue(),this.cookies&&null!=this.value&&t.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions),this._setSelectionStart(0),this._selectGroup(-1),this._raiseEvent("0",e,i),this._raiseEvent("9",e,i))},getDate:function(){return void 0==this.value?null:new Date(this.value.dateTime)},getText:function(){return this.dateTimeInput.val()},setRange:function(e,i){if("Invalid Date"==e&&(e=null),"Invalid Date"==i&&(i=null),!(null!=e&&"string"==typeof e&&"Invalid Date"==(e=new Date(e))||null!=i&&"string"==typeof i&&"Invalid Date"==(i=new Date(i))||e&&isNaN(e)&&"NaN"==e.toString()&&"string"!=typeof e||i&&isNaN(i)&&"NaN"==i.toString()&&"string"!=typeof i)){this._calendar.setRange(e,i),i&&e&&i.valueOf()!=e.valueOf()?this._range={from:e,to:i}:this._range=this._calendar.getRange();var a=e;null!=a&&a.getFullYear&&(null==this.value&&(this.value=new t.jqx._jqxDateTimeInput.getDateTime(new Date),this.value._setHours(0),this.value._setMinutes(0),this.value._setSeconds(0),this.value._setMilliseconds(0)),this.value._setYear(a.getFullYear()),this.value._setMonth(a.getMonth()+1),this.value._setHours(a.getHours()),this.value._setMinutes(a.getMinutes()),this.value._setSeconds(a.getSeconds()),this.value._setMilliseconds(a.getMilliseconds()),this.value._setDay(a.getDate())),this._refreshValue(),this.value?this._raiseEvent("0",this.value.dateTime):this._raiseEvent("0",null)}},getRange:function(){var t=this._calendar.getRange();if(this._range){var e=this._range.from,i=this._range.to;i&&e&&i.valueOf()!=e.valueOf()&&(t.from&&t.from.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t.to&&t.to.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()))}return t},_validateValue:function(t){for(var e=0;e<this.items.length;e++){var i=this.editors[e].value;switch(this.items[e].type){case"FORMAT_AMPM":i<0?i=0:i>1&&(i=1);break;case"Character":break;case"Day":i<1?i=1:i>31&&(i=31);break;case"FORMAT_hh":i<1?i=1:i>12&&(i=12);break;case"FORMAT_HH":i<0?i=0:i>23&&(i=23);break;case"Millisecond":i<0?i=0:i>999&&(i=999);break;case"Minute":i<0?i=0:i>59&&(i=59);break;case"Month":i<1?i=1:i>12&&(i=12);break;case"ReadOnly":break;case"Second":i<0?i=0:i>59&&(i=59);break;case"Year":i<this.minDate.year?i=this.minDate.year:i>this.maxDate.year&&(i=this.maxDate.year)}this.editors[e].value!=i&&(this.editors[e].value=i,!0)}this.updateValue(t),null!=this.value&&!0===t&&(this.value.dateTime>this.maxDate.dateTime?(this._internalSetValue(this.maxDate),this._updateEditorsValue()):this.value.dateTime<this.minDate.dateTime&&(this._internalSetValue(this.minDate),this._updateEditorsValue()),this._updateText())},spinUp:function(){if(null!=this.value){if(null!=this.activeEditor){var t=this.editors.indexOf(this.activeEditor);if(-1==t)return;"Day"==this.items[t].type&&null!=this.value&&(this.activeEditor.maxValue=this.value._daysInMonth(this.value.year,this.value.month));var e=this.activeEditor.positions;this.activeEditor.increaseValue(this.enableAbsoluteSelection),this.activeEditor.positions=e}this.isEditing&&(this.isEditing=!1),this.updateValue(),this.isEditing=!0,this._updateText();var i=this.editors.indexOf(this.activeEditor);i>=0&&this._selectGroup(i)}},spinDown:function(){if(null!=this.value){if(null!=this.activeEditor){var t=this.editors.indexOf(this.activeEditor);if(-1==t)return;"Day"==this.items[t].type&&null!=this.value&&(this.activeEditor.maxValue=this.value._daysInMonth(this.value.year,this.value.month));var e=this.activeEditor.positions;this.activeEditor.decreaseValue(this.enableAbsoluteSelection),this.activeEditor.positions=e}this.isEditing&&(this.isEditing=!1),this.updateValue(),this.isEditing=!0,this._updateText();var i=this.editors.indexOf(this.activeEditor);i>=0&&this._selectGroup(i)}},_passKeyToCalendar:function(t){if(13==t.keyCode||9==t.keyCode)return this.hideCalendar("selected","keyboard"),!0;if(27==t.keyCode){this.calendarContainer;var e=this._calendar,i=this.closeCalendarAfterSelection;this.closeCalendarAfterSelection=!1,e.setDate(this.value.dateTime),this.closeCalendarAfterSelection=i,this.hideCalendar()}i=this.closeCalendarAfterSelection;this.closeCalendarAfterSelection=!1;var a=this._calendar._handleKey(t);return this.closeCalendarAfterSelection=i,a},handleCalendarKey:function(e,i){t(e.target);var a=t.data(document.body,"openedJQXCalendar"+this.id);return!(null!=a&&a.length>0)||i._passKeyToCalendar(e)},_findPos:function(e){if(null!=e){for(;e&&("hidden"==e.type||1!=e.nodeType||t.expr.filters.hidden(e));)e=e.nextSibling;var i=t(e).coord(!0);return[i.left,i.top]}},testOffset:function(e,i,a){var n=e.outerWidth(),s=e.outerHeight(),r=t(window).width()+t(window).scrollLeft(),o=t(window).height()+t(window).scrollTop();if(i.left+n>r&&n>this.host.width()){var l=this.host.coord().left,d=n-this.host.width();i.left=l-d+2}return i.left<0&&(i.left=parseInt(this.host.coord().left)+"px"),i.top-=Math.min(i.top,i.top+s>o&&o>s?Math.abs(s+a+23):0),i},open:function(t){this.timePopup="time"==t,this.showCalendar()},close:function(t){this.hideCalendar()},_getBodyOffset:function(){var e=0,i=0;return"0px"!=t("body").css("border-top-width")&&(e=parseInt(t("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=t("body").css("border-left-width")&&(i=parseInt(t("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:e}},initTimePopup:function(){this.timePopupElement=t("<div style='border-style: solid; border-width: 0px;'></div>").appendTo(this.timeContainer),this.timePopupElement.addClass(this.toThemeProperty("jqx-widget-content jqx-widget jqx-date-time-input-popup"));var e="";e+="<table><tbody><tr><td><a class='increment-hour-column' href='javascript:;' data-action='incrementHour'><div class='jqx-icon-up'></div></a></td><td class='separator'>&nbsp;</td><td><a class='increment-minute-column' href='javascript:;' data-action='incrementMinute'><div class='jqx-icon-up'></div></a></td><td class='separator'>&nbsp;</td><td><a class='increment-second-column' href='javascript:;' data-action='incrementSecond'><div class='jqx-icon-up'></div></a></td><td class='separator'>&nbsp;</td><td><a class='increment-millisecond-column' href='javascript:;' data-action='incrementMSSecond'><div class='jqx-icon-up'></div></a></td><td class='separator'>&nbsp;</td><td class='increment-meridian-column'><a href='javascript:;' data-action='toggleMeridian'><div class='jqx-icon-up'></div></a></td></tr><tr><td><input type='text' class='jqx-timepicker-hour' maxlength='2'></td><td class='separator'>:</td><td><input type='text' class='jqx-timepicker-minute' maxlength='2'></td><td class='separator'>:</td><td><input type='text' class='jqx-timepicker-second' maxlength='2'></td><td class='separator'>:</td><td><input type='text' class='jqx-timepicker-millisecond' maxlength='3'></td><td class='separator'>&nbsp;</td><td><input type='text' class='jqx-timepicker-meridian' maxlength='2'></td></tr><tr><td><a class='decrement-hour-column' href='javascript:;' data-action='decrementHour'><div class='jqx-icon-down'></div></a></td><td class='separator'></td><td><a class='decrement-minute-column' href='javascript:;' data-action='decrementMinute'><div class='jqx-icon-down'></div></a></td><td class='separator'></td><td><a class='decrement-second-column' href='javascript:;' data-action='decrementSecond'><div class='jqx-icon-down'></div></a></td><td class='separator'></td><td><a class='decrement-millisecond-column' href='javascript:;' data-action='decrementMillisecond'><div class='jqx-icon-down'></div></a></td><td class='separator'>&nbsp;</td><td><a class='decrement-meridian-column' href='javascript:;' data-action='toggleMeridian'><div class='jqx-icon-down'></div></a></td></tr></tbody></table>";var i=this._getFormatValue(this.formatString);"range"!=this.selectionMode?this.timePopupElement[0].innerHTML=e:this.timePopupElement[0].innerHTML="<table><tr><td>"+e+"</td><td>-</td><td>"+e+"</td></tr></table>",this.timePopupElement.find(".jqx-icon-down").addClass(this.toThemeProperty("jqx-icon jqx-icon-arrow-down")),this.timePopupElement.find(".jqx-icon-up").addClass(this.toThemeProperty("jqx-icon jqx-icon-arrow-up"));var a=this.timePopupElement.find("input");a.addClass(this.toThemeProperty("jqx-input")),a.addClass(this.toThemeProperty("jqx-rc-all")),this.addHandler(a,"mousedown",function(t){t.stopPropagation()});var n=function(e){e.target.className.indexOf("hour")>=0&&o._decrementHour(t(e.target)),e.target.className.indexOf("minute")>=0&&o._decrementMinuteSecond(t(e.target)),e.target.className.indexOf("second")>=0&&o._decrementMinuteSecond(t(e.target)),e.target.className.indexOf("millisecond")>=0&&o._decrementMillisecond(t(e.target)),e.target.className.indexOf("meridian")>=0&&o._decrementMeridian(t(e.target))},s=function(e){e.target.className.indexOf("hour")>=0&&o._incrementHour(t(e.target)),e.target.className.indexOf("minute")>=0&&o._incrementMinuteSecond(t(e.target)),e.target.className.indexOf("second")>=0&&o._incrementMinuteSecond(t(e.target)),e.target.className.indexOf("millisecond")>=0&&o._incrementMillisecond(t(e.target)),e.target.className.indexOf("meridian")>=0&&o._incrementMeridian(t(e.target))},r=function(t,e){if(e.isEditing){var i=0;t||(t=window.event),t.originalEvent&&t.originalEvent.wheelDelta&&(t.wheelDelta=t.originalEvent.wheelDelta),t.originalEvent&&void 0!=t.originalEvent.deltaY&&(i=-t.originalEvent.deltaY),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i&&(document.activeElement==t.target&&"input"==t.target.nodeName.toLowerCase()&&(i<0?n(t):s(t)),t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventDefault&&t.preventDefault(),t.returnValue=!1}};this.addHandler(a,"wheel",function(t){r(t,o)}),this.addHandler(a,"keydown",function(e){t(e.target);if(e.ctrlKey)if(38==e.keyCode){if(o.isOpened())return o.hideCalendar("keyboard","keyboard"),o.dateTimeInput.focus(),!1}else if(40==e.keyCode&&!o.isOpened())return o.showCalendar("keyboard","keyboard"),o.dateTimeInput.focus(),!1;40==e.keyCode?(n(e),e.preventDefault()):38==e.keyCode?(s(e),e.preventDefault()):13==e.keyCode?(e.preventDefault(),o.hideCalendar("keyboard","keyboard"),o.dateTimeInput.focus()):27==e.keyCode&&(e.preventDefault(),o.hideCalendar("cancel"),o.dateTimeInput.focus())}),this.hourInput=t(a[0]),this.minuteInput=t(a[1]),this.secondInput=t(a[2]),this.mssecondInput=t(a[3]),this.meridianInput=t(a[4]),this.hourInput2=t(a[5]),this.minuteInput2=t(a[6]),this.secondInput2=t(a[7]),this.mssecondInput2=t(a[8]),this.meridianInput2=t(a[9]);var o=this,l=this.timePopupElement.find(".increment-hour-column");this.hourIncrement=t(l[0]),this.hourIncrement2=t(l[1]),this.addHandler(a,"change",function(e){var a=t(e.target);if(a.val().length<=1&&a.val("0"+t(e.target).val()),e.target.className.indexOf("hour")>=0){n=parseInt(t(e.target).val());if(i.indexOf("HH")>=0)for(;n>24;)n-=24;else for(;n>12;)n-=12;n<10&&(n="0"+n),a.val()!=n&&a.val(n)}if(e.target.className.indexOf("minute")>=0||e.target.className.indexOf("second")>=0){for(var n=parseInt(t(e.target).val());n>59;)n--;n<10&&(n="0"+n),a.val()!=n&&a.val(n)}}),this._incrementHour=function(t){var e=parseInt(t.val());e++,i.indexOf("HH")>=0?e>23&&(e=0):e>12&&(e=1),e<10&&(e="0"+e),t.val(e)},this._incrementMinuteSecond=function(t){var e=parseInt(t.val());++e>59&&(e=0),e<10&&(e="0"+e),t.val(e)},this._incrementMillisecond=function(t){var e=parseInt(t.val());++e>999&&(e=0),e<10&&(e="0"+e),t.val(e)},this._incrementMeridian=function(t){var e=t.val();e=e.toLowerCase().indexOf("a")>=0?"PM":"AM",t.val(e)},this._decrementHour=function(t){var e=parseInt(t.val());e--,i.indexOf("HH")>=0?e<0&&(e=23):e<1&&(e=12),e<10&&(e="0"+e),t.val(e)},this._decrementMinuteSecond=function(t){var e=parseInt(t.val());--e<0&&(e=59),e<10&&(e="0"+e),t.val(e)},this._decrementMillisecond=function(t){var e=parseInt(t.val());--e<0&&(e=999),e<10&&(e="0"+e),t.val(e)},this._decrementMeridian=function(t){var e=t.val();e=e.toLowerCase().indexOf("a")>=0?"PM":"AM",t.val(e)},this.addHandler(this.hourIncrement,"mousedown",function(t){t.stopPropagation(),o._incrementHour(o.hourInput)}),this.addHandler(this.hourIncrement2,"mousedown",function(t){t.stopPropagation(),o._incrementHour(o.hourInput2)});var d=this.timePopupElement.find(".increment-minute-column");this.minuteIncrement=t(d[0]),this.minuteIncrement2=t(d[1]),this.addHandler(this.minuteIncrement,"mousedown",function(t){t.stopPropagation(),o._incrementMinuteSecond(o.minuteInput)}),this.addHandler(this.minuteIncrement2,"mousedown",function(t){t.stopPropagation(),o._incrementMinuteSecond(o.minuteInput2)});var h=this.timePopupElement.find(".increment-second-column");this.secondIncrement=t(h[0]),this.secondIncrement2=t(h[1]),this.addHandler(this.secondIncrement,"mousedown",function(t){t.stopPropagation(),o._incrementMinuteSecond(o.secondInput)}),this.addHandler(this.secondIncrement2,"mousedown",function(t){t.stopPropagation(),o._incrementMinuteSecond(o.secondInput2)});var u=this.timePopupElement.find(".increment-millisecond-column");this.millisecondsIncrement=t(u[0]),this.millisecondsIncrement2=t(u[1]),this.addHandler(this.millisecondsIncrement,"mousedown",function(t){t.stopPropagation(),o._incrementMillisecond(o.mssecondInput)}),this.addHandler(this.millisecondsIncrement2,"mousedown",function(t){t.stopPropagation(),o._incrementMillisecond(o.mssecondInput2)});var c=this.timePopupElement.find(".increment-meridian-column");this.meridianIncrement=t(c[0]),this.meridianIncrement2=t(c[1]),this.addHandler(this.meridianIncrement,"mousedown",function(t){t.stopPropagation(),o._incrementMeridian(o.meridianInput)}),this.addHandler(this.meridianIncrement2,"mousedown",function(t){t.stopPropagation(),o._incrementMeridian(o.meridianInput2)});var m=this.timePopupElement.find(".decrement-hour-column");this.hourDecrement=t(m[0]),this.hourDecrement2=t(m[1]),this.addHandler(this.hourDecrement,"mousedown",function(t){t.stopPropagation(),o._decrementHour(o.hourInput)}),this.addHandler(this.hourDecrement2,"mousedown",function(t){t.stopPropagation(),o._decrementHour(o.hourInput2)});var p=this.timePopupElement.find(".decrement-minute-column");this.minuteDecrement=t(p[0]),this.minuteDecrement2=t(p[1]),this.addHandler(this.minuteDecrement,"mousedown",function(t){t.stopPropagation(),o._decrementMinuteSecond(o.minuteInput)}),this.addHandler(this.minuteDecrement2,"mousedown",function(t){t.stopPropagation(),o._decrementMinuteSecond(o.minuteInput2)});var f=this.timePopupElement.find(".decrement-second-column");this.secondDecrement=t(f[0]),this.secondDecrement2=t(f[1]),this.addHandler(this.secondDecrement,"mousedown",function(t){t.stopPropagation(),o._decrementMinuteSecond(o.secondInput)}),this.addHandler(this.secondDecrement2,"mousedown",function(t){t.stopPropagation(),o._decrementMinuteSecond(o.secondInput2)});var g=this.timePopupElement.find(".decrement-millisecond-column");this.millisecondsDecrement=t(g[0]),this.millisecondsDecrement2=t(g[1]),this.addHandler(this.millisecondsDecrement,"mousedown",function(t){t.stopPropagation(),o._decrementMillisecond(o.mssecondInput)}),this.addHandler(this.millisecondsDecrement2,"mousedown",function(t){t.stopPropagation(),o._decrementMillisecond(o.mssecondInput2)});var v=this.timePopupElement.find(".decrement-meridian-column");this.meridianDecrement=t(v[0]),this.meridianDecrement2=t(v[1]),this.addHandler(this.meridianDecrement,"mousedown",function(t){t.stopPropagation(),o._decrementMeridian(o.meridianInput)}),this.addHandler(this.meridianDecrement2,"mousedown",function(t){t.stopPropagation(),o._decrementMeridian(o.meridianInput2)});var x=this.timePopupElement.find("table");this.addHandler(this.timePopupElement,"mousedown",function(t){t.stopPropagation()});var y=function(e){var a=e.find("tr");-1==i.indexOf("ss")&&(o.secondInput.hide(),o.secondInput2.hide(),t(t(a[0]).children()[3]).hide(),t(t(a[0]).children()[4]).hide(),t(t(a[1]).children()[3]).hide(),t(t(a[1]).children()[4]).hide(),t(t(a[2]).children()[3]).hide(),t(t(a[2]).children()[4]).hide()),-1==i.indexOf("tt")&&-1==i.indexOf("hh")&&(o.meridianInput.hide(),o.meridianInput2.hide(),t(t(a[0]).children()[7]).hide(),t(t(a[0]).children()[8]).hide(),t(t(a[1]).children()[7]).hide(),t(t(a[1]).children()[8]).hide(),t(t(a[2]).children()[7]).hide(),t(t(a[2]).children()[8]).hide()),-1==i.indexOf("zz")&&(o.mssecondInput.hide(),o.mssecondInput2.hide(),t(t(a[0]).children()[5]).hide(),t(t(a[0]).children()[6]).hide(),t(t(a[1]).children()[5]).hide(),t(t(a[1]).children()[6]).hide(),t(t(a[2]).children()[5]).hide(),t(t(a[2]).children()[6]).hide())};1==x.length?y(x):(y(t(t(x)[1])),y(t(t(x)[2])))},updateTimePopup:function(){var t=this._getFormatValue(this.formatString);if("range"!=this.selectionMode){r=this.getDate();if(this.hourInput){if(r)var e=r.getHours(),i=r.getMinutes(),a=r.getHours(),n=r.getSeconds(),s=r.getMilliseconds();else var e=0,i=0,a=0,n=0,s=0;e>=12?(a="PM",-1==t.indexOf("HH")&&0==(e-=12)&&(e=12)):a="AM","none"!=this.meridianInput.css("display")&&0==e&&(e=12),e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),s<10&&(s="0"+s),this.hourInput.val(e),this.minuteInput.val(i),this.secondInput.val(n),this.mssecondInput.val(s),this.meridianInput.val(a)}}else{r=this.getRange().from;if(this.hourInput){if(r)var e=r.getHours(),i=r.getMinutes(),a=r.getHours(),n=r.getSeconds(),s=r.getMilliseconds();else var e=0,i=0,a=0,n=0,s=0;e>=12?(a="PM",-1==t.indexOf("HH")&&0==(e-=12)&&(e=12)):a="AM","none"!=this.meridianInput.css("display")&&0==e&&(e=12),e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),s<10&&(s="0"+s),this.hourInput.val(e),this.minuteInput.val(i),this.secondInput.val(n),this.mssecondInput.val(s),this.meridianInput.val(a)}var r=this.getRange().to;if(this.hourInput2){if(r)var e=r.getHours(),i=r.getMinutes(),a=r.getHours(),n=r.getSeconds(),s=r.getMilliseconds();else var e=0,i=0,a=0,n=0,s=0;e>=12?(a="PM",-1==t.indexOf("HH")&&0==(e-=12)&&(e=12)):a="AM","none"!=this.meridianInput.css("display")&&0==e&&(e=12),e<10&&(e="0"+e),i<10&&(i="0"+i),n<10&&(n="0"+n),s<10&&(s="0"+s),this.hourInput2.val(e),this.minuteInput2.val(i),this.secondInput2.val(n),this.mssecondInput2.val(s),this.meridianInput2.val(a)}}},showCalendar:function(){var e=this.calendarContainer,i=this._calendar;if(t.jqx.aria(this,"aria-expanded",!0),this.showTimeButton)if(this.timePopup){this.timePopupElement||this.initTimePopup(),this.calendarContainer.css("visibility","hidden"),this.timeContainer.css("visibility","visible"),this.updateTimePopup();for(var a=this.timeContainer.find("input"),n=0,s=0;s<a.length;s++)"none"!=a[s].style.display&&(n+=50);this.container.width(parseInt(n)),this.touch||setTimeout(function(){a[0].focus(),t(a[0]).select()},150+this.openDelay)}else this.container.width(parseInt(this.calendarContainer.width())+25),this.timeContainer.css("visibility","hidden"),this.calendarContainer.css("visibility","visible");null!=this.value?"range"!=this.selectionMode?this._oldDT=new Date(this.value.dateTime):this._oldDT=this.getRange():this._oldDT=null,i.canRender||(i.canRender=!0,i.render());this.container;var r,o=this,l=(t(window).scrollTop(),t(window).scrollLeft(),parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px"),d=parseInt(Math.round(this.host.coord(!0).left));"element"===this.dropDownContainer&&(l=parseInt(this.host.outerHeight())-1+"px",r=0),r=d+"px";var h=t.jqx.mobile.isSafariMobileBrowser()||t.jqx.mobile.isWindowsPhone();null!=h&&h&&(r=t.jqx.mobile.getLeftPos(this.element),l=t.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=t("body").css("border-top-width")&&(l=parseInt(l)-this._getBodyOffset().top+"px"),"0px"!=t("body").css("border-left-width")&&(r=parseInt(r)-this._getBodyOffset().left+"px")),this.container.css("left",r),this.container.css("top",l);var u=this.closeCalendarAfterSelection;if(this.closeCalendarAfterSelection=!1,this.isEditing=!1,"default"==o.selectionMode){this._validateValue(),this._updateText();var c=null!=this.value?this.value.dateTime:new Date;i.setDate(c)}this.closeCalendarAfterSelection=u;var m=!1;if("right"==this.dropDownHorizontalAlignment||this.rtl){var p=this.container.outerWidth(),f=Math.abs(p-this.host.outerWidth()+2);if(this.rtl||(f-=2),p>this.host.width()){this.container.css("left",23+parseInt(Math.round(d))-f+"px")}else this.container.css("left",25+parseInt(Math.round(d))+f+"px")}if("top"==this.dropDownVerticalAlignment){var g=e.height();this.timePopup&&this.timeContainer.css("top",this.container.height()-75),m=!0,e.css("top",23),e.addClass(this.toThemeProperty("jqx-popup-up"));var v=parseInt(this.host.outerHeight()),x=parseInt(l)-Math.abs(g+v+23);this.container.css("top",x)}if(this.enableBrowserBoundsDetection){var y=this.testOffset(e,{left:parseInt(this.container.css("left")),top:parseInt(l)},parseInt(this.host.outerHeight()));parseInt(this.container.css("top"))!=y.top?(m=!0,e.css("top",23),e.addClass(this.toThemeProperty("jqx-popup-up"))):e.css("top",0),this.container.css("top",y.top),parseInt(this.container.css("left"))!=y.left&&this.container.css("left",y.left)}if(this._raiseEvent(7,e),"none"!=this.animationType){this.container.css("display","block");var T=parseInt(e.outerHeight());e.stop(),this.isanimating=!0,this.opening=!0,"fade"==this.animationType?(e.css("margin-top",0),e.css("opacity",0),e.animate({opacity:1},this.openDelay,function(){o.isanimating=!1,o.opening=!1,t.data(document.body,"openedJQXCalendar"+o.id,e),o.calendarContainer.focus()}),this.timePopup&&(this.timeContainer.css("margin-top",0),this.timeContainer.css("opacity",0),this.timeContainer.animate({opacity:1},this.openDelay,function(){o.isanimating=!1,o.opening=!1,t.data(document.body,"openedJQXCalendar"+o.id,e),o.timeContainer.focus()}))):(e.css("opacity",1),this.timePopup&&this.timeContainer.css("opacity",1),m?e.css("margin-top",T):e.css("margin-top",-T),this.timePopup&&(m?this.timeContainer.css("margin-top",T):this.timeContainer.css("margin-top",-T),this.timeContainer.animate({"margin-top":0},this.openDelay,function(){o.isanimating=!1,o.opening=!1,t.data(document.body,"openedJQXCalendar"+o.id,e),o.timeContainer.focus()})),e.animate({"margin-top":0},this.openDelay,function(){o.isanimating=!1,o.opening=!1,t.data(document.body,"openedJQXCalendar"+o.id,e),o.calendarContainer.focus()}))}else e.stop(),o.isanimating=!1,o.opening=!1,e.css("opacity",1),e.css("margin-top",0),this.container.css("display","block"),t.data(document.body,"openedJQXCalendar"+o.id,e),this.calendarContainer.focus(),this.timePopup&&(this.timeContainer.stop(),this.timeContainer.css("opacity",1),this.timeContainer.css("margin-top",0),this.timeContainer.focus());null==this.value&&this._calendar&&this._calendar._getSelectedCell()&&(this._calendar._getSelectedCell().isSelected=!1),this.timePopup?(this.timeButtonIcon.addClass(this.toThemeProperty("jqx-icon-time-pressed")),this.timeButton.addClass(this.toThemeProperty("jqx-fill-state-hover")),this.timeButton.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.timeContainer.addClass(this.toThemeProperty("jqx-fill-state-focus"))):(this.calendarButtonIcon.addClass(this.toThemeProperty("jqx-icon-calendar-pressed")),this.calendarButton.addClass(this.toThemeProperty("jqx-fill-state-hover")),this.calendarButton.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.calendarContainer.addClass(this.toThemeProperty("jqx-fill-state-focus"))),this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"))},hideCalendar:function(e,i){i&&(this.changeType=i);var a=this.calendarContainer,n=this.container,s=this;if(t.jqx.aria(this,"aria-expanded",!1),this.showTimeButton&&"hidden"!=this.timeContainer.css("visibility")&&"cancel"!=e)if("range"!=this.selectionMode&&this.hourInput){var r=this.getDate(),o=parseInt(this.hourInput.val()),l=parseInt(this.minuteInput.val()),d=parseInt(this.secondInput.val()),h=parseInt(this.mssecondInput.val()),u=this.meridianInput.val();isNaN(o)&&(o=0),isNaN(l)&&(l=0),isNaN(d)&&(d=0),isNaN(h)&&(h=0),"none"!=this.meridianInput.css("display")&&(u.toLowerCase().indexOf("p")>=0&&o<12&&(o+=12),u.toLowerCase().indexOf("a")>=0&&o>=12&&(o-=12)),r||(r=new Date),r.setHours(o,l,d,h),this.setDate(r)}else if(this.hourInput&&"selected"!=e){var c=this.getRange(),o=parseInt(this.hourInput.val()),l=parseInt(this.minuteInput.val()),d=parseInt(this.secondInput.val()),h=parseInt(this.mssecondInput.val()),u=this.meridianInput.val();isNaN(o)&&(o=0),isNaN(l)&&(l=0),isNaN(d)&&(d=0),isNaN(h)&&(h=0),"none"!=this.meridianInput.css("display")&&(u.toLowerCase().indexOf("p")>=0&&o<12&&(o+=12),u.toLowerCase().indexOf("a")>=0&&o>=12&&(o-=12));var m=c.from;m||(m=new Date),m.setHours(o,l,d,h);var o=parseInt(this.hourInput2.val()),l=parseInt(this.minuteInput2.val()),d=parseInt(this.secondInput2.val()),h=parseInt(this.mssecondInput2.val()),u=this.meridianInput2.val();""==l&&(l=0),""==d&&(d=0),""==h&&(h=0),"none"!=this.meridianInput2.css("display")&&(u.toLowerCase().indexOf("p")>=0&&o<12&&(o+=12),u.toLowerCase().indexOf("a")>=0&&o>=12&&(o-=12));var p=c.to;if(p||(p=new Date),p.setHours(o,l,d,h),p.valueOf()<m.valueOf())return!1;this.setRange(m,p)}else if("selected"==e)return;if(t.data(document.body,"openedJQXCalendar"+this.id,null),"none"!=this.animationType){var f=a.outerHeight();a.css("margin-top",0),this.showTimeButton&&this.timeContainer.css("margin-top",0),this.isanimating=!0;var g=-f;parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(g=f),"fade"==this.animationType?a.animate({opacity:0},this.closeDelay,function(){n.css("display","none"),s.isanimating=!1}):a.animate({"margin-top":g},this.closeDelay,function(){n.css("display","none"),s.isanimating=!1}),this.showTimeButton&&("fade"==this.animationType?this.timeContainer.animate({opacity:0},this.closeDelay,function(){n.css("display","none"),s.isanimating=!1}):this.timeContainer.animate({"margin-top":g},this.closeDelay,function(){n.css("display","none"),s.isanimating=!1}))}else n.css("display","none");void 0!=e&&this._updateSelectedDate(e),this.timeButtonIcon.removeClass(this.toThemeProperty("jqx-icon-time-pressed")),this.timeButton.removeClass(this.toThemeProperty("jqx-fill-state-hover")),this.timeButton.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.calendarButtonIcon.removeClass(this.toThemeProperty("jqx-icon-calendar-pressed")),this.calendarButton.removeClass(this.toThemeProperty("jqx-fill-state-hover")),this.calendarButton.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.timeContainer.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.calendarContainer.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent(8,a)},_updateSelectedDate:function(){var e=this.value;null==e&&((e=new t.jqx._jqxDateTimeInput.getDateTime(new Date))._setHours(0),e._setMinutes(0),e._setSeconds(0),e._setMilliseconds(0));var i=e.hour,a=e.minute,n=e.second,s=e.millisecond;if("range"!=this.selectionMode||null!=this._calendar.getRange().from){var r=new t.jqx._jqxDateTimeInput.getDateTime(this._calendar.value.dateTime);r._setHours(i),r._setMinutes(a),r._setSeconds(n),r._setMilliseconds(s);var o=this.setDate(r.dateTime);if("range"==this.selectionMode&&!o&&this._oldDT){var l=this.getRange(),d=(this._oldDT,!1),h=!1,u=this._oldDT.from;if(null!=(r=l.from)&&u&&r.getFullYear()==u.getFullYear()&&r.getMonth()==u.getMonth()&&r.getDate()==u.getDate()&&r.getHours()==u.getHours()&&r.getMinutes()==u.getMinutes()&&r.getSeconds()==u.getSeconds()&&(d=!0),null!=(r=l.to)&&(u=this._oldDT.to)&&r.getFullYear()==u.getFullYear()&&r.getMonth()==u.getMonth()&&r.getDate()==u.getDate()&&r.getHours()==u.getHours()&&r.getMinutes()==u.getMinutes()&&r.getSeconds()==u.getSeconds()&&(h=!0),d&&h)return!0;this._raiseEvent(0,{}),this._raiseEvent(9,{})}}else this.setDate(null)},_closeOpenedCalendar:function(e){var i=t(e.target),a=t.data(document.body,"openedJQXCalendar"+e.data.me.id),n=!1;if(t.each(i.parents(),function(){if(this.className&&this.className.indexOf){if(-1!=this.className.indexOf("jqx-calendar"))return n=!0,!1;if(-1!=this.className.indexOf("jqx-date-time-input-popup"))return n=!0,!1;if(-1!=this.className.indexOf("jqx-input"))return!1}}),t(e.target).ischildof(e.data.me.host))return!0;if(null!=e.target&&("B"==e.target.tagName||"b"==e.target.tagName)){var s=e.data.me.host.coord(),r=e.data.me.host.width(),o=e.data.me.host.height(),l=parseInt(s.top),d=parseInt(s.left);if(l<=e.pageY&&e.pageY<=l+o&&d<=e.pageX&&e.pageX<=d+r)return!0}if(null!=a&&!n&&a.length>0){var h=a[0].id.toString().toString().substring(13);t(document).find("#"+h);!1!==e.data.me.hideCalendar()&&t.data(document.body,"openedJQXCalendar"+e.data.me.id,null)}},_loadItems:function(){if(null!=this.value){this.items=new Array;var t=this._getFormatValue(this.formatString);this.items=this._parseFormatValue(t),this.editors=new Array;for(var e=0;e<this.items.length;e++){var i=this.items[e].getDateTimeEditorByItemType(this.value,this);this.editors[e]=i}}this._updateEditorsValue(),this._updateText()},_updateText:function(){var e=this,i="";if(0==e.items.length&&null!=e.value&&e._loadItems(),null!=e.value&&(e.items.length>=1&&(i=e.format(e.value,0,e.items.length)),e.dateTimeInput.val()!=i&&e._raiseEvent(1,e.value)),"range"==e.selectionMode){var a=e.getRange();if(fromText=e.format(e.value,0,e.items.length),a.to){var n=t.jqx._jqxDateTimeInput.getDateTime(a.from);fromText=e.format(n,0,e.items.length);var s=t.jqx._jqxDateTimeInput.getDateTime(a.to);toText=e.format(s,0,e.items.length)," - "==(i=fromText+" - "+toText)&&(i="")}else i=""}e.dateTimeInput.val(i)},format:function(t,e,i){for(var a="",n=e;n<i;++n){var s=this.items[n].dateParser(t,this);if(this.isEditing&&"ReadOnly"!=this.items[n].type&&"range"!=this.selectionMode){var r="Day"==this.items[n].type&&this.items[n].format.length>2;if("FORMAT_AMPM"==this.items[n].type&&(r=!0,s=0==this.editors[n].value?this.editors[n].amString:this.editors[n].pmString),!r)for(s=this.items[n].dateParserInEditMode(new Number(this.editors[n].value),"d"+this.editors[n].maxEditPositions,this);s.length<this.editors[n].maxEditPositions;)s="0"+s}a+=s}return a},_getFormatValueGroupLength:function(t){for(i=1;i<t.toString().length;++i)if(t.substring(i,i+1)!=t.substring(0,1))return i;return t.length},_parseFormatValue:function(e){for(var i=new Array,a=e.toString(),n=0;a.length>0;){var s=this._getFormatValueGroupLength(a),r=null;switch(a.substring(0,1)){case":":case"/":s=1,r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,1),"ReadOnly",this.culture);break;case'"':case"'":var o=a.indexOf(a[0],1);r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(1,1+Math.max(1,o-1)),"ReadOnly",this.culture),s=Math.max(1,o+1);break;case"\\":a.length>=2&&(r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(1,1),"ReadOnly",this.culture),s=2);break;case"d":case"D":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Day",this.culture);break;case"f":case"F":s>7&&(s=7),r=s>3?t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"ReadOnly",this.culture):t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Millisecond",this.culture);break;case"g":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"ReadOnly",this.culture);break;case"h":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"FORMAT_hh",this.culture);break;case"H":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"FORMAT_HH",this.culture);break;case"m":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Minute",this.culture);break;case"M":s>4&&(s=4),r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Month",this.culture);break;case"s":case"S":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Second",this.culture);break;case"t":case"T":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"FORMAT_AMPM",this.culture);break;case"y":case"Y":s>1?r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"Year",this.culture):(s=1,r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,1),dateTimeFormatInfo,"ReadOnly",this.culture));break;case"z":r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,s),"ReadOnly",this.culture);break;default:s=1,r=t.jqx._jqxDateTimeInput.DateTimeFormatItem._create(a.substring(0,1),"ReadOnly",this.culture)}i[n]=t.extend(!0,{},r),a=a.substring(s),n++}return i},_getFormatValue:function(t){if(null!=t&&0!=t.length||(t="d"),1==t.length)switch(t.substring(0,1)){case"d":return this.localization.calendar.patterns.d;case"D":return this.localization.calendar.patterns.D;case"t":return this.localization.calendar.patterns.t;case"T":return this.localization.calendar.patterns.T;case"f":return this.localization.calendar.patterns.f;case"F":return this.localization.calendar.patterns.F;case"M":return this.localization.calendar.patterns.M;case"Y":return this.localization.calendar.patterns.Y;case"S":return this.localization.calendar.patterns.S}return 2==t.length&&"%"==t.substring(0,1)&&(t=t.substring(1)),t},_updateEditorsValue:function(){var t=this.value;if(null!=t){var e=t.year,i=t.day,a=t.hour,n=t.millisecond,s=t.second,r=t.minute,o=t.month;if(null!=this.items)for(var l=0;l<this.items.length;l++)switch(this.items[l].type){case"FORMAT_AMPM":0==(d=a%12)&&(d=12),this.editors[l].value=a>=0&&a<12?0:1;break;case"Day":this.editors[l].value=i;break;case"FORMAT_hh":var d=a%12;0==d&&(d=12),this.editors[l].value=d;break;case"FORMAT_HH":this.editors[l].value=a;break;case"Millisecond":this.editors[l].value=n;break;case"Minute":this.editors[l].value=r;break;case"Month":this.editors[l].value=o;break;case"Second":this.editors[l].value=s;break;case"Year":this.editors[l].value=e}}},updateValue:function(e){if(!(this.isEditing||this.items&&0==this.items.length)){for(var i=1,a=1,n=0,s=0,r=0,o=0,l=1,d=!1,h=!1,u=!1,c=!1,m=!1,p=!1,f=!1,g=new Array,v=null,x=0,y=0;y<this.items.length;y++)switch(this.items[y].type){case"FORMAT_AMPM":this.editors[y].value,v=this.editors[y];break;case"Character":break;case"Day":this.items[y].format.length<3&&(a=this.editors[y].value,g[x++]=this.editors[y],0==a&&(a=1),u=!0);break;case"FORMAT_hh":case"FORMAT_HH":n=this.editors[y].value,c=!0;break;case"Millisecond":s=this.editors[y].value,f=!0;break;case"Minute":o=this.editors[y].value,m=!0;break;case"Month":h=!0,0==(l=this.editors[y].value)&&(l=1);break;case"ReadOnly":break;case"Second":r=this.editors[y].value,p=!0;break;case"Year":if(d=!0,i=this.editors[y].value,this.editors[y].getDateTimeItem().format.length<3){if(4=="1900".Length){var T=""+"1900"[0]+"1900"[1];i+=100*parseInt(T)}}0==i&&(i=1)}var _=null!=this.value?new Date(this.value.dateTime):null;if(i>0&&l>0&&a>0&&o>=0&&n>=0&&r>=0&&s>=0){var D=this.value;null!=D&&(d||(i=D.year),h||(l=D.month),u||(a=D.day));try{if(l>12&&(l=12),l<1&&(l=1),e&&D._daysInMonth(i,l)<=a&&(a=D._daysInMonth(i,l),null!=g&&g.length>0))for(y=0;y<g.length;y++)g[y].value=a;null!=v&&(0==v.value?n>=12&&(n-=12):n+12<24&&(n+=12));this.value.dateTime.getDate();this.value._setYear(parseInt(i)),this.value._setDay(a),this.value._setMonth(l),c&&this.value._setHours(n),m&&this.value._setMinutes(o),p&&this.value._setSeconds(r),f&&this.value._setMilliseconds(s),this._validateTimeRange()}catch(t){this.value=D}if(null!=_&&!(this.value.dateTime.getFullYear()==_.getFullYear()&&this.value.dateTime.getDate()==_.getDate()&&this.value.dateTime.getMonth()==_.getMonth()&&this.value.dateTime.getHours()==_.getHours()&&this.value.dateTime.getMinutes()==_.getMinutes()&&this.value.dateTime.getSeconds()==_.getSeconds())){if(this.changing){var I=this.changing(_,this.value.dateTime);I&&(this.value=t.jqx._jqxDateTimeInput.getDateTime(I))}this._raiseEvent("0",this.value.dateTime),this.cookies&&null!=this.value&&t.jqx.cookie.cookie("jqxDateTimeInput"+this.element.id,this.value.dateTime.toString(),this.cookieoptions),this.change&&this.change(this.value.dateTime)}}var b=this.editors.indexOf(this.activeEditor);this.items[b];this.value&&(this.calendarContainer.jqxCalendar("_isDisabled",this.value.dateTime)?this.dateTimeInput.addClass(this.toThemeProperty("jqx-input-invalid")):this.dateTimeInput.removeClass(this.toThemeProperty("jqx-input-invalid")))}},_internalSetValue:function(t){this.value._setYear(parseInt(t.year)),this.value._setDay(t.day),this.value._setMonth(t.month),this.value._setHours(t.hour),this.value._setMinutes(t.minute),this.value._setSeconds(t.second),this.value._setMilliseconds(t.milisecond)},_raiseEvent:function(e,i,a){var n=this.events[e],s={};s.owner=this,null==i&&(i={}),null==a&&(a=i);var r=i.charCode?i.charCode:i.keyCode?i.keyCode:0,o=!0,l=this.readonly,d=new t.Event(n);if(d.owner=this,d.args=s,d.args.date=this.getDate(),9==e&&(d.args.type=this.changeType,this.changeType=null),this.element.value=this.dateTimeInput.val(),9==e&&"range"!=this.selectionMode){h=d.args.date;if(this._oldDT){if(null!=h&&h.getFullYear()==this._oldDT.getFullYear()&&h.getMonth()==this._oldDT.getMonth()&&h.getDate()==this._oldDT.getDate()&&h.getHours()==this._oldDT.getHours()&&h.getMinutes()==this._oldDT.getMinutes()&&h.getSeconds()==this._oldDT.getSeconds())return!0;t.jqx.aria(this,"aria-valuenow",this.getDate()),t.jqx.aria(this,"aria-valuetext",this.getText()),null!=this.getDate()?t.jqx.aria(this,"aria-label","Current focused date is "+this.getDate().toLocaleString()):t.jqx.aria(this,"aria-label","Current focused date is Null")}d.args.oldValue=a,d.args.newValue=d.args.date,this._oldDT&&(d.args.oldValue=this._oldDT)}if("range"==this.selectionMode){if(d.args.date=this.getRange(),this._oldDT){var h=d.args.date.from;if(9==e){var u=!1,c=!1,m=this._oldDT.from;if(null!=h&&m&&h.getFullYear()==m.getFullYear()&&h.getMonth()==m.getMonth()&&h.getDate()==m.getDate()&&h.getHours()==m.getHours()&&h.getMinutes()==m.getMinutes()&&h.getSeconds()==m.getSeconds()&&(u=!0),null!=(h=d.args.date.to)&&(m=this._oldDT.to)&&h.getFullYear()==m.getFullYear()&&h.getMonth()==m.getMonth()&&h.getDate()==m.getDate()&&h.getHours()==m.getHours()&&h.getMinutes()==m.getMinutes()&&h.getSeconds()==m.getSeconds()&&(c=!0),u&&c)return!0;u=null==(u=d.args.date.from)?"":u.toString(),c=null==(c=d.args.date.to)?"":c.toString(),t.jqx.aria(this,"aria-valuenow",u+"-"+c),t.jqx.aria(this,"aria-valuetext",this.getText()),u&&c&&t.jqx.aria(this,"aria-label","Current focused range is "+u.toLocaleString()+"-"+c.toLocaleString())}}d.args.oldValue=a,d.args.newValue=d.args.date,this._oldDT&&(d.args.oldValue=this._oldDT)}if("none"==this.host.css("display"))return!0;2!=e&&3!=e&&4!=e&&5!=e&&6!=e&&(o=this.host.trigger(d),d.stopPropagation&&d.stopPropagation());var p=this;if(l||2!=e||this.disabled||setTimeout(function(){p.isEditing=!0,this.selectionMode,p._selectGroup(-1)},25),4==e){if(l||this.disabled){if(8!=r&&46!=r||(this.isEditing=!1,this.allowKeyboardDelete&&(this.allowNullDate?this.setDate(null):"range"!=this.selectionMode?this.setDate(this.getMinDate()):this.setRange(this.getMinDate(),this.getMinDate()))),9==r)return!0;if(!i.altKey)return!1}o=this._handleKeyDown(i,r)}else if(5==e){if(9==r)return!0;if(l||this.disabled)return!1}else if(6==e){if(9==r)return!0;if(l||this.disabled)return!1;o=this._handleKeyPress(i,r)}return o},_doLeftKey:function(){if(null!=this.activeEditor){this.isEditing||(this.isEditing=!0);var t=this.activeEditor,e=!1,i=this.editors.indexOf(this.activeEditor),a=i;if(this.enableAbsoluteSelection&&i>=0&&this.activeEditor.positions>0)return this.activeEditor.positions--,void this._selectGroup(i);for(;i>0;)if(this.activeEditor=this.editors[--i],this._selectGroup(i),"ReadOnly"!=this.items[i].type){e=!0;break}return e||a>=0&&(this.activeEditor=this.editors[a]),null!=this.activeEditor&&t!=this.activeEditor&&"ReadOnly"!=this.items[i].type&&(this.enableAbsoluteSelection?this.activeEditor.positions=this.activeEditor.maxEditPositions-1:this.activeEditor.positions=0),this.activeEditor!=t&&(this._validateValue(),this._updateText(),this._selectGroup(this.editors.indexOf(this.activeEditor)),!0)}},_doRightKey:function(){if(null!=this.activeEditor){this.isEditing||(this.isEditing=!0);var t=this.activeEditor,e=!1,i=this.editors.indexOf(this.activeEditor),a=i;if(this.enableAbsoluteSelection&&i>=0&&this.activeEditor.positions<this.activeEditor.maxEditPositions-1)return this.activeEditor.positions++,void this._selectGroup(i);for(;i<=this.editors.length-2;)if(this.activeEditor=this.editors[++i],this._selectGroup(i),"ReadOnly"!=this.items[i].type){if("Day"==this.items[i].type&&this.items[i].format.length>2)break;e=!0;break}return e||a>=0&&(this.activeEditor=this.editors[a]),null!=this.activeEditor&&this.activeEditor!=t&&"ReadOnly"!=this.items[i].type&&(this.activeEditor.positions=0),this.activeEditor!=t&&(this._validateValue(),this._updateText(),this._selectGroup(this.editors.indexOf(this.activeEditor)),!0)}},_saveSelectedText:function(){var t=this._selection(),e="",a=this.dateTimeInput.val();if(t.start>0||t.length>0)for(i=t.start;i<t.end;i++)e+=a[i];return window.clipboardData&&window.clipboardData.setData("Text",e),e},_selectWithAdvancePattern:function(){var t=this.editors.indexOf(this.activeEditor),e=!1;if("ReadOnly"!=this.items[t].type&&(e=!0),e){var i=this.activeEditor;if(null!=i&&i.positions==i.maxEditPositions){this.editorText="";var a=i.value,n=!1;switch(this.items[t].type){case"FORMAT_AMPM":a<0?a=0:a>1&&(a=1);break;case"Character":break;case"Day":a<1?a=1:a>31&&(a=31);break;case"FORMAT_hh":a<1?a=1:a>12&&(a=12);break;case"FORMAT_HH":a<0?a=0:a>23&&(a=23);break;case"Millisecond":a<0?a=0:a>99&&(a=99);break;case"Minute":a<0?a=0:a>59&&(a=59);break;case"Month":a<1?a=1:a>12&&(a=12);break;case"ReadOnly":break;case"Second":a<0?a=0:a>59&&(a=59);break;case"Year":a<this.minDate.year?a=this.minDate.year:a>this.maxDate.year&&(a=this.maxDate.year)}return i.value!=a&&(n=!0),!n&&(this.isEditing=!1,this._validateValue(),this._updateText(),this.isEditing=!0,this._doRightKey(),!0)}}},_handleKeyPress:function(t,e){var i=this._selection(),a=this,n=t.ctrlKey||t.metaKey;if(n&&97==e||n&&65==e)return!0;if(8==e)return i.start>0&&a._setSelectionStart(i.start),!1;if(46==e)return i.start<this.items.length&&a._setSelectionStart(i.start),!1;if(27===e)return this._firstFocusDate&&(this.setDate(this._firstFocusDate),this._setSelectionStart(0),this._selectGroup(-1)),!1;if(i.start>=0){this.changeType="keyboard";var s=String.fromCharCode(e),r=parseInt(s);if("p"!=s&&"a"!=s&&"A"!=s&&"P"!=s||"FORMAT_AMPM"==this.activeEditor.item.type&&(0!=this.activeEditor.value||"p"!=s&&"P"!=s?1!=this.activeEditor.value||"a"!=s&&"A"!=s||this.spinDown():this.spinUp()),!isNaN(r)){"block"==this.container.css("display")&&this.hideCalendar(),this.updateValue(),this._updateText();var o=this.editors.indexOf(this.activeEditor),l=null;if(this.isEditing=!0,"ReadOnly"!=o.type&&(l=this.activeEditor),null!=l&&0==l.positions&&(this.editorText=""),null==this.activeEditor&&(this.activeEditor=this.editors[0]),null==this.activeEditor)return!1;this.activeEditor.insert(s),null!=l&&this.editorText.length>=l.maxEditPositions&&(this.editorText=""),this.editorText+=s;var d=this._selectWithAdvancePattern();if(this.activeEditor.positions==this.activeEditor.maxEditPositions){var h=this._getLastEditableEditorIndex();this.editors.indexOf(this.activeEditor)==h&&d&&this.enableAbsoluteSelection?this.activeEditor.positions=this.activeEditor.maxEditPositions-1:this.activeEditor.positions=0}return!0,this.updateValue(),this._updateText(),this._selectGroup(this.editors.indexOf(this.activeEditor)),!1}}return this._isSpecialKey(e)},_getLastEditableEditorIndex:function(){for(itemIndex=this.items.length-1;itemIndex>=0;itemIndex--)if("ReadOnly"!=this.items[itemIndex].type)return itemIndex;return-1},_handleKeyDown:function(e,i){var a=this;if(this.timePopup=!1,84==i&&(this.timePopup=!0),115==e.keyCode){if(a.isOpened())return a.hideCalendar("keyboard","keyboard"),!1;if(!a.isOpened())return a.showCalendar("keyboard","keyboard"),!1}if(e.altKey){if(38==e.keyCode){if(a.isOpened())return a.showTimeButton&&!a.showCalendarButton&&(a.timePopup=!0),a.hideCalendar("keyboard","keyboard"),!1}else if(40==e.keyCode&&!a.isOpened())return a.showTimeButton&&!a.showCalendarButton&&(a.timePopup=!0),a.showCalendar("keyboard","keyboard"),!1}else if(e.ctrlKey)if(this.timePopup=!0,38==e.keyCode){if(a.isOpened())return a.hideCalendar("keyboard","keyboard"),!1}else if(40==e.keyCode&&!a.isOpened())return a.showCalendar("keyboard","keyboard"),!1;if(!a.isOpened()){a._selection();var n=e.ctrlKey||e.metaKey;if(n&&99==i||n&&67==i)return a._saveSelectedText(e),!0;if(n&&122==i||n&&90==i)return!1;if(n&&118==i||n&&86==i||e.shiftKey&&45==i){a.val();var s=this,r=t('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');return t("body").append(r),r.select(),setTimeout(function(){var t=r.val();s.setDate(t),r.remove()},100),!0}if(8==i||46==i){if(e.altKey||n||46!=i){if(null!=a.activeEditor){var o=a.editors.indexOf(a.activeEditor);if(a.activeEditor.positions>=0){var l=a._format(Number(a.activeEditor.value),"d"+a.activeEditor.maxEditPositions,a.culture);if(tmp=l,tmp=tmp.substring(0,a.activeEditor.positions)+"0"+tmp.substring(a.activeEditor.positions+1),parseInt(tmp)<a.activeEditor.minValue&&(tmp=a._format(Number(a.activeEditor.minValue),"d"+a.activeEditor.maxEditPositions,a.culture)),a.enableAbsoluteSelection?a.activeEditor.value=tmp:a.activeEditor.value=a.activeEditor.minValue,a._validateValue(),a._updateText(),a.changeType="keyboard",8==i){var d=this;a.enableAbsoluteSelection&&a.activeEditor.positions>0?setTimeout(function(){d.activeEditor.positions=d.activeEditor.positions-1,d._selectGroup(o)},10):setTimeout(function(){d._doLeftKey()},10)}else a._selectGroup(o)}else a._doLeftKey()}}else a.isEditing=!1,a.allowKeyboardDelete&&(a.changeType="keyboard",a.allowNullDate?a.setDate(null):"range"!=a.selectionMode?a.setDate(a.getMinDate()):a.setRange(a.getMinDate(),a.getMinDate()));return!1}if(38==i)return this.spinUp(),a.changeType="keyboard",!1;if(40==i)return this.spinDown(),a.changeType="keyboard",!1;if(9==i){if(null==a.value)return!0;if(e.shiftKey)h=this._doLeftKey();else h=this._doRightKey();return!h}if(37==i){if(this._editor)return(h=this._doLeftKey())||(this.isEditing=!1,this._validateValue()),!h;h=this._doLeftKey();return!1}if(39==i||191==i){if(this._editor)return(h=this._doRightKey())||(this.isEditing=!1,this._validateValue()),!h;var h=this._doRightKey();return!1}var u=this._isSpecialKey(i);return null==this.value&&(i>=48&&i<=57||i>=96&&i<=105)&&(a.changeType="keyboard",new Date>=this.getMinDate()&&new Date<=this.getMaxDate()?this.setDate(new Date):this.setDate(this.getMaxDate())),!t.jqx.browser.mozilla||(!!(t.jqx.browser.mozilla&&t.jqx.browser.version>24)||u)}if(9==e.keyCode)return a.hideCalendar("selected","keyboard"),!0},_isSpecialKey:function(t){return 8==t||9==t||13==t||35==t||36==t||37==t||39==t||27==t||46==t},_selection:function(){if("selectionStart"in this.dateTimeInput[0]){var t=this.dateTimeInput[0],e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value}}var i=document.selection.createRange();if(null==i)return{start:0,end:t.value.length,length:0};var a=this.dateTimeInput[0].createTextRange(),n=a.duplicate();a.moveToBookmark(i.getBookmark()),n.setEndPoint("EndToStart",a);e=i.text.length;return{start:n.text.length,end:n.text.length+i.text.length,length:e,text:i.text}},_selectGroup:function(t,e){if("none"!=this.host.css("display")&&!this.readonly){if(!e)var e=this._selection();for(var i="",a="",n=null,s=0;s<this.items.length;s++){if(a=this.items[s].dateParser(this.value,this),this.isEditing&&"ReadOnly"!=this.items[s].type&&!("Day"==this.items[s].type&&this.items[s].format.length>2)&&"FORMAT_AMPM"!=this.items[s].type)for(a=this.items[s].dateParserInEditMode(new Number(this.editors[s].value),"d"+this.editors[s].maxEditPositions,this);a.length<this.editors[s].maxEditPositions;)a="0"+a;if(i+=a,"ReadOnly"!=this.items[s].type&&!("Day"==this.items[s].type&&this.items[s].format.length>2))if(void 0!=t&&-1!=t){if(s>=t){var r=i.length-a.length,o=a.length;this.enableAbsoluteSelection&&!isNaN(parseInt(a))&&this.isEditing&&-1!=t&&(o=1,r+=this.editors[s].positions),r==this.dateTimeInput.val().length&&r--,this._setSelection(r,r+o),n=this.editors[s],this.activeEditor=n;break}}else if(i.length>=e.start){n=this.editors[s],this.activeEditor=n;var r=i.length-a.length,o=1;this.enableAbsoluteSelection?!isNaN(parseInt(a))&&this.isEditing&&-1!=t&&(o=1,r+=this.editors[s].positions):o=a.length,this._setSelection(r,r+o);break}}s<this.items.length&&-1==t&&"ReadOnly"!=this.items[s].type&&(this.activeEditor.positions=0);var l=this._selection();if(0==l.length&&l.start>0)this._getLastEditableEditorIndex()}},_getLastEditableEditorIndex:function(){var t=-1;for(i=0;i<this.editors.length;i++)"ReadOnly"!=this.items[i].type&&("Day"==this.items[i].type&&this.items[i].format.length>2||(t=i));return t},_setSelection:function(t,e){try{if("selectionStart"in this.dateTimeInput[0])this.dateTimeInput[0].setSelectionRange(t,e);else{var i=this.dateTimeInput[0].createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}}catch(t){}},_setSelectionStart:function(t){this._setSelection(t,t)},destroy:function(){t.jqx.utilities.resize(this.host,null,!0),this.host.removeClass("jqx-rc-all"),this.timePopupElement&&this.timePopupElement.remove(),this._calendar.destroy(),this.container.remove(),this._removeHandlers(),this.dateTimeInput.remove(),this.host.remove()},refreshValue:function(){this._refreshValue()},refresh:function(t){1!=t&&(this._setSize(),this._arrange())},resize:function(t,e){this.width=t,this.height=e,this.refresh()},_setOption:function(t,e,i){"value"===t&&(this.selectionMode,this._oldDT=null,this.value=e,this._refreshValue(),this._raiseEvent(9,{type:null})),"maxDate"==t&&(this._calendar.maxDate=e,this._raiseEvent(9,{type:null})),"minDate"==t&&(this._calendar.minDate=e,this._raiseEvent(9,{type:null})),"showCalendarButton"==t&&(e?this.calendarButton.css("display","block"):this.calendarButton.css("display","none")),"disabled"==t&&this.dateTimeInput.attr("disabled",e),"readonly"==t&&(this.readonly=e,this.dateTimeInput.css("readonly",e)),"textAlign"==t&&(this.dateTimeInput.css("text-align",e),this.textAlign=e),"width"==t?(this.width=e,this.width=parseInt(this.width),this._arrange()):"height"==t&&(this.height=e,this.height=parseInt(this.height),this._arrange())},_refreshValue:function(){this._updateEditorsValue(),this.updateValue(),this._validateValue(),this._updateText()}})}(jqxBaseFramework),function(t){t.jqx._jqxDateTimeInput.DateTimeFormatItem={},t.extend(t.jqx._jqxDateTimeInput.DateTimeFormatItem,{_create:function(t,e,i){return this.format=t,this.type=e,this.culture=i,this},_itemValue:function(){switch(this.format.length){case 1:return 9;case 2:return 99;case 3:default:return 999}},_maximumValue:function(){switch(this.format.length){case 1:return 9;case 2:return 99;case 3:default:return 999}},dateParser:function(t,e){return null==t?"":e._format(t.dateTime,1==this.format.length?"%"+this.format:this.format,this.culture)},dateParserInEditMode:function(t,e,i){return null==t?"":i._format(t.toString(),1==e.length?"%"+e:e,this.culture)},getDateTimeEditorByItemType:function(e,i){switch(this.type){case"FORMAT_AMPM":var a=t.jqx._jqxDateTimeInput.AmPmEditor._createAmPmEditor(this.format,e.hour/12,i.localization.calendar.AM[0],i.localization.calendar.PM[0],this,i);return v=t.extend({},a);case"Character":return null;case"Day":var n,s=e.year,r=e.month;n=3==this.format.length?i.localization.calendar.days.namesAbbr:this.format.length>3?i.localization.calendar.days.names:null;e.day;null!=n&&e.dayOfWeek+1;var o=t.jqx._jqxDateTimeInput.DateEditor._createDayEditor(e,e.day,1,e._daysInMonth(s,r),1==this.format.length?1:2,2,n,this,i);return v=t.extend({},o);case"FORMAT_hh":var l=e.hour%12;0==l&&(l=12);var d=t.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(l,1,12,1==this.format.length?1:2,2,this,i);return v=t.extend({},d);case"FORMAT_HH":var h=t.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(e.hour,0,23,1==this.format.length?1:2,2,this,i);return v=t.extend({},h);case"Millisecond":var u=t.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(e.millisecond/this._itemValue(),0,this._maximumValue(),this.format.length,this.format.length,this,i);return v=t.extend({},u);case"Minute":var c=t.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(e.minute,0,59,1==this.format.length?1:2,2,this,i);return v=t.extend({},c);case"Month":var m;m=3==this.format.length?i.localization.calendar.months.namesAbbr:this.format.length>3?i.localization.calendar.months.names:null;var p=t.jqx._jqxDateTimeInput.DateEditor._createMonthEditor(e.month,2==this.format.length?2:1,m,this,i);return v=t.extend({},p);case"ReadOnly":return t.jqx._jqxDateTimeInput.DisabledEditor._create(this.format.length,e.day,this,i);case"Second":var f=t.jqx._jqxDateTimeInput.NumberEditor._createNumberEditor(e.second,0,59,1==this.format.length?1:2,2,this,i);return v=t.extend({},f);case"Year":var g=t.jqx._jqxDateTimeInput.DateEditor._createYearEditor(e.year,4,this,i),v=t.extend({},g);return v}return null}})}(jqxBaseFramework),function(t){t.jqx._jqxDateTimeInput.DateEditor=t.extend(t.jqx._jqxDateTimeInput.DateEditor,{formatValueLength:0,handleYears:!1,handleDays:!1,handleMonths:!1,positions:0,value:0,minEditPositions:0,maxEditPositions:0,minValue:0,maxValue:0,item:null,dateTimeFormatInfo:null,days:null,dateTimeMonths:null,lastDayInput:null,minPositions:function(){return this.handleYears&&4==this.formatValueLength?this.positions<=1?1:this.positions>=4?4:this.positions:this.minEditPositions},initializeFields:function(t,e,i,a,n){this.minValue=t,this.maxValue=e,this.minEditPositions=i,this.maxEditPositions=a,this.updateActiveEditor(t),this.item=n},_createYearEditor:function(e,i,a,n){return t.jqx._jqxDateTimeInput.DateEditor=t.extend(!0,{},this),this.initializeFields(0,i<4?99:9999,2==i?2:1,i>3?4:2,a),this.initializeYearEditor(e,i,a.culture),this.handleYears=!0,this.that=n,this},initializeYearEditor:function(t,e,i){this.formatValueLength=e,this.dateTimeFormatInfo=i;var a=t;a=Math.min(a,9999),a=Math.max(a,1),a=this.formatValueLength<4?a%100:a,this.updateActiveEditor(a),this.value=a},updateActiveEditor:function(t){this.value=t,this.positions=0},_createDayEditor:function(e,i,a,n,s,r,o,l,d){return t.jqx._jqxDateTimeInput.DateEditor=t.extend(!0,{},this),this.initializeFields(a,n,1,r,l),this.currentValue=e,this.value=i,this.days=o,this.handleDays=!0,this.that=d,this},getDayOfWeek:function(e){return typeof this.currentValue==t.jqx._jqxDateTimeInput.DateTime&&this.currentValue.dayOfWeek(),e},defaultTextValue:function(){this.value;var t=this.minEditPositions;return this.that._format(this.value,"d"+t,"")},textValue:function(){if(this.handleDays){if(null==this.days)return this.defaultTextValue();var t=this.value%7+1;return t=this.getDayOfWeek(t),this.days[t]}return this.handleMonths?null==this.dateTimeMonths||this.value<1||this.value>12?this.defaultTextValue():this.dateTimeMonths[this.value-1]:this.defaultTextValue()},defaultInsertString:function(t){if(null==t)return this.deleteValue();if(0==t.length)return this.deleteValue();var e=t.substring(0,1);if(!isNaN(e)){var i;return i=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),this.positions>=this.maxEditPositions&&(this.positions=0),i=i.substring(0,this.positions)+e+i.substring(this.positions+1),i=this.setValueByString(i,1),!0}},setValueByString:function(t,e){t=this.fixValueString(t);var i=new Number(t);return this.value=i,this.positions+=e,t},fixValueString:function(t){return t.length>this.maxEditPositions&&(t=t.substring(t.length-this.maxEditPositions)),t},initializeValueString:function(t){var e;return e="",this.hasDigits()&&(e=t),e},deleteValue:function(){return(this.value!=this.minValue||0!=this.hasDigits())&&(this.updateActiveEditor(this.minValue),!0)},hasDigits:function(){return this.positions>0},insert:function(t){if(this.handleDays){if(null!=this.days){e=!1;if(e=this.insertLongString(t,e))return e;if(e=this.insertShortString(t,e))return e}return 1==this.value&&null!=this.lastDayInput&&this.lastDayInput.toString().length>0&&"0"==this.lastDayInput.toString()&&(this.value=0),this.lastDayInput=t,this.defaultInsertString(t)}if(this.handleMonths&&null!=this.dateTimeMonths){var e=!1;if(e=this.insertLongString2(t,e))return e;if(e=this.insertShortString2(t,e))return e}return this.defaultInsertString(t)},insertShortString:function(t,e){if(1==t.length)for(i=0;i<6;++i){var a=(this.value+i)%7+1;if(this.days[a-1].substring(0,1)==t)return this.updateActiveEditor(a),e=!0}return e},insertLongString:function(t,e){if(t.length>0)for(i=0;i<6;++i){var a=(this.value+i)%7+1;if(this.days[a-1]==t)return this.updateActiveEditor(a),e=!0}return e},_createMonthEditor:function(e,i,a,n,s){return t.jqx._jqxDateTimeInput.DateEditor=t.extend(!0,{},this),this.initializeFields(1,12,i,2,n),this.dateTimeMonths=a,this.value=e,null!=this.dateTimeMonths&&null!=this.dateTimeMonths[12]&&this.dateTimeMonths[12].length>0&&(this.dateTimeMonths=null),this.handleMonths=!0,this.that=s,this},insertLongString2:function(t,e){if(t.length>0)for(i=0;i<11;++i)if(month=(this.value+i)%12+1,this.dateTimeMonths[month-1]==t)return this.updateActiveEditor(month),e=!0;return e},insertShortString2:function(t,e){if(1==t.length)for(i=0;i<11;++i){var a=(this.value+i)%12+1;if(this.dateTimeMonths[a-1].substring(0,1)==t)return this.updateActiveEditor(a),e=!0}return e},correctMaximumValue:function(t){return t>this.maxValue&&(t=this.minValue),t},correctMinimumValue:function(t){return t<this.minValue&&(t=this.maxValue),t},increaseValue:function(t){var e=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),i=e.toString()[this.positions];if((i=parseInt(i)+1)>9&&(i=0),!t){var a=this.value+1;return a=this.correctMaximumValue(a),this.updateActiveEditor(a),!0}var n=e.substring(0,this.positions)+i+e.substring(this.positions+1);return!(n==this.value&&!this.hasDigits())&&(this.updateActiveEditor(n),!0)},decreaseValue:function(t){var e=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),i=e.toString()[this.positions];if((i=parseInt(i)-1)<0&&(i=9),!t){var a=this.value-1;return a=this.correctMinimumValue(a),this.updateActiveEditor(a),!0}var n=e.substring(0,this.positions)+i+e.substring(this.positions+1);return!(n==this.value&&!this.hasDigits())&&(this.updateActiveEditor(n),!0)},getDateTimeItem:function(){return this.item}})}(jqxBaseFramework),function(t){t.jqx._jqxDateTimeInput.NumberEditor={},t.extend(t.jqx._jqxDateTimeInput.NumberEditor,{formatValueLength:0,positions:0,value:0,minEditPositions:0,maxEditPositions:0,minValue:0,maxValue:0,item:null,minPositions:function(){return this.handleYears&&4==this.formatValueLength?this.positions<=1?1:this.positions>=4?4:this.positions:this.minEditPositions},_createNumberEditor:function(e,i,a,n,s,r,o){return t.jqx._jqxDateTimeInput.NumberEditor=t.extend(!0,{},this),this.initializeFields(i,a,n,s,r),this.that=o,this},initializeFields:function(t,e,i,a,n){this.minValue=t,this.maxValue=e,this.minEditPositions=i,this.maxEditPositions=a,this.updateActiveEditor(t),this.item=n},updateActiveEditor:function(t){this.value=t,this.positions=0},getDayOfWeek:function(e){return typeof this.currentValue==t.jqx._jqxDateTimeInput.DateTime&&this.currentValue.dayOfWeek(),e},textValue:function(){this.value;var t=this.minEditPositions;return this.that._format(this.value,"d"+t,"")},insert:function(t){if(null==t)return this.deleteValue();if(0==t.length)return this.deleteValue();var e=t.substring(0,1);if(!isNaN(e)){var i;return i=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),this.positions>=this.maxEditPositions&&(this.positions=0),i=i.substring(0,this.positions)+e+i.substring(this.positions+1),i=this.setValueByString(i,1),!0}},setValueByString:function(t,e){t=this.fixValueString(t);var i=new Number(t);return this.value=i,this.positions+=e,t},fixValueString:function(t){return t.length>this.maxEditPositions&&(t=t.substring(t.length-this.maxEditPositions)),t},initializeValueString:function(t){var e;return e="",this.hasDigits()&&(e=t),e},deleteValue:function(){return(this.value!=this.minValue||0!=this.hasDigits())&&(this.updateActiveEditor(this.minValue),!0)},hasDigits:function(){return this.positions>0},correctMaximumValue:function(t){return t>this.maxValue&&(t=this.minValue),t},correctMinimumValue:function(t){return t<this.minValue&&(t=this.maxValue),t},increaseValue:function(t){var e=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),i=e.toString()[this.positions];if((i=parseInt(i)+1)>9&&(i=0),!t){var a=this.value+1;return a=this.correctMaximumValue(a),this.updateActiveEditor(a),!0}var n=e.substring(0,this.positions)+i+e.substring(this.positions+1);return!(n==this.value&&!this.hasDigits())&&(this.updateActiveEditor(n),!0)},decreaseValue:function(t){var e=this.that._format(Number(this.value),"d"+this.maxEditPositions,this.culture),i=e.toString()[this.positions];if((i=parseInt(i)-1)<0&&(i=9),!t){var a=this.value-1;return a=this.correctMinimumValue(a),this.updateActiveEditor(a),!0}var n=e.substring(0,this.positions)+i+e.substring(this.positions+1);return!(n==this.value&&!this.hasDigits())&&(this.updateActiveEditor(n),!0)},getDateTimeItem:function(){return this.item}})}(jqxBaseFramework),function(t){t.jqx._jqxDateTimeInput.DisabledEditor={},t.extend(t.jqx._jqxDateTimeInput.DisabledEditor,{_create:function(t,e,i,a,n,s){return this.format=t,this.value=-1,this.item=n,this.that=s,this},textValue:function(){return""},insert:function(t){return!1},deleteValue:function(){return!1},increaseValue:function(){return!1},decreaseValue:function(){return!1},getDateTimeItem:function(){return this.item}})}(jqxBaseFramework),function(t){t.jqx._jqxDateTimeInput.AmPmEditor={},t.extend(t.jqx._jqxDateTimeInput.AmPmEditor,{_createAmPmEditor:function(t,e,i,a,n,s){return this.format=t,this.value=e,this.minValue=0,this.amString=i,this.pmString=a,this.item=n,this.that=s,i==a&&(this.amString="<"+i,this.pmString=">"+a),this},textValue:function(){var t=this.amString;return 0!=this.value&&(t=this.pmString),1==this.format.length&&t.length>1&&(t=t.substring(0,1)),t},insert:function(t){var e=t.toString();if(0==e.Length)return this.deleteValue();var i=!1;if(this.amString.Length>0&&this.pmString.Length>0){var a=amString[0],n=e[0],s=pmString[0];a.toString()==n.toString()?(this.value=0,i=!0):s.toString()==n.toString()&&(this.value=1,i=!0)}else this.pmString.Length>0?(this.value=1,i=!0):this.amString.Length>0&&(this.value=0,i=!0);return i},deleteValue:function(){if(0==this.amString.Length&&0!=this.pmString.Length){if(0==this.value)return!1;this.value=0}else{if(1==this.value)return!1;this.value=1}return!0},increaseValue:function(){return this.value=1-this.value,!0},decreaseValue:function(){return this.increaseValue(),!0},getDateTimeItem:function(){return this.item}})}(jqxBaseFramework),jqxBaseFramework.jqx._jqxDateTimeInput.getDateTime=function(t){return{dateTime:new Date(t),daysPer4Years:1461,daysPerYear:365,daysToMonth365:{0:0,1:31,2:59,3:90,4:120,5:151,6:181,7:212,8:243,9:273,10:304,11:334,12:365},daysToMonth366:{0:0,1:31,2:60,3:91,4:121,5:152,6:182,7:213,8:244,9:274,10:305,11:335,12:366},maxValue:3155378976e9,millisPerDay:864e5,millisPerHour:36e5,millisPerMinute:6e4,millisPerSecond:1e3,minTicks:0,minValue:0,ticksPerDay:864e9,ticksPerHour:36e9,ticksPerMillisecond:1e4,ticksPerMinute:6e8,ticksPerSecond:1e7,hour:t.getHours(),minute:t.getMinutes(),day:t.getDate(),second:t.getSeconds(),month:1+t.getMonth(),year:t.getFullYear(),millisecond:t.getMilliseconds(),dayOfWeek:t.getDay(),isWeekend:function(t){return void 0!=t&&null!=t||(t=this.dateTime),t.getDay()%6==0},dayOfYear:function(t){void 0!=t&&null!=t||(t=this.dateTime);var e=new Date(t.getFullYear(),0,1);return Math.ceil((t-e)/864e5)},_setDay:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setDate(t),this.day=this.dateTime.getDate()},_setMonth:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setMonth(t-1),this.month=1+this.dateTime.getMonth()},_setYear:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setFullYear(t),this.year=this.dateTime.getFullYear()},_setHours:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setHours(t),this.hour=this.dateTime.getHours()},_setMinutes:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setMinutes(t),this.minute=this.dateTime.getMinutes()},_setSeconds:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setSeconds(t),this.second=this.dateTime.getSeconds()},_setMilliseconds:function(t){void 0!=t&&null!=t||(t=0),this.dateTime.setMilliseconds(t),this.millisecond=this.dateTime.getMilliseconds()},_addDays:function(t){var e=this.dateTime,i=e.getDate();return e.setDate(e.getDate()+t),i===e.getDate()&&e.setHours(e.getHours()+e.getTimezoneOffset()/60),e},_addWeeks:function(t){var e=this.dateTime;return e.setDate(e.getDate()+7*t),e},_addMonths:function(t){var e=this.dateTime;return e.setMonth(e.getMonth()+t),e},_addYears:function(t){var e=this.dateTime;return e.setFullYear(e.getFullYear()+t),e},_addHours:function(t){var e=this.dateTime;return e.setHours(e.getHours()+t),e},_addMinutes:function(t){var e=this.dateTime;return e.setMinutes(e.getMinutes()+t),e},_addSeconds:function(t){var e=this.dateTime;return e.setSeconds(e.getSeconds()+t),e},_addMilliseconds:function(t){var e=this.dateTime;return e.setMilliseconds(e.getMilliseconds()+t),e},_isLeapYear:function(t){if(t<1||t>9999)throw"invalid year";return t%4==0&&(t%100!=0||t%400==0)},_dateToTicks:function(t,e,i){if(t>=1&&t<=9999&&e>=1&&e<=12){var a=this._isLeapYear(t)?this.daysToMonth366:this.daysToMonth365;if(i>=1&&i<=a[e]-a[e-1])return 864e9*(365*(t=t-1)+t/4-t/100+t/400+a[e-1]+i-1)}},_daysInMonth:function(t,e){if(e<1||e>12)throw"Invalid month.";var i=this._isLeapYear(t)?this.daysToMonth366:this.daysToMonth365;return i[e]-i[e-1]},_timeToTicks:function(t,e,i){return 1e7*(3600*t+60*e+i)},_equalDate:function(t){return this.year==t.getFullYear()&&this.day==t.getDate()&&this.month==t.getMonth()+1}}};

